(function(j){var l={KnotVariants:{},Setting:{enablePropertyHook:!0},Log:{Level:{Info:"Info",Warning:"Warning",Error:"Error"},log:function(h,g,e){j.console&&(j.console.log("["+h+"]"+g),e&&j.console.log(e))},info:function(h,g){this.log(this.Level.Info,h,g)},warning:function(h,g){this.log(this.Level.Warning,h,g)},error:function(h,g){this.log(this.Level.Error,h,g)}},Debugger:{knotChanged:function(){},knotTied:function(){},knotUntied:function(){},nodeAdded:function(){},nodeRemoved:function(){},errorStatusChanged:function(){}}};
j.Knot={K1M:function(){return l}}})(window);(function(j){var l=j.Knot.K1M(),h={"(":!0,"{":!0,"[":!0},g={")":!0,"}":!0,"]":!0},e={"(":")","{":"}","[":"]"};l.K1F={K1H:function(d){for(var b in d)return!1;return!0},trim:function(d){return d.trim?d.trim():d.replace(/^\s+|\s+$/g,"")},K1G:function(d,b){return!d?!1:d.substr(0,b.length)===b},getValueOnPath:function(d,b){if(!b&&""!==b||"*NULL"===b)return null;if("*"===b||""===b)return d;if("'"===b[0]&&"'"===b[b.length-1])return b.substr(1,b.length-2);var e=!1;"@"===b[0]&&
(e=!0,b=b.substr(1));var a;if(this.K1G(b,"__knot_global"))a=l.KS.KV(b);else{var c=d;"/"===b[0]?(c=j,b=b.substr(1)):"$"===b[0]&&(c=l.KnotVariants,b=b.substr(1));for(;0<=b.indexOf(".")&&c;)var i=l.K1F.trim(b.substr(0,b.indexOf("."))),c="*"!==i?c[i]:void 0,b=l.K1F.trim(b.substr(b.indexOf(".")+1));"*"===b?a=c:c&&(a=c[b])}if(e&&a&&"function"!==typeof a)l.Log.error("'"+b+"' is expected as a function, but it isn't.");else return a},setValueOnPath:function(e,b,f){if("*"!==
b[b.length-1]){if(this.K1G(b,"__knot_global"))throw Error("Can't set global symbol!");b&&"/"===b[0]?(e=j,b=b.substr(1)):"$"===b[0]&&(e=l.KnotVariants,b=b.substr(1));var a=b,c=b.lastIndexOf(".");0<c&&(a=b.substr(c+1),e=this.getValueOnPath(e,b.substr(0,c)));e&&(e[a]=f)}},K1I:function(){return j.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},K1J:function(e,b,f,a){var c={start:-1,end:-1};c.start=e.indexOf(f,b);if(0>c.start)return null;for(var b=0,i=c.start+
1;;){var k=e.indexOf(f,i),i=e.indexOf(a,i);if(0>i)break;if(0>k||i<k){if(0===b){c.end=i;break}else b--;i+=1}else b++,i=k+1}return 0<=c.start&&0<=c.end?c:null},K1K:function(d,b){for(var f=0,a=0,c=[],i=[],k=b.length;f<d.length;){if(h[d[f]])i.push(d[f]);else if(g[d[f]]){var m=i.pop();e[m]!==d[f]&&(l.Log.warning("Unclosed block is detected.\r"+d),i.push(m))}else 0===i.length&&(d[f]===b[0]&&d.substr(f,k)===b)&&(c.push(d.substr(a,f-a)),a=f+k);f++}0<i.length&&l.Log.warning("Unclosed block is detected.\r"+
d);f>=a&&c.push(d.substr(a,f-a));return c}}})(window);(function(j){j=j.Knot.K1M();j.Deferred=function(){this._succCallbacks=[];this._errCallbacks=[];this.isRejected=this.isFinished=!1;this.result=null};j.Deferred.prototype.resolve=function(l){this.result=l;this.isFinished=!0;this.isRejected=!1;for(var h=0;h<this._succCallbacks.length;h++)this._succCallbacks[h](l)};j.Deferred.prototype.reject=function(l){this.result=l;this.isRejected=this.isFinished=!0;for(var h=0;h<this._errCallbacks.length;h++)this._errCallbacks[h](l)};j.Deferred.prototype.done=
function(l,h){this.isFinished?this.isRejected?h(this.result):l(this.result):(this._succCallbacks.push(l),this._errCallbacks.push(h));return this}})(window);(function(j){var l=j.Knot.K1M();l.KJ={_dataInMonitoring:[],_attachedInfoOfData:[],KK:function(h){if(l.Setting.enablePropertyHook){if(!h.__knot_attachedData){if("object"!==typeof h)throw Error("Can only monitor object or array!");Object.defineProperty(h,"__knot_attachedData",{value:{},configurable:!0,writable:!1,enumerable:!1})}return h.__knot_attachedData}0>this._dataInMonitoring.indexOf(h)&&(this._dataInMonitoring.push(h),this._attachedInfoOfData[this._dataInMonitoring.indexOf(h)]=
{});return this._attachedInfoOfData[this._dataInMonitoring.indexOf(h)]},KL:function(h){l.Setting.enablePropertyHook?delete h.__knot_attachedData:(h=this._dataInMonitoring.indexOf(h),0<=h&&(delete this._dataInMonitoring[h],delete this._attachedInfoOfData[h]))}}})(window);(function(j){var l=j.Knot.K1M();l.KM={on:function(h,g,e,d){h=l.KJ.KK(h);h.K1O||(h.K1O={});g||(g="*");h.K1O[g]||(h.K1O[g]=[]);h.K1O[g].push({callback:e,attachedData:d})},off:function(h,g,e){g||(g="*");var d=l.KJ.KK(h);if(d.K1O&&d.K1O[g]){for(var b=0;b<d.K1O[g].length;b++)if(d.K1O[g][b].callback===e){d.K1O[g].splice(b,
1);break}0===d.K1O[g].length&&(delete d.K1O[g],l.K1F.K1H(d)&&l.KJ.KL(h))}},KN:function(h,g,e){h=l.KJ.KK(h);if(h.K1O&&h.K1O[g])for(var d=0;d<h.K1O[g].length;d++)if(h.K1O[g][d].callback===e)return!0;return!1},KO:function(h,g,e){h=l.KJ.KK(h);if(h.K1O&&h.K1O[g])for(var d=0;d<h.K1O[g].length;d++)if(h.K1O[g][d].callback===
e)return h.K1O[g][d].attachedData;return null},notifyDataChanged:function(h,g,e,d,b){var f=l.KJ.KK(h);f.changedProperties||(f.changedProperties=[]);0>f.changedProperties.indexOf(g)&&f.changedProperties.push(g);var a,c;if(f.K1O&&f.K1O[g]){a=f.K1O[g].slice(0);for(c=0;c<a.length;c++)try{a[c].callback.apply(h,[g,e,d,b])}catch(i){l.Log.warning("Call changed callback failed.",i)}}if(f.K1O&&f.K1O["*"]&&"*"!==
g){a=f.K1O["*"].slice(0);for(c=0;c<a.length;c++)try{a[c].callback.apply(h,[g,e,d,b])}catch(k){l.Log.warning("Call changed callback failed.",k)}}},getPropertiesChangeRecords:function(h){h=l.KJ.KK(h);return!h?null:h.changedProperties?h.changedProperties:[]},clearPropertiesChangeRecords:function(h){h=l.KJ.KK(h);if(!h)return null;h.changedProperties=null},KP:function(h,g){if("*"!==g){var e=l.KJ.KK(h);e.dataHookInfo||
(e.dataHookInfo={hookedProperties:[],data:{},hookRefCount:{}});if(0<=e.dataHookInfo.hookedProperties.indexOf(g))e.dataHookInfo.hookRefCount[g]++;else if(e.dataHookInfo.hookedProperties.push(g),e.dataHookInfo.data[g]=h[g],e.dataHookInfo.hookRefCount[g]=1,!(h instanceof Array&&"length"===g))try{Object.defineProperty(h,g,{set:function(b){var d=e.dataHookInfo.data[g];if(d!==b){e.dataHookInfo.data[g]=b;l.KM.notifyDataChanged(this,g,d,b)}},get:function(){return e.dataHookInfo.data[g]},configurable:!0,
enumerable:!0})}catch(d){e.dataHookInfo.hookFailed=!0,l.Log.warning("Hook property failed. property:"+g,d)}}},KQ:function(h,g){if("*"!==g){var e=l.KJ.KK(h);e.dataHookInfo&&(!(0>e.dataHookInfo.hookedProperties.indexOf(g))&&!(0<--e.dataHookInfo.hookRefCount[g]))&&(e.dataHookInfo.hookFailed||(delete h[g],h[g]=e.dataHookInfo.data[g]),e.dataHookInfo.hookedProperties.splice(e.dataHookInfo.hookedProperties.indexOf(g),1),delete e.dataHookInfo.data[g],delete e.dataHookInfo.hookRefCount[g])}},
KR:function(h,g){var e=l.KJ.KK(h);return!e.dataHookInfo?!1:0<=e.dataHookInfo.hookedProperties.indexOf(g)},monitorObject:function(h,g,e,d){var b,f=g.substr(0,g.indexOf("."));f?b=g.substr(g.indexOf(".")+1):(f=g,b=null);var a={};l.KM.on(h,g,e,a);b&&(a.childChangedCallback=function(a,i,k,e){l.KM.notifyDataChanged(h,f+"."+b,i,k,e)},a.monitorChildChangedCallback=function(c,i,k,e){i&&l.KM.stopMonitoring(i,b,a.childChangedCallback);k&&l.KM.monitorObject(k,
b,a.childChangedCallback,true);c=f+"."+b;k=l.K1F.getValueOnPath(k,b);i=l.K1F.getValueOnPath(i,b);l.KM.notifyDataChanged(h,c,i,k,e)},l.KM.on(h,f,a.monitorChildChangedCallback),h[f]&&l.KM.monitorObject(h[f],b,a.childChangedCallback,!0));d||(a.changedCallback=function(c,i,k){if(i instanceof Array){l.KM.off(i,"*",a.arrayChangedCallback);delete a.arrayChangedCallback}if(k instanceof Array){a.arrayChangedCallback=function(a,c,k,i){l.KM.notifyDataChanged(h,
g,k,k,i)};l.KM.on(k,"*",a.arrayChangedCallback)}},l.KM.on(h,g,a.changedCallback,a),e=l.K1F.getValueOnPath(h,g),e instanceof Array&&a.changedCallback("*",null,e));l.KM.KP(h,f)},monitor:function(h,g,e){if(g)"/"===g[0]&&(g=g.substr(1),h=j),this.monitorObject(h,g,e);else l.KM.on(h,null,e)},stopMonitoring:function(h,g,e){if(g){"/"===g[0]&&(g=g.substr(1),h=j);var d,b=g.substr(0,g.indexOf("."));b?d=g.substr(g.indexOf(".")+1):(b=g,d=null);var f=l.KM.KO(h,
g,e);f&&(f.monitorChildChangedCallback&&l.KM.off(h,b,f.monitorChildChangedCallback),f.childChangedCallback&&h[b]&&l.KM.stopMonitoring(h[b],d,f.childChangedCallback),f.changedCallback&&l.KM.off(h,g,f.changedCallback),f.arrayChangedCallback&&l.KM.off(l.K1F.getValueOnPath(h,g),"*",f.arrayChangedCallback));l.KM.off(h,g,e);l.KM.KQ(h,b)}else l.KM.off(h,g,e)}}})(window);(function(j){function l(b){e[b]=Array.prototype[b];Array.prototype[b]=function(){var d=this.length,a=e[b].apply(this,arguments);this.__knot_attachedData&&(g.KM.notifyDataChanged(this,"*"),d!==this.length&&g.KM.notifyDataChanged(this,"length",d,this.length));return a}}function h(b){b.__knot_arrayVersion=d++;isFinite(d)||(d=0)}var g=j.Knot.K1M(),e={};l("sort");l("reverse");var d=0;Array.prototype.notifyChanged=function(b,e){if(this.__knot_attachedData){var a=null;b&&
e&&(a={removed:b,added:e});g.KM.notifyDataChanged(this,"*",a);g.KM.notifyDataChanged(this,"length",null,this.length,{property:"length"})}};Array.prototype.setValueAt=function(b,e){this[b]=e;this.__knot_attachedData&&(h(this),g.KM.notifyDataChanged(this,"*",null,null,{removed:[b],added:[b]}))};Array.prototype.clear=function(){this.splice(0,this.length)};e.push=Array.prototype.push;Array.prototype.push=function(){var b=this.length,d=e.push.apply(this,arguments);if(this.__knot_attachedData){for(var a=
[],c=0;c<arguments.length;c++)a.push(b+c);h(this);g.KM.notifyDataChanged(this,"*",null,null,{removed:[],added:a});g.KM.notifyDataChanged(this,"length",b,this.length,{property:"length"})}return d};e.unshift=Array.prototype.unshift;Array.prototype.unshift=function(){var b=this.length,d=e.unshift.apply(this,arguments);if(this.__knot_attachedData){for(var a=[],c=0;c<arguments.length;c++)a.push(c);h(this);g.KM.notifyDataChanged(this,"*",null,null,{removed:[],added:a});g.KM.notifyDataChanged(this,
"length",b,this.length,{property:"length"})}return d};e.pop=Array.prototype.pop;Array.prototype.pop=function(){var b=this.length,d=e.pop.apply(this,arguments);this.__knot_attachedData&&(h(this),g.KM.notifyDataChanged(this,"*",null,null,{removed:[b-1],added:[]}),g.KM.notifyDataChanged(this,"length",b,this.length,{property:"length"}));return d};e.shift=Array.prototype.shift;Array.prototype.shift=function(){var b=this.length,d=e.shift.apply(this,arguments);this.__knot_attachedData&&
(h(this),g.KM.notifyDataChanged(this,"*",null,null,{removed:[0],added:[]}),g.KM.notifyDataChanged(this,"length",b,this.length,{property:"length"}));return d};e.splice=Array.prototype.splice;Array.prototype.splice=function(b,d){var a=this.length,c=e.splice.apply(this,arguments);if(this.__knot_attachedData){for(var i=[],k=[],m=b;m<b+d;m++)k.push(m);for(m=b;m<b+arguments.length-2;m++)i.push(m);h(this);g.KM.notifyDataChanged(this,"*",null,null,{removed:k,added:i});g.KM.notifyDataChanged(this,
"length",a,this.length,{property:"length"})}return c}})(window);(function(j){var l=j.Knot.K1M(),h=0,g={};l.KS={KT:function(e,d){g[e]?l.Log.error("The global symbol'"+e+"' has been registered."):g[e]=d},KU:function(e){var d="s"+h++;g[d]=e;return"__knot_global."+d},KV:function(e){var e=e.split("."),d=j;"__knot_global"===e[0]&&(d=g,e.splice(0,1));for(var b=0;b<e.length;b++){if(null===d||"undefined"===typeof d)return;d=d[e[b]]}return d},KW:function(e){return l.K1F.K1G(e,"__knot_global.")}}})(window);(function(j){function l(e){e="(function (value) {"+e+"})";try{return g.KS.KU(eval(e))}catch(d){g.Log.error("Invalid pipe function: \r\n"+e,d)}}var h=[{splitter:":",left:!1,right:!1},{splitter:"=>",left:!0,right:!1},{splitter:"<=",left:!1,right:!0},{splitter:"=",left:!0,right:!0}],g=j.Knot.K1M();g.K18={parse:function(e){for(var d=[],e=this.K1E(e),e=g.K1F.K1K(e,";"),b=0;b<e.length;b++){var f=this.K1C(e[b]);
f&&d.push(f)}return d},K1E:function(e){for(var d=g.K1F.K1J(e,0,"{","}");d;)var b=e.substr(d.start+1,d.end-d.start-1),b=l(b),e=e.substr(0,d.start)+b+e.substr(d.end+1),d=g.K1F.K1J(e,0,"{","}");return e},K1C:function(e){e=g.K1F.trim(e);if(!e)return null;for(var d,b,f=0;f<h.length;f++)if(d=g.K1F.K1K(e,h[f].splitter),2===d.length){b=h[f];break}if(!b)return g.Log.error("Invalid option:"+e),null;f=this.K1B(d[0]);d=
this.K1B(d[1]);if(null===f||null===d||f.isComposite&&d.isComposite)return g.Log.error("Invalid option:"+e),null;b.left&&(f.options||(f.options={}),f.options.readonly="1");b.right&&(d.options||(d.options={}),d.options.readonly="1");return{leftAP:f,rightAP:d}},K1B:function(e){e=g.K1F.trim(e);if("("===e[0])return this.K19(e);var d=g.K1F.K1K(e,">"),e=g.K1F.trim(d[0]);d.splice(0,1);var d=d.map(function(a){return g.K1F.trim(a)}),b=null;
if("]"===e[e.length-1]){var f=g.K1F.K1J(e,0,"[","]");f&&(b=this.K1A(e.substr(f.start+1,f.end-f.start-1)),e=e.substr(0,f.start))}return{description:e,pipes:d,options:b}},K1A:function(e){for(var d={},e=g.K1F.K1K(e,";"),b=0;b<e.length;b++){var f=e[b].split(":");2!==f.length||!f[0]||!f[1]?g.Log.error("Invalid AP option:"+e[b]):d[g.K1F.trim(f[0])]=g.K1F.trim(f[1])}return d},K19:function(e){var d=g.K1F.K1J(e,0,"(",")");
if(!d)return g.Log.error("Invalid composite option:"+e),null;for(var b=g.K1F.K1K(e.substr(d.start+1,d.end-d.start-1),"&"),f=[],a=0;a<b.length;a++){var c=this.K1B(b[a]);if(!c)return null;f.push(c)}for(d=d.end+1;">"!==e[d];){if(" "!==e[d]&&"\t"!==e[d]&&"\n"!==e[d])return g.Log.error("Invalid composite option:"+e),null;d++}d++;d=g.K1F.trim(e.substr(d));if(!d)return g.Log.error("Invalid composite option:"+e),null;e=d.split(">").map(function(a){return g.K1F.trim(a)});
return{isComposite:!0,childrenAPs:f,nToOnePipes:e}}}})(window);(function(j){function l(a,c,i,k){if(c&&c[i]){var b=e.K1F.getValueOnPath(null,c[i]);if(!b||"function"!==typeof b)e.Log.error("'"+c[i]+"' must be a function.");else try{b.apply(a,k)}catch(d){e.Log.error("Call AP event handler '"+c[i]+"' failed.",d)}}}function h(a,c,i,k){if(i.description&&("*"===i.description[0]||"!"===i.description[0])){var b=i.description,d=!1;if("!"===b[0]&&(b=e.K1F.trim(b.substr(1)),d=!0,"*"!==b[0]))return{target:k?a:c,ap:i};var f;e.K1F.K1G(b,"*LEFT")&&(f=b.substr(5),
k=!0);e.K1F.K1G(b,"*RIGHT")&&(f=b.substr(6),k=!1);""===f&&(f="*");f&&"."===f[0]&&(f=f.substr(1));if(f){d&&(f="!"+f);var b={},g;for(g in i)i.hasOwnProperty(g)&&(b[g]=i[g]);b.description=f;i=b}}return{target:k?a:c,ap:i}}function g(a){return a.options&&a.options.readonly?(a=a.options.readonly.toLowerCase(),"1"===a||"true"===a):!1}var e=j.Knot.K1M(),d=[],b=[],f=[];e.K3={K4:function(a,c){if(c&&"!"===c[0])return this.K5(a,c)||e.K2;for(var i=
d.length-1;0<=i;i--)if(d[i].doesSupport(a,c))return d[i];return e.K2},K5:function(a,c){for(var i=b.length-1;0<=i;i--)if(b[i].doesSupport(a,c))return b[i];return null},registerAPProvider:function(a,c,i){if(c)0>b.indexOf(a)&&b.push(a);else{0>d.indexOf(a)&&d.push(a);i&&f.push(a);for(a=0;a<f.length;a++)d.splice(d.indexOf(f[a]),1),d.push(f[a])}},unregisterAPProvider:function(a,c){c?0<=b.indexOf(a)&&b.splice(d.indexOf(a),1):(0<=d.indexOf(a)&&d.splice(d.indexOf(a),1),f.indexOf(a)&&
f.splice(f.indexOf(a),1))},K8:{},K9:function(a,c){this.KD(a,c);var i=c.provider.getValue(a,c.description,c.options);try{if(c.pipes){for(var k=0;k<c.pipes.length;k++){var b=e.K1F.getValueOnPath(a,c.pipes[k]);"function"!==typeof b&&e.Log.error("Pipe must be a function. pipe name:"+c.pipes[k]);i=b.apply(a,[i])}c.errorAPProvider&&c.errorAPProvider.setValue(a,"!"+c.description,void 0,c.options);e.Debugger.errorStatusChanged(a,c,void 0)}}catch(d){return c.errorAPProvider&&
(c.errorAPProvider.setValue(a,"!"+c.description,d,c.options),e.Debugger.errorStatusChanged(a,c,d)),this.K8}return i},KA:function(a,c,i,k){if(!c.KB){c.KB=!0;try{this.KD(a,c),c.provider.setValue(a,c.description,i,c.options,k),l(a,c.options,"@set",[c.description,i])}finally{delete c.KB}}},KC:function(a,c,i,k,b){e.Debugger.knotChanged(a,c,i,k,b)},KD:function(a,c){c.provider||(c.provider=this.K4(a,
c.description),c.errorAPProvider=this.K5(a,c.description))},monitor:function(a,c,i,k,b){this.KD(a,c);this.KD(i,k);c.provider.doesSupportMonitoring(a,c.description)&&(c.changedCallback=function(d,f,g,h){if(!k.KB){var n=e.K3.K9(a,c);if(n!==e.K3.K8){b.leftAP===c?e.K3.KC(a,i,b,n,!0):e.K3.KC(i,a,b,n,!1);c.KB=!0;try{e.K3.KA(i,
k,n,h)}finally{delete c.KB}l(a,c.options,"@change",arguments)}}},c.provider.monitor(a,c.description,c.changedCallback,c.options))},stopMonitoring:function(a,c){this.KD(a,c);c.changedCallback&&c.provider.doesSupportMonitoring(a,c.description)&&(c.provider.stopMonitoring(a,c.description,c.changedCallback,c.options),delete c.changedCallback)},KE:function(a,c,i,k,b){var d,f,g,h;a.isComposite?(d=a,f=c,g=i,h=k):(d=i,f=k,g=a,h=c);for(a=0;a<d.childrenAPs.length;a++)d.childrenAPs[a].provider=
e.K3.K4(f,d.childrenAPs[a].description);h.provider=e.K3.K4(h,g.description);d.changedCallback=function(a,i,j,u){a=[];for(i=0;i<d.childrenAPs.length;i++){j=e.K3.K9(f,d.childrenAPs[i]);if(j===e.K3.K8)return;a.push(j)}j=a;if(d.nToOnePipes)for(i=0;i<d.nToOnePipes.length;i++){a=e.K1F.getValueOnPath(f,d.nToOnePipes[i]);typeof a!=="function"&&e.Log.error("Pipe must be a function. pipe name:"+d.nToOnePipes[i]);j=
a.apply(f,[j])}e.K3.KC(c,k,b,j,h===k);e.K3.KA(h,g,j,u);l(h,g,"@change",[c,k,b])};for(a=0;a<d.childrenAPs.length;a++)d.childrenAPs[a].provider.doesSupportMonitoring(f,d.childrenAPs[a].description)&&d.childrenAPs[a].provider.monitor(f,d.childrenAPs[a].description,d.changedCallback,d.childrenAPs[a].options);d.changedCallback()},KF:function(a,c,i){var k=h(a,c,i.leftAP,!0),b=h(a,c,i.rightAP,!1),a=k.target,c=b.target,k=k.ap,b=b.ap;if(k.isComposite||b.isComposite)this.KE(k,
a,b,c,i);else{this.KD(a,k);this.KD(c,b);var d;!g(k)||g(k)&&g(b)?(d=this.K9(c,b),d!==this.K8&&(this.KC(a,c,i,d,!1),this.KA(a,k,d))):(d=this.K9(a,k),d!==this.K8&&(this.KC(c,a,i,d,!1),this.KA(c,b,d)));g(b)||this.monitor(a,k,c,b,i);g(k)||this.monitor(c,b,a,k,i)}e.Debugger.knotTied(a,c,i)},KG:function(a,c,i){var k=h(a,c,i.leftAP,!0),b=h(a,c,i.rightAP,!1),
a=k.target,c=b.target,k=k.ap,b=b.ap;if(k.isComposite||b.isComposite){if(k.isComposite?(b=k,k=a):k=c,b.changedCallback)for(var d=0;d<b.childrenAPs.length;d++)b.childrenAPs[d].provider.doesSupportMonitoring(k,b.childrenAPs[d].description)&&b.childrenAPs[d].provider.stopMonitoring(k,b.childrenAPs[d].description,b.changedCallback,b.childrenAPs[d].options)}else this.stopMonitoring(a,k),delete k.changedCallback,this.stopMonitoring(c,b);delete b.changedCallback;e.Debugger.knotUntied(a,c,i)},KH:function(a){a.changedCallback&&
a.changedCallback()}};e.K2={doesSupport:function(){return!0},getValue:function(a,c){"@"===c[0]&&(c=c.substr(1));return e.K1F.getValueOnPath(a,c)},setValue:function(a,c,i){e.K1F.setValueOnPath(a,c,i)},doesSupportMonitoring:function(a){return"object"!==typeof a?!1:!0},monitor:function(a,c,i){c&&"/"===c[0]&&(a=j,c=c.substr(1));c&&"$"===c[0]&&(a=e.KnotVariants,c=c.substr(1));a&&e.KM.monitor(a,c,i)},stopMonitoring:function(a,c,i){c&&"/"===c[0]&&(a=j,c=c.substr(1));c&&"$"===
c[0]&&(a=e.KnotVariants,c=c.substr(1));a&&e.KM.stopMonitoring(a,c,i)}}})(window);(function(j){function l(a,c,i){for(var b=0,d=k.K1F.K1J(c,b,"{","}");null!==d;){b=c.substr(b,d.start-b);b=k.K1F.trim(b);i&&(b=b.split(",").filter(function(a){return a}).map(function(a){a=k.K1F.trim(a);return i.split(",").filter(function(a){return a}).map(function(c){return k.K1F.trim(c)+" "+a}).join(",")}).join(","));a[b]||(a[b]=[]);for(var e=c.substr(d.start+1,d.end-d.start-1),e=k.K1F.K1K(e,";"),f=0;f<e.length;f++){var g=k.K1F.trim(e[f]);g&&(0===g.indexOf("->")?
l(a,g.substr(2),b):(g=k.K18.K1E(g),0>a[b].indexOf(g)&&a[b].push(g)))}0===a[b].length&&delete a[b];b=d.end+1;d=k.K1F.K1J(c,b,"{","}")}}function h(a){var c=null;a.__knot&&a.__knot.cbsOptions&&(c=a.__knot.cbsOptions,delete a.__knot.cbsOptions);if(a.attributes.binding&&a.attributes.binding.value){c||(c=[]);var b=a.attributes.binding.value,b=k.K18.K1E(b),b=b.split(";").map(function(a){return k.K1F.trim(a)}),c=c.concat(b)}if(c)for(b=
0;b<c.length;b++){a.__knot||(a.__knot={options:[]});var i=k.K18.parse(c[b]);0!==i.length&&(a.__knot.options.push(i[0]),d(i[0].leftAP)&&0>m.indexOf(a)&&m.push(a))}if(a.children)for(c=0;c<a.children.length;c++)h(a.children[c])}function g(a){for(var c=0;c<a.length;c++){var b=a[c].scope,i=a[c].CBS,d=void 0,e=void 0;for(e in i)if(k.K1F.K1G(e,"/")){for(var d=e,f=i,g=[],m=0;m<f[d].length;m++)g=g.concat(k.K18.parse(f[d][m]));k.Kh.addGlobalObjectOption(d,g)}else{var l;
try{l=b.querySelectorAll(e)}catch(j){k.Log.warning("Invalid selector:"+e,j);continue}0===l.length&&k.Log.warning("There is no element selected with selector:"+e);for(d=0;d<l.length;d++)f=i[e].slice(0),l[d].__knot||(l[d].__knot={options:[]}),l[d].__knot.cbsOptions&&(f=l[d].__knot.cbsOptions.concat(f)),l[d].__knot.cbsOptions=f}a[c].scope===document?h(document.body):h(a[c].scope)}}function e(a,c){var b=[],i;c||(i={scope:document,CBS:{},isGlobalScope:!0},b.push(i));for(var d=0;d<a.length;d++){var e;var f=
a[d];if(!f||""===f)e=null;else{for(var g=void 0;0<=(g=f.indexOf("/*"));){e=f.indexOf("*/",g);if(0>e)throw Error("Can't find close mark for comment.");f=f.substr(0,g)+f.substr(e+2)}f=f.split("\n");g="";for(e=0;e<f.length;e++)for(var h=f[e].split("\r"),m=0;m<h.length;m++)"//"!==k.K1F.trim(h[m]).substr(0,2)&&(g+=h[m]);e=g}e=k.K1F.trim(e);if(k.K1F.K1G(e,"$private")){f={CBS:{}};e=e.substr(8);g=f;g.HTML||(g.HTML="");for(var h=0,m="",j=k.K1F.K1J(e,h,"<<{{","}}>>");null!==
j;)m+=e.substr(h,j.start-h),g.HTML+=e.substr(j.start+4,j.end-j.start-4),h=j.end+4,j=k.K1F.K1J(e,h,"<<{{","}}>>");h<e.length&&(m+=e.substr(h));e=m;try{f.scope=document.createElement("DIV"),f.scope.innerHTML=f.HTML,delete f.HTML}catch(r){k.Log.error("Load private scope HTML error.",r);continue}l(f.CBS,e);b.push(f)}else c?k.Log.error("Can't load CBS. It must be a private CBS!"):l(i.CBS,e)}return b}function d(a){return"foreach"===a.description||"content"===a.description}function b(a){for(var a=
a.querySelectorAll("*[knot-template], *[knot-template-id]"),c=0;c<a.length;c++){var b;b=a[c].getAttribute("knot-template-id")?a[c].getAttribute("knot-template-id"):"__knot_template_"+r++;k.Kh.Kk[b]=a[c];a[c].__knot_template_id=b}return Array.prototype.slice.apply(a,[0])}function f(a,c){var b;if(!c.options||!c.options.template&&!c.options.templateSelector){if(b=a.children[0],1<a.children.length&&k.Log.warning("More than one child is found within '"+k.KX.KY(a)+
'", only the first will be taken as template and the reset will be removed.'),!b){k.Log.error("Can't find template within '"+k.KX.KY(a)+"'");return}}else{if(c.options.templateSelector)return;var i=c.options.template;if("@"===i[0])return;b=k.Kh.Kk[i];if(!b){k.Log.error("Can't find template with selector'"+i+"'");return}}b.__knot_template_id||k.Log.error("The template node must be marked with 'knot-template'. Current node:'"+k.KX.KY(a)+
"'");c.options||(c.options={});c.options.template=b.__knot_template_id}function a(a){var c=[],i;for(i=0;i<a.length;i++)c=c.concat(b(a[i].scope));for(i=0;i<m.length;i++)for(var e=0;e<m[i].__knot.options.length;e++)d(m[i].__knot.options[e].leftAP)&&f(m[i],m[i].__knot.options[e].leftAP),d(m[i].__knot.options[e].rightAP)&&f(m[i],m[i].__knot.options[e].rightAP);for(i=m.length=0;i<c.length;i++)delete c[i].__knot_template_id,c[i].removeAttribute("knot-template"),c[i].removeAttribute("knot-template-id"),
c[i].parentNode.removeChild(c[i]);for(i=0;i<a.length;i++)a[i].isGlobalScope||0<a[i].scope.children.length&&k.Log.warning("Useless HTML is detected in private scope.")}function c(a){s.push(a);var c=new k.Deferred,i=k.K1F.K1I();i.onreadystatechange=function(){4===i.readyState&&(200===i.status?c.resolve(i.responseText):c.reject(Error("Load CBS script error. url:"+a+" message:"+i.statusText)))};i.open("GET",a,!0);i.send();return c}function i(){for(var a=new k.Deferred,i=j.document.querySelectorAll('script[type="text/cbs"]'),
b=[],d=0,e=function(){if(0===d)try{a.resolve(b)}catch(c){k.Log.error("Initialize failed.  message:"+c.message,c)}},f=0;f<i.length;f++)i[f].src?0<=s.indexOf(i[f].src)||(d++,function(){var a=i[f].src;c(a).done(function(a){b.push(a);d--;e()},function(c){d--;k.Log.error("Load CBS script error. url:"+a,c);e(c)})}()):b.push(i[f].textContent);0===d&&a.resolve(b);return a}var k=j.Knot.K1M(),m=[],r=0,s=[];k.K1Q={loadGlobalScope:function(){var c=new k.Deferred;i().done(function(i){try{var b=
e(i,!1);g(b);a(b);c.resolve()}catch(d){k.Log.error("Initialize failed.  message:"+d.message,d),c.reject(d)}},function(a){c.reject(a)});return c},loadCBSPackage:function(i){var b=new k.Deferred;0<=s.indexOf(i)?b.resolve():c(i).done(function(c){try{var d=e([c],!0);g(d);a(d)}catch(f){k.Log.error("Parse CBS package failed. package file:"+i,f),b.reject(f)}b.resolve()},function(a){b.reject(a)});return b},test:{parseCBSInDocument:i,getScopes:e,Ks:g,Kv:a}}})(window);(function(j){function l(c){a.Kh.K15(c);c.parentNode.removeChild(c);a.Debugger.nodeRemoved(c)}function h(a,c,b){for(;b<a.children.length;b++)if(a.children[b].__knot&&a.children[b].__knot.dataContext===c)return a.children[b];return null}function g(a,c,b){a.children.length===b?a.appendChild(c):a.insertBefore(c,a.children[b])}function e(c,b,d,e){try{var f=a.K1F.getValueOnPath(d,c);if(!f)return a.Log.error("Can't find template selector:"+c),null;var g=f.apply(b,[d,b]);!g&&!e&&
a.Log.error("The template selector returns NULL. template selector:"+c);return g}catch(h){return a.Log.error("Call template selector failed. template selector:"+c,h),null}}function d(c,b,d){if(!d||!d.template&&!d.templateSelector)a.Log.error("No valid template is specified for 'content' access point. current node:"+a.KX.KY(c));else{var f=function(e,f){if(d&&d[f]){var g=a.K1F.getValueOnPath(c,d[f]);try{g.apply(c,[e,a.Kh.K1L(b)])}catch(h){a.Log.warning("Raise "+
f+" event failed.",h)}}},g=d.template,h=!1;d.templateSelector&&(null===b||"undefined"===typeof b||(g=e(d.templateSelector,c,b,!0)),h=!0);var j=c.children[0];if(j){if(!(j.__knot&&j.__knot.dataContext===b))if(null===b||"undefined"===typeof b||null===g||"undefined"===typeof g)f(j,"@removing"),l(j),f(j,"@removed");else if(h||a.Kh.K10(g)?(l(j),j=null,g&&(j=a.Kh.createFromTemplate(g,b,c)),j&&(f(j,"@adding"),c.appendChild(j),a.Kh.hasDataContext(j)||a.Kh.setDataContext(j,
b),a.Debugger.nodeAdded(j),f(j,"@added"))):a.Kh.setDataContext(j,b),j)j.__knot||(j.__knot={}),j.__knot.dataContext=b}else if(!(null===b||"undefined"===typeof b||null===g||"undefined"===typeof g))if(g=a.Kh.createFromTemplate(g,b,c))f(j,"@adding"),c.appendChild(g),a.Kh.hasDataContext(g)||a.Kh.setDataContext(g,b),f(g,"@added"),a.Debugger.nodeAdded(g)}}function b(c,b,d,f,j,p){var o,n;b||(b=[]);var q=function(b,d,e){if(j&&j[e]){var k=a.K1F.getValueOnPath(c,
j[e]);try{k.apply(c,[b,d])}catch(f){a.Log.warning("Raise "+e+" event failed.",f)}}};if(p){if(c.__knot_latestForeachArrayVersion!==b.__knot_arrayVersion){if(p.removed){var t=p.removed;for(o=t.length-1;0<=o;o--)n=c.children[t[o]],q(n,a.Kh.K1L(n),"@removing"),l(n),q(n,null,"@removed")}if(p.added){p=p.added;for(o=0;o<p.length;o++){if(f&&(d=e(f,c,b[p[o]]),!d))continue;if(n=a.Kh.createFromTemplate(d,b[p[o]],c))q(n,b[p[o]],"@adding"),g(c,n,p[o]),a.Kh.hasDataContext(n)||
a.Kh.setDataContext(n,b[p[o]]),a.Debugger.nodeAdded(n),q(n,b[p[o]],"@added")}}c.__knot_latestForeachArrayVersion=b.__knot_arrayVersion}}else{for(o=0;o<b.length;o++)if(n=h(c,b[o],o))Array.prototype.indexOf.call(c.children,n)!==o&&(c.removeChild(n),g(c,n,o));else{if(f&&(d=e(f,c,b[o]),!d))continue;if(n=a.Kh.createFromTemplate(d,b[o],c))q(n,b[o],"@adding"),g(c,n,o),a.Kh.hasDataContext(n)||a.Kh.setDataContext(n,b[o]),a.Debugger.nodeAdded(n),q(n,b[o],
"@added")}for(o=c.children.length-1;o>=b.length;o--)n=c.children[o],q(n,a.Kh.K1L(n),"@removing"),l(n),q(n,null,"@removed")}}function f(c,d,e,f){!e||!e.template&&!e.templateSelector?a.Log.error("No valid template is specified for 'foreach' access point. current node:"+a.KX.KY(c)):b(c,d,e.template,e.templateSelector,e,f)}var a=j.Knot.K1M(),c=[];c["input.value"]="change";c["textarea.value"]="change";c["input.checked"]="change";c["select.selectedIndex"]=
"change";c["select.value"]="change";c["*.clientWith"]="resize";c["*.clientHeight"]="resize";c["*.scrollTop"]="scroll";c["*.scrollLeft"]="scroll";a.KX={KY:function(a){var c=a.tagName;a.id?c+="[#"+a.id+"]":a.className&&(c+="["+a.className.split(" ").filter(function(a){return a.trim()!==""}).map(function(a){return"."+a}).join(" ")+"]");return c},getSelectorFromAPDescription:function(c){c=a.K1F.K1K(c,".");return a.K1F.trim(c[0])},getPropertyNameFromAPDescription:function(c){c=
a.K1F.K1K(c,".");if(1<c.length)return c.slice(1).join(".")},getPropertyFromElement:function(c,b){return!c?void 0:a.K1F.getValueOnPath(c,b)},Kd:function(c){if(0<c.indexOf("(")){var b=a.K1F.K1J(c,0,"(",")");if(b)try{var d=c.substr(b.start+1,b.end-b.start-1);return document.querySelector(d)}catch(e){a.Log.error("Query selector failed.",e)}else a.Log.error("Unknown selector:"+c)}else return document.querySelector(c)}};a.Kf={doesSupport:function(a,
c){return"#"===c[0]?!0:"!"===c[0]?!1:a instanceof HTMLElement},getValue:function(c,b){if("@"!==b[0]&&("#"===b[0]&&(c=a.KX.Kd(a.KX.getSelectorFromAPDescription(b)),b=a.KX.getPropertyNameFromAPDescription(b)),!a.K1F.K1G(b,"content")&&!a.K1F.K1G(b,"foreach")))return a.KX.getPropertyFromElement(c,b)},setValue:function(c,b,e,g,h){"@"===b[0]?"function"!==typeof e?a.Log.error("Event listener must be a function!"):c&&c.addEventListener(b.substr(1),
function(a){e.apply(c.__knot.dataContext,[a,c])}):("#"===b[0]&&(c=a.KX.Kd(a.KX.getSelectorFromAPDescription(b)),b=a.KX.getPropertyNameFromAPDescription(b)),a.K1F.K1G(b,"content"))?d(c,e,g):a.K1F.K1G(b,"foreach")?f(c,e,g,h):("undefined"===typeof e&&(e=""),a.K1F.setValueOnPath(c,b,e))},doesSupportMonitoring:function(b,d){"#"===d[0]&&(b=a.KX.Kd(a.KX.getSelectorFromAPDescription(d)),d=a.KX.getPropertyNameFromAPDescription(d));
if(!b)return!1;var e=b.tagName.toLowerCase()+"."+d;return c[e]||c["*."+d]},monitor:function(b,d,e,f){"#"===d[0]&&(b=a.KX.Kd(a.KX.getSelectorFromAPDescription(d)),d=a.KX.getPropertyNameFromAPDescription(d));for(var d=b.tagName.toLowerCase()+"."+d,d=c[d].split(","),g=0;g<d.length;g++)b.addEventListener(d[g],e);("input"===b.tagName.toLowerCase()||"textarea"===b.tagName.toLowerCase())&&(f&&f.immediately&&("1"===f.immediately||"true"===f.immediately.toLowerCase()))&&
b.addEventListener("keyup",e)},stopMonitoring:function(b,d,e,f){"#"===d[0]&&(b=a.KX.Kd(a.KX.getSelectorFromAPDescription(d)),d=a.KX.getPropertyNameFromAPDescription(d));for(var d=b.tagName.toLowerCase()+"."+d,d=c[d].split(","),g=0;g<d.length;g++)b.removeEventListener(d[g],e);("input"===b.tagName.toLowerCase()||"textarea"===b.tagName.toLowerCase())&&(f&&f.immediately&&("1"===f.immediately||"true"===f.immediately.toLowerCase()))&&b.removeEventListener("keyup",
e)},syncItems:b};a.K3.registerAPProvider(a.Kf);a.Kg={doesSupport:function(a,c){return c&&("!"===c[0]&&(c=c.substr(1)),"#"===c[0])?!0:a instanceof HTMLElement},getValue:function(c,b){if("!"===b[0]&&(b=b.substr(1),"#"===b[0]&&(c=a.KX.Kd(a.KX.getSelectorFromAPDescription(b)),b=a.KX.getPropertyNameFromAPDescription(b)),c))return!c.__knot_errorStatusInfo||!c.__knot_errorStatusInfo[b]?null:c.__knot_errorStatusInfo[b].currentStatus},
setValue:function(c,b,d,e){if("!"===b[0]&&(b=b.substr(1),"#"===b[0]&&(c=a.KX.Kd(a.KX.getSelectorFromAPDescription(b)),b=a.KX.getPropertyNameFromAPDescription(b)),c&&(d||c.__knot_errorStatusInfo&&c.__knot_errorStatusInfo[b]&&c.__knot_errorStatusInfo[b].K1O)))if(c.__knot_errorStatusInfo||(c.__knot_errorStatusInfo={}),c.__knot_errorStatusInfo[b]||(c.__knot_errorStatusInfo[b]={}),c.__knot_errorStatusInfo[b].currentStatus!==d){c.__knot_errorStatusInfo[b].currentStatus=
d;if(c.__knot_errorStatusInfo[b].K1O)for(var f=c.__knot_errorStatusInfo[b].K1O,g=0;g<f.length;g++)try{f[g].apply(c,[b,d])}catch(h){a.Log.warning("Call error status changed callback failed.",h)}if(e&&e["@error"])if(f=a.K1F.getValueOnPath(null,e["@error"]),!f||"function"!==typeof f)a.Log.error("'"+e["@error"]+"' must be a function.");else try{f.apply(c,[b,d])}catch(l){a.Log.error("Call AP error event handler '"+e["@error"]+"' failed.",l)}}},doesSupportMonitoring:function(a,
c){return"!"===c[0]},monitor:function(c,b,d){if("!"===b[0]){b=b.substr(1);if("#"===b[0]){var e=a.KX.getSelectorFromAPDescription(b),c=a.KX.Kd(e);if(!c){a.Log.warning("Failed to bind to error status, target is not found.  target selector:"+e);return}b=a.KX.getPropertyNameFromAPDescription(b)}c.__knot_errorStatusInfo||(c.__knot_errorStatusInfo={});c.__knot_errorStatusInfo[b]||(c.__knot_errorStatusInfo[b]={});c.__knot_errorStatusInfo[b].K1O||(c.__knot_errorStatusInfo[b].K1O=
[]);c.__knot_errorStatusInfo[b].K1O.push(d)}},stopMonitoring:function(c,b,d){"#"===b[1]&&(c=a.KX.Kd(a.KX.getSelectorFromAPDescription(b.substr(1))),b=a.KX.getPropertyNameFromAPDescription(b.substr(1)));c.__knot_errorStatusInfo&&(c.__knot_errorStatusInfo[b]&&c.__knot_errorStatusInfo[b].K1O)&&(d=c.__knot_errorStatusInfo[b].K1O.indexOf(d),0<=d&&c.__knot_errorStatusInfo[b].K1O.splice(d,1))},getErrorStatusInformation:function(a,
c){if(a.__knot_errorStatusInfo)for(var b in a.__knot_errorStatusInfo)a.__knot_errorStatusInfo[b]&&a.__knot_errorStatusInfo[b].currentStatus&&c.push({node:a,accessPointName:b,error:a.__knot_errorStatusInfo[b].currentStatus});for(b=0;b<a.children.length;b++)this.getErrorStatusInformation(a.children[b],c)}};a.K3.registerAPProvider(a.Kg,!0)})(window);(function(j){function l(a){if(!a)return null;for(var c=0;c<a.length;c++)if("dataContext"===a[c].leftAP.description)return a[c];return null}function h(a,c){a.__knot?c.__knot=JSON.parse(JSON.stringify(a.__knot)):delete c.__knot;for(var b=0;b<a.children.length;b++)h(a.children[b],c.children[b])}function g(){var a,c;for(c in b){(function(){var e=c;b[e].objectObserveCallback=function(c,f,g){c=b[e].options;if(f)for(a=0;a<c.length;a++)d.K3.KG(f,null,c[a]);for(a=0;a<c.length;a++)d.K3.KF(g,
null,c[a])};d.KM.monitor(j,c.substr(1),b[e].objectObserveCallback)})();var e=d.K1F.getValueOnPath(null,c);if(e){var f=b[c].options;for(a=0;a<f.length;a++)d.K3.KF(e,null,f[a])}}}function e(a,c){a.__knot_component||(f[c]?a.__knot_component=f[c](a,c):d.Log.error("Component '"+c+"' is not registered."))}var d=j.Knot.K1M(),b={},f={};d.Kh={Kk:{},addGlobalObjectOption:function(a,c){b[a]||(b[a]={options:[]});b[a].options=b[a].options.concat(c)},
K10:function(a){return"function"===typeof a||!this.Kk[a]},createFromTemplate:function(a,c,b){if(this.K10(a)){var e,f;f="function"===typeof a?a:d.K1F.getValueOnPath(c,a);"function"===typeof f?e=f.apply(b,[c]):d.Log.error("Unknown template:"+a);return e}d.Kh.Kk[a]?(a=d.Kh.Kk[a],c=a.cloneNode(!0),h(a,c),a=c):(d.Log.error("Failed find template. id:"+a),a=void 0);return a},hasDataContext:function(a){return a.__knot&&"dataContext"in
a.__knot},setDataContext:function(a,c){this.K13(a,c,!0);a.__knot?a.__knot.dataContext=c:a.__knot={dataContext:c};a.__knot.isFixedDataContext=!0},K11:function(a){if(a.__knot&&a.__knot.options)for(var c=0;c<a.__knot.options.length;c++)"dataContext"!==a.__knot.options[c].leftAP.description&&d.K3.KG(a,a.__knot.dataContext,a.__knot.options[c])},K12:function(a){if(a.__knot&&a.__knot.options)for(var c=0;c<a.__knot.options.length;c++)"dataContext"!==a.__knot.options[c].leftAP.description&&
d.K3.KF(a,a.__knot.dataContext,a.__knot.options[c])},K13:function(a,c,b){if(a instanceof HTMLElement||a instanceof HTMLBodyElement){var f;a.getAttribute("knot-component")&&e(a,a.getAttribute("knot-component"));if(a.__knot){if(b||!a.__knot.isFixedDataContext){f=l(a.__knot.options);b=c;if(f){b=d.K3.K9(c,f.rightAP);if(b===d.K3.K8){d.Log.error("Get context data failed. node:"+d.KX.KY(a));return}if(f.hasTiedUpKnot&&
b===a.__knot.dataContext)return;(f.data||"/"===f.rightAP.description[0])&&f.changedCallback&&f.rightAP.provider.stopMonitoring(f.data,f.rightAP.description,f.changedCallback,f.rightAP.options);f.data=c;f.data||"/"===f.rightAP.description[0]?(f.changedCallback=function(){d.Kh.K13(a,c)},f.rightAP.provider.monitor(f.data,f.rightAP.description,f.changedCallback,f.rightAP.options)):f.changedCallback=null;f.hasTiedUpKnot=!0}this.K11(a);d.K3.KC(a,
c,f,b,!1);for(f=0;f<a.children.length;f++)this.K13(a.children[f],b);a.__knot.dataContext=b;this.K12(a)}}else for(f=0;f<a.children.length;f++)this.K13(a.children[f],c)}},K14:function(a){for(;a;){if(a.__knot)return a.__knot.dataContext;a=a.parentNode}},K15:function(a){if(a.__knot){var c=l(a.__knot.options);c&&((c.data||"/"===c.rightAP.description[0])&&c.changedCallback&&c.rightAP.provider.stopMonitoring(c.data,c.rightAP.description,c.changedCallback,
c.rightAP.options),c.data=null,c.changedCallback=null,c.hasTiedUpKnot=!1);this.K11(a);delete a.__knot.dataContext}a.__knot_component&&(a.__knot_component.dispose&&a.__knot_component.dispose(),delete a.__knot_component);for(c=0;c<a.children.length;c++)this.K15(a.children[c])},bind:function(){g();this.K13(document.body,null)},clear:function(a){if(!a){var c,e;for(e in b){b[e].objectObserveCallback&&d.KM.stopMonitoring(j,e.substr(1),b[e].objectObserveCallback);
var f=d.K1F.getValueOnPath(null,e);if(f){var g=b[e].options;for(c=0;c<g.length;c++)d.K3.KG(f,null,g[c])}}}this.K15(a||document.body)},K16:function(a,c){a.__knot||(a.__knot={});a.__knot.dataContext=c},K1L:function(a){if(a.__knot)return a.__knot.dataContext},K17:function(a){var c;if(a.__knot&&a.__knot.options)for(c=0;c<a.__knot.options.length;c++)"dataContext"!==a.__knot.options[c].leftAP.description&&!(a.__knot.options[c].leftAP.description&&
"!"===a.__knot.options[c].leftAP.description[0])&&d.K3.KH(a.__knot.options[c].leftAP);for(c=0;c<a.children.length;c++)this.K17(a.children[c])},registerComponent:function(a,c){if(f[a])throw Error("Component '"+a+"' has been registered!");f[a]=c},getComponentObject:function(a){return a.__knot_component}}})(window);(function(j){function l(b,d,a,c){c=e.K18.parse(d+":"+c);0<c.length?(e.K3.KF(b,a,c[0]),b.__knot.options||(b.__knot.options=[]),b.__knot.options.push(c[0])):b[d]=a;return c}function h(b){var d=b.tagName.toLowerCase();"input"===d&&(d+=b.type.toLocaleLowerCase());return d}function g(b){if(b=b.options[b.selectedIndex])return b.__knot?b.__knot.dataContext:void 0}var e=j.Knot.K1M(),d={text:{"input.text":"value",textarea:"value",option:"text",span:"textContent","*":"textContent"}};
e.K3.registerAPProvider({doesSupport:function(b,f){"#"===f[0]&&(b=e.KX.Kd(e.KX.getSelectorFromAPDescription(f)),f=e.KX.getPropertyNameFromAPDescription(f));return b instanceof HTMLElement&&("select"===b.tagName.toLowerCase()&&(e.K1F.K1G(f,"options")||"selectedData"===f||e.K1F.K1G(f,"selectedData.")||"value"===f)||"class"===f||d[f])?!0:!1},getValue:function(b,f){"#"===f[0]&&(b=e.KX.Kd(e.KX.getSelectorFromAPDescription(f)),
f=e.KX.getPropertyNameFromAPDescription(f));if("select"===b.tagName.toLowerCase()&&("selectedData"===f||e.K1F.K1G(f,"selectedData.")))return"selectedData"===f?g(b):e.K1F.getValueOnPath(g(b),f.split(".").slice(1).join("."));if("select"===b.tagName.toLowerCase()&&"value"===f)return 0<=b.selectedIndex?b.options[b.selectedIndex].value:void 0;if("class"===f)return b.className;if("select"===b.tagName.toLowerCase()&&e.K1F.K1G(f,"options"))return b.options;if(d[f]){var a;
a=b;var c=f,i=h(a);a=d[c][i]?a[d[c][i]]:a[d[c]["*"]];return a}},setValue:function(b,f,a,c){"#"===f[0]&&(b=e.KX.Kd(e.KX.getSelectorFromAPDescription(f)),f=e.KX.getPropertyNameFromAPDescription(f));if("class"===f){if(a){for(var c=[],f=b.className.split(" "),a=a.split(" "),i=0;i<a.length;i++){var k=a[i];"-"===k[0]?(k=k.substr(1).trim(),0<=f.indexOf(k)&&f.splice(f.indexOf(k),1)):"+"===k[0]?(k=k.substr(1).trim(),0>f.indexOf(k)&&f.push(k)):c.push(k)}b.className=0<
c.length?c.join(" "):f.join(" ")}}else if("select"===b.tagName.toLowerCase()&&"value"===f){for(c=0;c<b.options.length;c++)if(b.options[c].value===a){b.selectedIndex=c;return}b.selectedIndex=-1}else if("select"===b.tagName.toLowerCase()&&("selectedData"===f||e.K1F.K1G(f,"selectedData.")))if("selectedData"===f)a:{for(c=0;c<b.options.length;c++)if(b.options[c].__knot&&b.options[c].__knot.dataContext===a){b.selectedIndex=c;break a}b.selectedIndex=-1}else e.K1F.setValueOnPath(g(b),f.split(".").slice(1).join("."));
else if("select"===b.tagName.toLowerCase()&&e.K1F.K1G(f,"options")){(f=c)||(f={});a||(a=[]);for(c=0;c<a.length;c++){a:{for(var i=b.options,k=a[c],j=c;j<i.length;j++)if(e.Kh.K1L(i[j])===k){i=i[j];break a}i=null}i?b.options[c].indexOf(i)!==c&&(b.options.remove(b.options[c].indexOf(i)),b.options.add(i,c)):(i=document.createElement("option"),e.Kh.K16(i,a[c]),a[c]&&(f.displayMember?l(i,"text",a[c],f.displayMember):i.text=a[c],f.valueMember?
l(i,"value",a[c],f.valueMember):i.value=a[c]),b.options.add(i,c))}for(c=b.options.length-1;c>=a.length;c--){f=b.options[c];if(f.__knot&&f.__knot.options){for(i=0;i<f.__knot.options.length;i++)e.K3.KG(f,f.__knot.dataContext,f.__knot.options[i]);delete f.__knot.dataContext}b.options.remove(c)}}else d[f]&&(c=f,"undefined"===typeof a&&(a=""),f=h(b),d[c][f]?b[d[c][f]]=a:b[d[c]["*"]]=a)},doesSupportMonitoring:function(b,d){"#"===d[0]&&(b=e.KX.Kd(e.KX.getSelectorFromAPDescription(d)),
d=e.KX.getPropertyNameFromAPDescription(d));return b&&"select"===b.tagName.toLowerCase()&&("selectedData"===d||e.K1F.K1G(d,"selectedData.")||"value"===d)},monitor:function(b,d,a){"#"===d[0]&&(b=e.KX.Kd(e.KX.getSelectorFromAPDescription(d)),d=e.KX.getPropertyNameFromAPDescription(d));"select"===b.tagName.toLowerCase()&&("selectedData"===d||e.K1F.K1G(d,"selectedData.")||"value"===d)&&b.addEventListener("change",a)},stopMonitoring:function(b,
d,a){"#"===d[0]&&(b=e.KX.Kd(e.KX.getSelectorFromAPDescription(d)),d=e.KX.getPropertyNameFromAPDescription(d));"select"===b.tagName.toLowerCase()&&("selectedData"===d||e.K1F.K1G(d,"selectedData.")||"value"===d)&&b.removeEventListener("change",a)}})})(window);(function(j){j.Knot.K1M().K3.registerAPProvider({doesSupport:function(j){return j&&j.__knot_component},getValue:function(j,h,g){return j.__knot_component.getValue(h,g)},setValue:function(j,h,g,e){j.__knot_component.setValue(h,g,e)},doesSupportMonitoring:function(j,h){return j.__knot_component.doesSupportMonitoring(h)},monitor:function(j,h,g,e){j.__knot_component.monitor(h,g,e)},stopMonitoring:function(j,h,g,e){j.__knot_component.stopMonitoring(h,g,e)}},!1,!0)})(window);(function(j){function l(){if(!b){b=!0;try{if(e){for(var a=e.map(function(a){return g.K1F.getValueOnPath(null,"$hash."+a)}),c=a.length-1;0<=c&&!a[c];c--)a.length=c;c="";0<a.length&&(c=a.join(d));j.location.hash="#"+c;g.K1F.setValueOnPath(null,"$hash.originalHash",c)}}finally{b=!1}}}function h(){if(!b){b=!0;try{var a;a=j.location.hash?j.location.hash.substr(1):"";if(e)for(var c=g.K1F.K1K(a,d),f=0;f<e.length;f++)g.K1F.setValueOnPath(null,"$hash."+e[f],c[f]);g.K1F.setValueOnPath(null,
"$hash.originalHash",a)}finally{b=!1}}}var g=j.Knot.K1M(),e,d,b=!1;g.K1F.setValueOnPath(null,"$hash",{});var f=g.K1F.getValueOnPath(null,"$hash");h();g.K1P={setHashFormat:function(a,c){if(!(a instanceof Array))throw Error("Hash fields must be an array.");if(0<=a.indexOf("hash"))throw Error("Hash field can't be 'hash'.");if(!c)throw Error("Please specify the splitter.");var b;if(e)for(b=0;b<e.length;b++)g.KM.stopMonitoring(f,e[b],l);e=a;d=c;if(e)for(b=0;b<
e.length;b++)g.KM.monitor(f,e[b],l);h()}};g.KM.monitor(f,"originalHash",function(){j.location.hash="#"+f.originalHash;h()});j.addEventListener("hashchange",function(){h()})})(window);(function(j){function l(){var d;for(d=0;d<g.length;d++)try{if(e)g[d](!1,e);else g[d](!0)}catch(b){h.Log.warning("Execute on ready callback failed.",b)}g.length=0}var h=j.Knot.K1M();delete j.Knot.K1M;j.Knot.Advanced={registerAPProvider:function(d){return h.K3.registerAPProvider(d)},registerLogger:function(d){h.Log.log=d},registerDebugger:function(d){h.Debugger=d},synchronizeItems:function(d,b,e){h.Kf.syncItems(d,b,e)},createFromTemplate:function(d,b,e){return h.Kh.createFromTemplate(d,
b,e)},setDataContext:function(d,b){h.Kh.setDataContext(d,b)},getValueOnPath:function(d,b){return h.K1F.getValueOnPath(d,b)},registerNamedGlobalSymbol:function(d,b){return h.KS.KT(d,b)},registerComponent:function(d,b){return h.Kh.registerComponent(d,b)},getComponentObject:function(d){return h.Kh.getComponentObject(d)},loadPrivatePackage:function(d){return h.K1Q.loadCBSPackage(d)}};j.Knot.getErrorStatusInformation=function(d){d||
(d=document.body);h.Kh.K17(d);var b=[];h.Kg.getErrorStatusInformation(d,b);return b};j.Knot.notifyObjectChanged=function(d,b,e,a,c){h.KM.notifyDataChanged(d,b,e,a,c)};j.Knot.monitorObject=function(d,b,e){h.KM.monitorObject(d,b,e)};j.Knot.stopMonitoringObject=function(d,b,e){h.KM.stopMonitoring(d,b,e)};j.Knot.getPropertiesChangeRecords=function(d){return h.KM.getPropertiesChangeRecords(d)};j.Knot.clearPropertiesChangeRecords=
function(d){return h.KM.clearPropertiesChangeRecords(d)};j.Knot.clear=function(d){h.Kh.clear(d)};j.Knot.getDataContext=function(d){return h.Kh.K14(d)};j.Knot.findElementBindToData=function(d,b){for(var e=0;e<d.length;e++)if(j.Knot.getDataContext(d[e])===b)return d};j.Knot.setHashFormat=function(d,b){h.K1P.setHashFormat(d,b)};j.Knot.getKnotVariant=function(d){return h.K1F.getValueOnPath(null,d)};j.Knot.setKnotVariant=function(d,
b){return h.K1F.setValueOnPath(null,d,b)};var g=[],e;j.Knot.ready=function(d){g.push(d);(j.Knot.isReady||e)&&l()};j.Knot.isReady=!1;j.addEventListener("load",function(){h.K1Q.loadGlobalScope().done(function(){h.Kh.bind();j.Knot.isReady=!0;e=null;l()},function(d){j.Knot.isReady=!1;e=d;l()})})})(window);
