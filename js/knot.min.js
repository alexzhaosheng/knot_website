(function(i){var j={KnotVariants:{},Setting:{enablePropertyHook:!0},Log:{Level:{Info:"Info",Warning:"Warning",Error:"Error"},log:function(h,g,e){i.console&&(i.console.log("["+h+"]"+g),e&&i.console.log(e))},info:function(h,g){this.log(this.Level.Info,h,g)},warning:function(h,g){this.log(this.Level.Warning,h,g)},error:function(h,g){this.log(this.Level.Error,h,g)}},Debugger:{knotChanged:function(){},knotTied:function(){},knotUntied:function(){},nodeAdded:function(){},nodeRemoved:function(){},errorStatusChanged:function(){}}};
i.Knot={K1M:function(){return j}}})(window);(function(i){var j=i.Knot.K1M(),h={"(":!0,"{":!0,"[":!0},g={")":!0,"}":!0,"]":!0},e={"(":")","{":"}","[":"]"};j.K1F={K1H:function(d){for(var c in d)return!1;return!0},trim:function(d){return d.trim?d.trim():d.replace(/^\s+|\s+$/g,"")},K1G:function(d,c){return!d?!1:d.substr(0,c.length)===c},getValueOnPath:function(d,c){if(!c&&""!==c||"*NULL"===c)return null;if("*"===c||""===c)return d;if("'"===c[0]&&"'"===c[c.length-1])return c.substr(1,c.length-2);var e=!1;"@"===c[0]&&
(e=!0,c=c.substr(1));var a;if(this.K1G(c,"__knot_global"))a=j.KS.KV(c);else{var b=d;"/"===c[0]?(b=i,c=c.substr(1)):"$"===c[0]&&(b=j.KnotVariants,c=c.substr(1));for(;0<=c.indexOf(".")&&b;)var l=j.K1F.trim(c.substr(0,c.indexOf("."))),b="*"!==l?b[l]:void 0,c=j.K1F.trim(c.substr(c.indexOf(".")+1));"*"===c?a=b:b&&(a=b[c])}if(e&&a&&"function"!==typeof a)j.Log.error("'"+c+"' is expected as a function, but it isn't.");else return a},setValueOnPath:function(d,c,e){if("*"!==
c[c.length-1]){if(this.K1G(c,"__knot_global"))throw Error("Can't set global symbol!");c&&"/"===c[0]?(d=i,c=c.substr(1)):"$"===c[0]&&(d=j.KnotVariants,c=c.substr(1));var a=c,b=c.lastIndexOf(".");0<b&&(a=c.substr(b+1),d=this.getValueOnPath(d,c.substr(0,b)));d&&(d[a]=e)}},K1I:function(){return i.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},K1J:function(d,c,e,a){var b={start:-1,end:-1};b.start=d.indexOf(e,c);if(0>b.start)return null;for(var c=0,l=b.start+
1;;){var k=d.indexOf(e,l),l=d.indexOf(a,l);if(0>l)break;if(0>k||l<k){if(0===c){b.end=l;break}else c--;l+=1}else c++,l=k+1}return 0<=b.start&&0<=b.end?b:null},K1K:function(d,c){for(var f=0,a=0,b=[],l=[],k=c.length;f<d.length;){if(h[d[f]])l.push(d[f]);else if(g[d[f]]){var m=l.pop();e[m]!==d[f]&&(j.Log.warning("Unclosed block is detected.\r"+d),l.push(m))}else 0===l.length&&(d[f]===c[0]&&d.substr(f,k)===c)&&(b.push(d.substr(a,f-a)),a=f+k);f++}0<l.length&&j.Log.warning("Unclosed block is detected.\r"+
d);f>=a&&b.push(d.substr(a,f-a));return b}}})(window);(function(i){i=i.Knot.K1M();i.Deferred=function(){this._succCallbacks=[];this._errCallbacks=[];this.isRejected=this.isFinished=!1;this.result=null};i.Deferred.prototype.resolve=function(j){this.result=j;this.isFinished=!0;this.isRejected=!1;for(var h=0;h<this._succCallbacks.length;h++)this._succCallbacks[h](j)};i.Deferred.prototype.reject=function(j){this.result=j;this.isRejected=this.isFinished=!0;for(var h=0;h<this._errCallbacks.length;h++)this._errCallbacks[h](j)};i.Deferred.prototype.done=
function(j,h){this.isFinished?this.isRejected?h(this.result):j(this.result):(this._succCallbacks.push(j),this._errCallbacks.push(h));return this}})(window);(function(i){var j=i.Knot.K1M();j.KJ={_dataInMonitoring:[],_attachedInfoOfData:[],KK:function(h){if(j.Setting.enablePropertyHook){if(!h.__knot_attachedData){if("object"!==typeof h)throw Error("Can only monitor object or array!");Object.defineProperty(h,"__knot_attachedData",{value:{},configurable:!0,writable:!1,enumerable:!1})}return h.__knot_attachedData}0>this._dataInMonitoring.indexOf(h)&&(this._dataInMonitoring.push(h),this._attachedInfoOfData[this._dataInMonitoring.indexOf(h)]=
{});return this._attachedInfoOfData[this._dataInMonitoring.indexOf(h)]},KL:function(h){j.Setting.enablePropertyHook?delete h.__knot_attachedData:(h=this._dataInMonitoring.indexOf(h),0<=h&&(delete this._dataInMonitoring[h],delete this._attachedInfoOfData[h]))}}})(window);(function(i){var j=i.Knot.K1M();j.KM={on:function(h,g,e,d){h=j.KJ.KK(h);h.K1O||(h.K1O={});g||(g="*");h.K1O[g]||(h.K1O[g]=[]);h.K1O[g].push({callback:e,attachedData:d})},off:function(h,g,e){g||(g="*");var d=j.KJ.KK(h);if(d.K1O&&d.K1O[g]){for(var c=0;c<d.K1O[g].length;c++)if(d.K1O[g][c].callback===e){d.K1O[g].splice(c,
1);break}0===d.K1O[g].length&&(delete d.K1O[g],j.K1F.K1H(d)&&j.KJ.KL(h))}},KN:function(h,g,e){h=j.KJ.KK(h);if(h.K1O&&h.K1O[g])for(var d=0;d<h.K1O[g].length;d++)if(h.K1O[g][d].callback===e)return!0;return!1},KO:function(h,g,e){h=j.KJ.KK(h);if(h.K1O&&h.K1O[g])for(var d=0;d<h.K1O[g].length;d++)if(h.K1O[g][d].callback===
e)return h.K1O[g][d].attachedData;return null},notifyDataChanged:function(h,g,e,d){var c=j.KJ.KK(h);c.changedProperties||(c.changedProperties=[]);0>c.changedProperties.indexOf(g)&&c.changedProperties.push(g);var f,a;if(c.K1O&&c.K1O[g]){f=c.K1O[g].slice(0);for(a=0;a<f.length;a++)try{f[a].callback.apply(h,[g,e,d])}catch(b){j.Log.warning("Call changed callback failed.",b)}}if(c.K1O&&c.K1O["*"]){f=c.K1O["*"].slice(0);
for(a=0;a<f.length;a++)try{f[a].callback.apply(h,[g,e,d])}catch(l){j.Log.warning("Call changed callback failed.",l)}}},getPropertiesChangeRecords:function(h){h=j.KJ.KK(h);return!h?null:h.changedProperties?h.changedProperties:[]},clearPropertiesChangeRecords:function(h){h=j.KJ.KK(h);if(!h)return null;h.changedProperties=null},KP:function(h,g){if("*"!==g){var e=j.KJ.KK(h);e.dataHookInfo||(e.dataHookInfo={hookedProperties:[],
data:{},hookRefCount:{}});if(0<=e.dataHookInfo.hookedProperties.indexOf(g))e.dataHookInfo.hookRefCount[g]++;else if(e.dataHookInfo.hookedProperties.push(g),e.dataHookInfo.data[g]=h[g],e.dataHookInfo.hookRefCount[g]=1,!(h instanceof Array&&"length"===g))try{Object.defineProperty(h,g,{set:function(c){var d=e.dataHookInfo.data[g];if(d!==c){e.dataHookInfo.data[g]=c;j.KM.notifyDataChanged(this,g,d,c)}},get:function(){return e.dataHookInfo.data[g]},configurable:!0,enumerable:!0})}catch(d){e.dataHookInfo.hookFailed=
!0,j.Log.warning("Hook property failed. property:"+g,d)}}},KQ:function(h,g){if("*"!==g){var e=j.KJ.KK(h);e.dataHookInfo&&(!(0>e.dataHookInfo.hookedProperties.indexOf(g))&&!(0<--e.dataHookInfo.hookRefCount[g]))&&(e.dataHookInfo.hookFailed||(delete h[g],h[g]=e.dataHookInfo.data[g]),e.dataHookInfo.hookedProperties.splice(e.dataHookInfo.hookedProperties.indexOf(g),1),delete e.dataHookInfo.data[g],delete e.dataHookInfo.hookRefCount[g])}},KR:function(h,
g){var e=j.KJ.KK(h);return!e.dataHookInfo?!1:0<=e.dataHookInfo.hookedProperties.indexOf(g)},monitorObject:function(h,g,e,d){var c,f=g.substr(0,g.indexOf("."));f?c=g.substr(g.indexOf(".")+1):(f=g,c=null);var a={};j.KM.on(h,g,e,a);c&&(a.childChangedCallback=function(a,d,e){j.KM.notifyDataChanged(h,f+"."+c,d,e)},a.monitorChildChangedCallback=function(b,d,e){d&&j.KM.stopMonitoring(d,c,a.childChangedCallback);e&&j.KM.monitorObject(e,c,a.childChangedCallback,
true);b=f+"."+c;e=j.K1F.getValueOnPath(e,c);d=j.K1F.getValueOnPath(d,c);j.KM.notifyDataChanged(h,b,d,e)},j.KM.on(h,f,a.monitorChildChangedCallback),h[f]&&j.KM.monitorObject(h[f],c,a.childChangedCallback,!0));d||(a.changedCallback=function(b,c,d){if(c instanceof Array){j.KM.off(c,"*",a.arrayChangedCallback);delete a.arrayChangedCallback}if(d instanceof Array){a.arrayChangedCallback=function(){j.KM.notifyDataChanged(h,g,d,d)};j.KM.on(d,
"*",a.arrayChangedCallback)}},j.KM.on(h,g,a.changedCallback,a),e=j.K1F.getValueOnPath(h,g),e instanceof Array&&a.changedCallback("*",null,e));j.KM.KP(h,f)},monitor:function(h,g,e){if(g)"/"===g[0]&&(g=g.substr(1),h=i),this.monitorObject(h,g,e);else j.KM.on(h,null,e)},stopMonitoring:function(h,g,e){if(g){"/"===g[0]&&(g=g.substr(1),h=i);var d,c=g.substr(0,g.indexOf("."));c?d=g.substr(g.indexOf(".")+1):(c=g,d=null);var f=j.KM.KO(h,g,e);
f&&(f.monitorChildChangedCallback&&j.KM.off(h,c,f.monitorChildChangedCallback),f.childChangedCallback&&h[c]&&j.KM.stopMonitoring(h[c],d,f.childChangedCallback),f.changedCallback&&j.KM.off(h,g,f.changedCallback),f.arrayChangedCallback&&j.KM.off(j.K1F.getValueOnPath(h,g),"*",f.arrayChangedCallback));j.KM.off(h,g,e);j.KM.KQ(h,c)}else j.KM.off(h,g,e)}}})(window);(function(i){function j(e){g[e]=Array.prototype[e];Array.prototype[e]=function(){var d=this.length,c=g[e].apply(this,arguments);this.__knot_attachedData&&(h.KM.notifyDataChanged(this,"*"),d!==this.length&&h.KM.notifyDataChanged(this,"length",d,this.length));return c}}var h=i.Knot.K1M(),g={};j("push");j("pop");j("unshift");j("shift");j("splice");j("sort");j("reverse");Array.prototype.notifyChanged=function(){this.__knot_attachedData&&(h.KM.notifyDataChanged(this,
"*"),h.KM.notifyDataChanged(this,"length",null,this.length))}})(window);(function(i){var j=i.Knot.K1M(),h=0,g={};j.KS={KT:function(e,d){g[e]?j.Log.error("The global symbol'"+e+"' has been registered."):g[e]=d},KU:function(e){var d="s"+h++;g[d]=e;return"__knot_global."+d},KV:function(e){var e=e.split("."),d=i;"__knot_global"===e[0]&&(d=g,e.splice(0,1));for(var c=0;c<e.length;c++){if(null===d||"undefined"===typeof d)return;d=d[e[c]]}return d},KW:function(e){return j.K1F.K1G(e,"__knot_global.")}}})(window);(function(i){function j(e){e="(function (value) {"+e+"})";try{return g.KS.KU(eval(e))}catch(d){g.Log.error("Invalid pipe function: \r\n"+e,d)}}var h=[{splitter:":",left:!1,right:!1},{splitter:"=>",left:!0,right:!1},{splitter:"<=",left:!1,right:!0},{splitter:"=",left:!0,right:!0}],g=i.Knot.K1M();g.K18={parse:function(e){for(var d=[],e=this.K1E(e),e=g.K1F.K1K(e,";"),c=0;c<e.length;c++){var f=this.K1C(e[c]);
f&&d.push(f)}return d},K1E:function(e){for(var d=g.K1F.K1J(e,0,"{","}");d;)var c=e.substr(d.start+1,d.end-d.start-1),c=j(c),e=e.substr(0,d.start)+c+e.substr(d.end+1),d=g.K1F.K1J(e,0,"{","}");return e},K1C:function(e){e=g.K1F.trim(e);if(!e)return null;for(var d,c,f=0;f<h.length;f++)if(d=g.K1F.K1K(e,h[f].splitter),2===d.length){c=h[f];break}if(!c)return g.Log.error("Invalid option:"+e),null;f=this.K1B(d[0]);d=
this.K1B(d[1]);if(null===f||null===d||f.isComposite&&d.isComposite)return g.Log.error("Invalid option:"+e),null;c.left&&(f.options||(f.options={}),f.options.readonly="1");c.right&&(d.options||(d.options={}),d.options.readonly="1");return{leftAP:f,rightAP:d}},K1B:function(e){e=g.K1F.trim(e);if("("===e[0])return this.K19(e);var d=g.K1F.K1K(e,">"),e=g.K1F.trim(d[0]);d.splice(0,1);var d=d.map(function(a){return g.K1F.trim(a)}),c=null;
if("]"===e[e.length-1]){var f=g.K1F.K1J(e,0,"[","]");f&&(c=this.K1A(e.substr(f.start+1,f.end-f.start-1)),e=e.substr(0,f.start))}return{description:e,pipes:d,options:c}},K1A:function(e){for(var d={},e=g.K1F.K1K(e,";"),c=0;c<e.length;c++){var f=e[c].split(":");2!==f.length||!f[0]||!f[1]?g.Log.error("Invalid AP option:"+e[c]):d[g.K1F.trim(f[0])]=g.K1F.trim(f[1])}return d},K19:function(e){var d=g.K1F.K1J(e,0,"(",")");
if(!d)return g.Log.error("Invalid composite option:"+e),null;for(var c=g.K1F.K1K(e.substr(d.start+1,d.end-d.start-1),"&"),f=[],a=0;a<c.length;a++){var b=this.K1B(c[a]);if(!b)return null;f.push(b)}for(d=d.end+1;">"!==e[d];){if(" "!==e[d]&&"\t"!==e[d]&&"\n"!==e[d])return g.Log.error("Invalid composite option:"+e),null;d++}d++;d=g.K1F.trim(e.substr(d));return!d?(g.Log.error("Invalid composite option:"+e),null):{isComposite:!0,childrenAPs:f,nToOnePipe:d}}}})(window);(function(i){function j(a,b,c,d){if(b&&b[c]){var f=e.K1F.getValueOnPath(null,b[c]);if(!f||"function"!==typeof f)e.Log.error("'"+b[c]+"' must be a function.");else try{f.apply(a,d)}catch(h){e.Log.error("Call AP event handler '"+b[c]+"' failed.",h)}}}function h(a,b,c,d){if(c.description&&("*"===c.description[0]||"!"===c.description[0])){var f=c.description,h=!1;if("!"===f[0]&&(f=e.K1F.trim(f.substr(1)),h=!0,"*"!==f[0]))return{target:d?a:b,ap:c};var g;e.K1F.K1G(f,"*LEFT")&&(g=f.substr(5),
d=!0);e.K1F.K1G(f,"*RIGHT")&&(g=f.substr(6),d=!1);""===g&&(g="*");g&&"."===g[0]&&(g=g.substr(1));if(g){h&&(g="!"+g);var f={},j;for(j in c)c.hasOwnProperty(j)&&(f[j]=c[j]);f.description=g;c=f}}return{target:d?a:b,ap:c}}function g(a){return a.options&&a.options.readonly?(a=a.options.readonly.toLowerCase(),"1"===a||"true"===a):!1}var e=i.Knot.K1M(),d=[],c=[],f=[];e.K3={K4:function(a,b){if(b&&"!"===b[0])return this.K5(a,b)||e.K2;for(var c=
d.length-1;0<=c;c--)if(d[c].doesSupport(a,b))return d[c];return e.K2},K5:function(a,b){for(var d=c.length-1;0<=d;d--)if(c[d].doesSupport(a,b))return c[d];return null},registerAPProvider:function(a,b,e){if(b)0>c.indexOf(a)&&c.push(a);else{0>d.indexOf(a)&&d.push(a);e&&f.push(a);for(a=0;a<f.length;a++)d.splice(d.indexOf(f[a]),1),d.push(f[a])}},unregisterAPProvider:function(a,b){b?0<=c.indexOf(a)&&c.splice(d.indexOf(a),1):(0<=d.indexOf(a)&&d.splice(d.indexOf(a),1),f.indexOf(a)&&
f.splice(f.indexOf(a),1))},K8:{},K9:function(a,b){this.KD(a,b);var c=b.provider.getValue(a,b.description,b.options);try{if(b.pipes){for(var d=0;d<b.pipes.length;d++){var f=e.K1F.getValueOnPath(a,b.pipes[d]);"function"!==typeof f&&e.Log.error("Pipe must be a function. pipe name:"+b.pipes[d]);c=f.apply(a,[c])}b.errorAPProvider&&b.errorAPProvider.setValue(a,"!"+b.description,void 0,b.options);e.Debugger.errorStatusChanged(a,b,void 0)}}catch(h){return b.errorAPProvider&&
(b.errorAPProvider.setValue(a,"!"+b.description,h,b.options),e.Debugger.errorStatusChanged(a,b,h)),this.K8}return c},KA:function(a,b,c){if(!b.KB){b.KB=!0;try{this.KD(a,b),b.provider.setValue(a,b.description,c,b.options),j(a,b.options,"@set",[b.description,c])}finally{delete b.KB}}},KC:function(a,b,c,d,f){e.Debugger.knotChanged(a,b,c,d,f)},KD:function(a,b){b.provider||(b.provider=this.K4(a,
b.description),b.errorAPProvider=this.K5(a,b.description))},monitor:function(a,b,c,d,f){this.KD(a,b);this.KD(c,d);b.provider.doesSupportMonitoring(a,b.description)&&(b.changedCallback=function(){if(!d.KB){var h=e.K3.K9(a,b);if(h!==e.K3.K8){f.leftAP===b?e.K3.KC(a,c,f,h,!0):e.K3.KC(c,a,f,h,!1);b.KB=!0;try{e.K3.KA(c,
d,h)}finally{delete b.KB}j(a,b.options,"@change",arguments)}}},b.provider.monitor(a,b.description,b.changedCallback,b.options))},stopMonitoring:function(a,b){this.KD(a,b);b.changedCallback&&b.provider.doesSupportMonitoring(a,b.description)&&(b.provider.stopMonitoring(a,b.description,b.changedCallback,b.options),delete b.changedCallback)},KE:function(a,b,c,d,f){var h,g,o,n;a.isComposite?(h=a,g=b,o=c,n=d):(h=c,g=d,o=a,n=b);for(a=0;a<h.childrenAPs.length;a++)h.childrenAPs[a].provider=
e.K3.K4(g,h.childrenAPs[a].description);n.provider=e.K3.K4(n,o.description);h.changedCallback=function(){for(var a=[],c=0;c<h.childrenAPs.length;c++){var l=e.K3.K9(g,h.childrenAPs[c]);if(l===e.K3.K8)return;a.push(l)}c=e.K1F.getValueOnPath(g,h.nToOnePipe);typeof c!=="function"&&e.Log.error("Pipe must be a function. pipe name:"+h.nToOnePipe);a=c.apply(g,[a]);e.K3.KC(b,d,f,a,n===d);e.K3.KA(n,
o,a);j(n,o,"@change",[b,d,f])};for(a=0;a<h.childrenAPs.length;a++)h.childrenAPs[a].provider.doesSupportMonitoring(g,h.childrenAPs[a].description)&&h.childrenAPs[a].provider.monitor(g,h.childrenAPs[a].description,h.changedCallback,h.childrenAPs[a].options);h.changedCallback()},KF:function(a,b,c){var d=h(a,b,c.leftAP,!0),f=h(a,b,c.rightAP,!1),a=d.target,b=f.target,d=d.ap,f=f.ap;if(d.isComposite||f.isComposite)this.KE(d,a,f,b,c);else{this.KD(a,d);this.KD(b,f);var j;
!g(d)||g(d)&&g(f)?(j=this.K9(b,f),j!==this.K8&&(this.KC(a,b,c,j,!1),this.KA(a,d,j))):(j=this.K9(a,d),j!==this.K8&&(this.KC(b,a,c,j,!1),this.KA(b,f,j)));g(f)||this.monitor(a,d,b,f,c);g(d)||this.monitor(b,f,a,d,c)}e.Debugger.knotTied(a,b,c)},KG:function(a,b,c){var d=h(a,b,c.leftAP,!0),f=h(a,b,c.rightAP,!1),a=d.target,b=f.target,d=d.ap,f=f.ap;if(d.isComposite||f.isComposite){if(d.isComposite?
(f=d,d=a):d=b,f.changedCallback)for(var g=0;g<f.childrenAPs.length;g++)f.childrenAPs[g].provider.doesSupportMonitoring(d,f.childrenAPs[g].description)&&f.childrenAPs[g].provider.stopMonitoring(d,f.childrenAPs[g].description,f.changedCallback,f.childrenAPs[g].options)}else this.stopMonitoring(a,d),delete d.changedCallback,this.stopMonitoring(b,f);delete f.changedCallback;e.Debugger.knotUntied(a,b,c)},KH:function(a){a.changedCallback&&a.changedCallback()}};e.K2={doesSupport:function(){return!0},
getValue:function(a,b){"@"===b[0]&&(b=b.substr(1));return e.K1F.getValueOnPath(a,b)},setValue:function(a,b,c){e.K1F.setValueOnPath(a,b,c)},doesSupportMonitoring:function(a){return"object"!==typeof a?!1:!0},monitor:function(a,b,c){b&&"/"===b[0]&&(a=i,b=b.substr(1));b&&"$"===b[0]&&(a=e.KnotVariants,b=b.substr(1));a&&e.KM.monitor(a,b,c)},stopMonitoring:function(a,b,c){b&&"/"===b[0]&&(a=i,b=b.substr(1));b&&"$"===b[0]&&(a=e.KnotVariants,b=b.substr(1));a&&e.KM.stopMonitoring(a,
b,c)}}})(window);(function(i){function j(a,b,c){for(var d=0,f=k.K1F.K1J(b,d,"{","}");null!==f;){d=b.substr(d,f.start-d);d=k.K1F.trim(d);c&&(d=d.split(",").filter(function(a){return a}).map(function(a){a=k.K1F.trim(a);return c.split(",").filter(function(a){return a}).map(function(b){return k.K1F.trim(b)+" "+a}).join(",")}).join(","));a[d]||(a[d]=[]);for(var e=b.substr(f.start+1,f.end-f.start-1),e=k.K1F.K1K(e,";"),h=0;h<e.length;h++){var g=k.K1F.trim(e[h]);g&&(0===g.indexOf("->")?
j(a,g.substr(2),d):(g=k.K18.K1E(g),0>a[d].indexOf(g)&&a[d].push(g)))}0===a[d].length&&delete a[d];d=f.end+1;f=k.K1F.K1J(b,d,"{","}")}}function h(a){var b=null;a.__knot&&a.__knot.cbsOptions&&(b=a.__knot.cbsOptions,delete a.__knot.cbsOptions);if(a.attributes.binding&&a.attributes.binding.value){b||(b=[]);var c=a.attributes.binding.value,c=k.K18.K1E(c),c=c.split(";").map(function(a){return k.K1F.trim(a)}),b=b.concat(c)}if(b)for(c=
0;c<b.length;c++){a.__knot||(a.__knot={options:[]});var f=k.K18.parse(b[c]);0!==f.length&&(a.__knot.options.push(f[0]),d(f[0].leftAP)&&0>m.indexOf(a)&&m.push(a))}if(a.children)for(b=0;b<a.children.length;b++)h(a.children[b])}function g(a){for(var b=0;b<a.length;b++){var c=a[b].scope,d=a[b].CBS,f=void 0,e=void 0;for(e in d)if(k.K1F.K1G(e,"/")){for(var f=e,g=d,l=[],j=0;j<g[f].length;j++)l=l.concat(k.K18.parse(g[f][j]));k.Kh.addGlobalObjectOption(f,l)}else{var i;
try{i=c.querySelectorAll(e)}catch(m){k.Log.warning("Invalid selector:"+e,m);continue}0===i.length&&k.Log.warning("There is no element selected with selector:"+e);for(f=0;f<i.length;f++)g=d[e].slice(0),i[f].__knot||(i[f].__knot={options:[]}),i[f].__knot.cbsOptions&&(g=i[f].__knot.cbsOptions.concat(g)),i[f].__knot.cbsOptions=g}a[b].scope===document?h(document.body):h(a[b].scope)}}function e(a,b){var c=[],d;b||(d={scope:document,CBS:{},isGlobalScope:!0},c.push(d));for(var f=0;f<a.length;f++){var e;var g=
a[f];if(!g||""===g)e=null;else{for(var h=void 0;0<=(h=g.indexOf("/*"));){e=g.indexOf("*/",h);if(0>e)throw Error("Can't find close mark for comment.");g=g.substr(0,h)+g.substr(e+2)}g=g.split("\n");h="";for(e=0;e<g.length;e++)for(var l=g[e].split("\r"),i=0;i<l.length;i++)"//"!==k.K1F.trim(l[i]).substr(0,2)&&(h+=l[i]);e=h}e=k.K1F.trim(e);if(k.K1F.K1G(e,"$private")){g={CBS:{}};e=e.substr(8);h=g;h.HTML||(h.HTML="");for(var l=0,i="",m=k.K1F.K1J(e,l,"<<{{","}}>>");null!==
m;)i+=e.substr(l,m.start-l),h.HTML+=e.substr(m.start+4,m.end-m.start-4),l=m.end+4,m=k.K1F.K1J(e,l,"<<{{","}}>>");l<e.length&&(i+=e.substr(l));e=i;try{g.scope=document.createElement("DIV"),g.scope.innerHTML=g.HTML,delete g.HTML}catch(p){k.Log.error("Load private scope HTML error.",p);continue}j(g.CBS,e);c.push(g)}else b?k.Log.error("Can't load CBS. It must be a private CBS!"):j(d.CBS,e)}return c}function d(a){return"foreach"===a.description||"content"===a.description}function c(a){for(var a=
a.querySelectorAll("*[knot-template], *[knot-template-id]"),b=0;b<a.length;b++){var c;c=a[b].getAttribute("knot-template-id")?a[b].getAttribute("knot-template-id"):"__knot_template_"+s++;k.Kh.Kk[c]=a[b];a[b].__knot_template_id=c}return Array.prototype.slice.apply(a,[0])}function f(a,b){var c;if(!b.options||!b.options.template&&!b.options.templateSelector){if(c=a.children[0],1<a.children.length&&k.Log.warning("More than one child is found within '"+k.KX.KY(a)+
'", only the first will be taken as template and the reset will be removed.'),!c){k.Log.error("Can't find template within '"+k.KX.KY(a)+"'");return}}else{if(b.options.templateSelector)return;var d=b.options.template;if("@"===d[0])return;c=k.Kh.Kk[d];if(!c){k.Log.error("Can't find template with selector'"+d+"'");return}}c.__knot_template_id||k.Log.error("The template node must be marked with 'knot-template'. Current node:'"+k.KX.KY(a)+
"'");b.options||(b.options={});b.options.template=c.__knot_template_id}function a(a){var b=[],e;for(e=0;e<a.length;e++)b=b.concat(c(a[e].scope));for(e=0;e<m.length;e++)for(var g=0;g<m[e].__knot.options.length;g++)d(m[e].__knot.options[g].leftAP)&&f(m[e],m[e].__knot.options[g].leftAP),d(m[e].__knot.options[g].rightAP)&&f(m[e],m[e].__knot.options[g].rightAP);for(e=m.length=0;e<b.length;e++)delete b[e].__knot_template_id,b[e].removeAttribute("knot-template"),b[e].removeAttribute("knot-template-id"),
b[e].parentNode.removeChild(b[e]);for(e=0;e<a.length;e++)a[e].isGlobalScope||0<a[e].scope.children.length&&k.Log.warning("Useless HTML is detected in private scope.")}function b(a){p.push(a);var b=new k.Deferred,c=k.K1F.K1I();c.onreadystatechange=function(){4===c.readyState&&(200===c.status?b.resolve(c.responseText):b.reject(Error("Load CBS script error. url:"+a+" message:"+c.statusText)))};c.open("GET",a,!0);c.send();return b}function l(){for(var a=new k.Deferred,c=i.document.querySelectorAll('script[type="text/cbs"]'),
d=[],e=0,f=function(){if(0===e)try{a.resolve(d)}catch(b){k.Log.error("Initialize failed.  message:"+b.message,b)}},g=0;g<c.length;g++)c[g].src?0<=p.indexOf(c[g].src)||(e++,function(){var a=c[g].src;b(a).done(function(a){d.push(a);e--;f()},function(b){e--;k.Log.error("Load CBS script error. url:"+a,b);f(b)})}()):d.push(c[g].textContent);0===e&&a.resolve(d);return a}var k=i.Knot.K1M(),m=[],s=0,p=[];k.K1Q={loadGlobalScope:function(){var b=new k.Deferred;l().done(function(c){try{var d=
e(c,!1);g(d);a(d);b.resolve()}catch(f){k.Log.error("Initialize failed.  message:"+f.message,f),b.reject(f)}},function(a){b.reject(a)});return b},loadCBSPackage:function(c){var d=new k.Deferred;0<=p.indexOf(c)?d.resolve():b(c).done(function(b){try{var f=e([b],!0);g(f);a(f)}catch(h){k.Log.error("Parse CBS package failed. package file:"+c,h),d.reject(h)}d.resolve()},function(a){d.reject(a)});return d},test:{parseCBSInDocument:l,getScopes:e,Ks:g,Kv:a}}})(window);(function(i){function j(a){c.Kh.K15(a);a.parentNode.removeChild(a);c.Debugger.nodeRemoved(a)}function h(a,b,d){try{var e=c.K1F.getValueOnPath(d,a);if(!e)return c.Log.error("Can't find template selector:"+a),null;var f=e.apply(b,[d,b]);f||c.Log.error("The template selector returns NULL. template selector:"+a);return f}catch(g){return c.Log.error("Call template selector failed. template selector:"+a,g),null}}function g(a,b,d){if(!d||!d.template&&!d.templateSelector)c.Log.error("No valid template is specified for 'content' access point. current node:"+
c.KX.KY(a));else{var e=function(e,f){if(d&&d[f]){var g=c.K1F.getValueOnPath(b,d[f]);try{g.apply(a,[e,b])}catch(h){c.Log.warning("Raise "+f+" event failed.",h)}}},f=d.template,g=!1;d.templateSelector&&(null===b||"undefined"===typeof b||(f=h(d.templateSelector,a,b)),g=!0);var i=a.childNodes[0];if(i){if(!(i.__knot&&i.__knot.dataContext===b))if(null===b||"undefined"===typeof b)j(i),e(i,"@removed");else if(g||c.Kh.K10(f)?(j(i),i=null,f&&(i=c.Kh.createFromTemplate(f,
b,a)),i&&(a.appendChild(i),c.Kh.hasDataContext(i)||c.Kh.setDataContext(i,b),c.Debugger.nodeAdded(i),e(i,"@added"))):c.Kh.setDataContext(i,b),i)i.__knot||(i.__knot={}),i.__knot.dataContext=b}else if(!(null===b||"undefined"===typeof b))if(f=c.Kh.createFromTemplate(f,b,a))a.appendChild(f),c.Kh.hasDataContext(f)||c.Kh.setDataContext(f,b),e(f,"@added"),c.Debugger.nodeAdded(f)}}function e(a,b,d,e,f,g){b||(b=[]);for(var i=0;i<
b.length;i++){var o;a:{for(var n=i;n<a.children.length;n++)if(a.children[n].__knot&&a.children[n].__knot.dataContext===b[i]){o=a.children[n];break a}o=null}if(o){if(Array.prototype.indexOf.call(a.children,o)!==i){a.removeChild(o);var n=a,q=i;n.children.length===q?n.appendChild(o):n.insertBefore(o,n.children[q])}}else{if(e&&(d=h(e,a,b[i]),!d))continue;if(n=c.Kh.createFromTemplate(d,b[i],a)){o=a;var q=n,r=i;o.children.length===r?o.appendChild(q):o.insertBefore(q,o.children[r]);c.Kh.hasDataContext(n)||
c.Kh.setDataContext(n,b[i]);c.Debugger.nodeAdded(n);f&&f.apply(a,[n,b[i]])}}}for(i=a.children.length-1;i>=b.length;i--)j(a.children[i]),g&&g.apply(a,[a.children[i]])}function d(a,b,d){!d||!d.template&&!d.templateSelector?c.Log.error("No valid template is specified for 'foreach' access point. current node:"+c.KX.KY(a)):e(a,b,d.template,d.templateSelector,c.K1F.getValueOnPath(a,d["@added"]),c.K1F.getValueOnPath(a,d["@removed"]))}var c=i.Knot.K1M(),
f=[];f["input.value"]="change";f["textarea.value"]="change";f["input.checked"]="change";f["select.selectedIndex"]="change";f["select.value"]="change";f["*.clientWith"]="resize";f["*.clientHeight"]="resize";f["*.scrollTop"]="scroll";f["*.scrollLeft"]="scroll";c.KX={KY:function(a){var b=a.tagName;a.id?b+="[#"+a.id+"]":a.className&&(b+="["+a.className.split(" ").filter(function(a){return a.trim()!==""}).map(function(a){return"."+a}).join(" ")+"]");return b},getSelectorFromAPDescription:function(a){a=
c.K1F.K1K(a,".");return c.K1F.trim(a[0])},getPropertyNameFromAPDescription:function(a){a=c.K1F.K1K(a,".");if(1<a.length)return a.slice(1).join(".")},getPropertyFromElement:function(a,b){return!a?void 0:c.K1F.getValueOnPath(a,b)},Kd:function(a){if(0<a.indexOf("(")){var b=c.K1F.K1J(a,0,"(",")");if(b)try{var d=a.substr(b.start+1,b.end-b.start-1);return document.querySelector(d)}catch(e){c.Log.error("Query selector failed.",e)}else c.Log.error("Unknown selector:"+
a)}else return document.querySelector(a)}};c.Kf={doesSupport:function(a,b){return"#"===b[0]?!0:"!"===b[0]?!1:a instanceof HTMLElement},getValue:function(a,b){if("@"!==b[0]&&("#"===b[0]&&(a=c.KX.Kd(c.KX.getSelectorFromAPDescription(b)),b=c.KX.getPropertyNameFromAPDescription(b)),!c.K1F.K1G(b,"content")&&!c.K1F.K1G(b,"foreach")))return c.KX.getPropertyFromElement(a,b)},setValue:function(a,b,e,f){"@"===b[0]?"function"!==
typeof e?c.Log.error("Event listener must be a function!"):a&&a.addEventListener(b.substr(1),function(b){e.apply(a.__knot.dataContext,[b,a])}):("#"===b[0]&&(a=c.KX.Kd(c.KX.getSelectorFromAPDescription(b)),b=c.KX.getPropertyNameFromAPDescription(b)),c.K1F.K1G(b,"content"))?g(a,e,f):c.K1F.K1G(b,"foreach")?d(a,e,f):("undefined"===typeof e&&(e=""),c.K1F.setValueOnPath(a,b,e))},doesSupportMonitoring:function(a,b){"#"===b[0]&&(a=c.KX.Kd(c.KX.getSelectorFromAPDescription(b)),
b=c.KX.getPropertyNameFromAPDescription(b));if(!a)return!1;var d=a.tagName.toLowerCase()+"."+b;return f[d]||f["*."+b]},monitor:function(a,b,d,e){"#"===b[0]&&(a=c.KX.Kd(c.KX.getSelectorFromAPDescription(b)),b=c.KX.getPropertyNameFromAPDescription(b));for(var b=a.tagName.toLowerCase()+"."+b,b=f[b].split(","),g=0;g<b.length;g++)a.addEventListener(b[g],d);("input"===a.tagName.toLowerCase()||"textarea"===a.tagName.toLowerCase())&&(e&&e.immediately&&("1"===
e.immediately||"true"===e.immediately.toLowerCase()))&&a.addEventListener("keyup",d)},stopMonitoring:function(a,b,d,e){"#"===b[0]&&(a=c.KX.Kd(c.KX.getSelectorFromAPDescription(b)),b=c.KX.getPropertyNameFromAPDescription(b));for(var b=a.tagName.toLowerCase()+"."+b,b=f[b].split(","),g=0;g<b.length;g++)a.removeEventListener(b[g],d);("input"===a.tagName.toLowerCase()||"textarea"===a.tagName.toLowerCase())&&(e&&e.immediately&&("1"===e.immediately||"true"===e.immediately.toLowerCase()))&&
a.removeEventListener("keyup",d)},syncItems:e};c.K3.registerAPProvider(c.Kf);c.Kg={doesSupport:function(a,b){return b&&("!"===b[0]&&(b=b.substr(1)),"#"===b[0])?!0:a instanceof HTMLElement},getValue:function(a,b){if("!"===b[0]&&(b=b.substr(1),"#"===b[0]&&(a=c.KX.Kd(c.KX.getSelectorFromAPDescription(b)),b=c.KX.getPropertyNameFromAPDescription(b)),a))return!a.__knot_errorStatusInfo||!a.__knot_errorStatusInfo[b]?null:a.__knot_errorStatusInfo[b].currentStatus},
setValue:function(a,b,d,e){if("!"===b[0]&&(b=b.substr(1),"#"===b[0]&&(a=c.KX.Kd(c.KX.getSelectorFromAPDescription(b)),b=c.KX.getPropertyNameFromAPDescription(b)),a&&(d||a.__knot_errorStatusInfo&&a.__knot_errorStatusInfo[b]&&a.__knot_errorStatusInfo[b].K1O)))if(a.__knot_errorStatusInfo||(a.__knot_errorStatusInfo={}),a.__knot_errorStatusInfo[b]||(a.__knot_errorStatusInfo[b]={}),a.__knot_errorStatusInfo[b].currentStatus!==d){a.__knot_errorStatusInfo[b].currentStatus=
d;if(a.__knot_errorStatusInfo[b].K1O)for(var f=a.__knot_errorStatusInfo[b].K1O,g=0;g<f.length;g++)try{f[g].apply(a,[b,d])}catch(h){c.Log.warning("Call error status changed callback failed.",h)}if(e&&e["@error"])if(f=c.K1F.getValueOnPath(null,e["@error"]),!f||"function"!==typeof f)c.Log.error("'"+e["@error"]+"' must be a function.");else try{f.apply(a,[b,d])}catch(j){c.Log.error("Call AP error event handler '"+e["@error"]+"' failed.",j)}}},doesSupportMonitoring:function(a,
b){return"!"===b[0]},monitor:function(a,b,d){if("!"===b[0]){b=b.substr(1);if("#"===b[0]){var e=c.KX.getSelectorFromAPDescription(b),a=c.KX.Kd(e);if(!a){c.Log.warning("Failed to bind to error status, target is not found.  target selector:"+e);return}b=c.KX.getPropertyNameFromAPDescription(b)}a.__knot_errorStatusInfo||(a.__knot_errorStatusInfo={});a.__knot_errorStatusInfo[b]||(a.__knot_errorStatusInfo[b]={});a.__knot_errorStatusInfo[b].K1O||(a.__knot_errorStatusInfo[b].K1O=
[]);a.__knot_errorStatusInfo[b].K1O.push(d)}},stopMonitoring:function(a,b,d){"#"===b[1]&&(a=c.KX.Kd(c.KX.getSelectorFromAPDescription(b.substr(1))),b=c.KX.getPropertyNameFromAPDescription(b.substr(1)));a.__knot_errorStatusInfo&&(a.__knot_errorStatusInfo[b]&&a.__knot_errorStatusInfo[b].K1O)&&(d=a.__knot_errorStatusInfo[b].K1O.indexOf(d),0<=d&&a.__knot_errorStatusInfo[b].K1O.splice(d,1))},getErrorStatusInformation:function(a,
b){if(a.__knot_errorStatusInfo)for(var c in a.__knot_errorStatusInfo)a.__knot_errorStatusInfo[c]&&a.__knot_errorStatusInfo[c].currentStatus&&b.push({node:a,accessPointName:c,error:a.__knot_errorStatusInfo[c].currentStatus});for(c=0;c<a.children.length;c++)this.getErrorStatusInformation(a.children[c],b)}};c.K3.registerAPProvider(c.Kg,!0)})(window);(function(i){function j(a){if(!a)return null;for(var b=0;b<a.length;b++)if("dataContext"===a[b].leftAP.description)return a[b];return null}function h(a,b){a.__knot?b.__knot=JSON.parse(JSON.stringify(a.__knot)):delete b.__knot;for(var c=0;c<a.children.length;c++)h(a.children[c],b.children[c])}function g(){var a,b;for(b in c){(function(){var e=b;c[e].objectObserveCallback=function(b,f,g){b=c[e].options;if(f)for(a=0;a<b.length;a++)d.K3.KG(f,null,b[a]);for(a=0;a<b.length;a++)d.K3.KF(g,
null,b[a])};d.KM.monitor(i,b.substr(1),c[e].objectObserveCallback)})();var e=d.K1F.getValueOnPath(null,b);if(e){var f=c[b].options;for(a=0;a<f.length;a++)d.K3.KF(e,null,f[a])}}}function e(a,b){a.__knot_component||(f[b]?a.__knot_component=f[b](a,b):d.Log.error("Component '"+b+"' is not registered."))}var d=i.Knot.K1M(),c={},f={};d.Kh={Kk:{},addGlobalObjectOption:function(a,b){c[a]||(c[a]={options:[]});c[a].options=c[a].options.concat(b)},
K10:function(a){return"function"===typeof a||!this.Kk[a]},createFromTemplate:function(a,b,c){if(this.K10(a)){var e,f;f="function"===typeof a?a:d.K1F.getValueOnPath(b,a);"function"===typeof f?e=f.apply(c,[b]):d.Log.error("Unknown template:"+a);return e}d.Kh.Kk[a]?(a=d.Kh.Kk[a],b=a.cloneNode(!0),h(a,b),a=b):(d.Log.error("Failed find template. id:"+a),a=void 0);return a},hasDataContext:function(a){return a.__knot&&"dataContext"in
a.__knot},setDataContext:function(a,b){this.K13(a,b,!0);a.__knot?a.__knot.dataContext=b:a.__knot={dataContext:b};a.__knot.isFixedDataContext=!0},K11:function(a){if(a.__knot&&a.__knot.options)for(var b=0;b<a.__knot.options.length;b++)"dataContext"!==a.__knot.options[b].leftAP.description&&d.K3.KG(a,a.__knot.dataContext,a.__knot.options[b])},K12:function(a){if(a.__knot&&a.__knot.options)for(var b=0;b<a.__knot.options.length;b++)"dataContext"!==a.__knot.options[b].leftAP.description&&
d.K3.KF(a,a.__knot.dataContext,a.__knot.options[b])},K13:function(a,b,c){if(a instanceof HTMLElement||a instanceof HTMLBodyElement){var f;a.getAttribute("knot-component")&&e(a,a.getAttribute("knot-component"));if(a.__knot){if(c||!a.__knot.isFixedDataContext){f=j(a.__knot.options);c=b;if(f){c=d.K3.K9(b,f.rightAP);if(c===d.K3.K8){d.Log.error("Get context data failed. node:"+d.KX.KY(a));return}if(f.hasTiedUpKnot&&
c===a.__knot.dataContext)return;(f.data||"/"===f.rightAP.description[0])&&f.changedCallback&&f.rightAP.provider.stopMonitoring(f.data,f.rightAP.description,f.changedCallback,f.rightAP.options);f.data=b;f.data||"/"===f.rightAP.description[0]?(f.changedCallback=function(){d.Kh.K13(a,b)},f.rightAP.provider.monitor(f.data,f.rightAP.description,f.changedCallback,f.rightAP.options)):f.changedCallback=null;f.hasTiedUpKnot=!0}this.K11(a);d.K3.KC(a,
b,f,c,!1);for(f=0;f<a.childNodes.length;f++)this.K13(a.childNodes[f],c);a.__knot.dataContext=c;this.K12(a)}}else for(f=0;f<a.childNodes.length;f++)this.K13(a.childNodes[f],b)}},K14:function(a){for(;a;){if(a.__knot)return a.__knot.dataContext;a=a.parentNode}},K15:function(a){if(a.__knot){var b=j(a.__knot.options);b&&((b.data||"/"===b.rightAP.description[0])&&b.changedCallback&&b.rightAP.provider.stopMonitoring(b.data,b.rightAP.description,
b.changedCallback,b.rightAP.options),b.data=null,b.changedCallback=null,b.hasTiedUpKnot=!1);this.K11(a);delete a.__knot.dataContext}a.__knot_component&&(a.__knot_component.dispose&&a.__knot_component.dispose(),delete a.__knot_component);for(b=0;b<a.childNodes.length;b++)this.K15(a.childNodes[b])},bind:function(){g();this.K13(document.body,null)},clear:function(a){if(!a){var b,f;for(f in c){c[f].objectObserveCallback&&d.KM.stopMonitoring(i,f.substr(1),c[f].objectObserveCallback);
var e=d.K1F.getValueOnPath(null,f);if(e){var g=c[f].options;for(b=0;b<g.length;b++)d.K3.KG(e,null,g[b])}}}this.K15(a||document.body)},K16:function(a,b){a.__knot||(a.__knot={});a.__knot.dataContext=b},K1L:function(a){if(a.__knot)return a.__knot.dataContext},K17:function(a){var b;if(a.__knot&&a.__knot.options)for(b=0;b<a.__knot.options.length;b++)"dataContext"!==a.__knot.options[b].leftAP.description&&!(a.__knot.options[b].leftAP.description&&
"!"===a.__knot.options[b].leftAP.description[0])&&d.K3.KH(a.__knot.options[b].leftAP);for(b=0;b<a.children.length;b++)this.K17(a.children[b])},registerComponent:function(a,b){if(f[a])throw Error("Component '"+a+"' has been registered!");f[a]=b},getComponentObject:function(a){return a.__knot_component}}})(window);(function(i){function j(c,d,a,b){b=e.K18.parse(d+":"+b);0<b.length?(e.K3.KF(c,a,b[0]),c.__knot.options||(c.__knot.options=[]),c.__knot.options.push(b[0])):c[d]=a;return b}function h(c){var d=c.tagName.toLowerCase();"input"===d&&(d+=c.type.toLocaleLowerCase());return d}function g(c){if(c=c.options[c.selectedIndex])return c.__knot?c.__knot.dataContext:void 0}var e=i.Knot.K1M(),d={text:{"input.text":"value",textarea:"value",option:"text",span:"innerText","*":"textContent"}};
e.K3.registerAPProvider({doesSupport:function(c,f){"#"===f[0]&&(c=e.KX.Kd(e.KX.getSelectorFromAPDescription(f)),f=e.KX.getPropertyNameFromAPDescription(f));return c instanceof HTMLElement&&("select"===c.tagName.toLowerCase()&&(e.K1F.K1G(f,"options")||"selectedData"===f||e.K1F.K1G(f,"selectedData.")||"value"===f)||"class"===f||d[f])?!0:!1},getValue:function(c,f){"#"===f[0]&&(c=e.KX.Kd(e.KX.getSelectorFromAPDescription(f)),
f=e.KX.getPropertyNameFromAPDescription(f));if("select"===c.tagName.toLowerCase()&&("selectedData"===f||e.K1F.K1G(f,"selectedData.")))return"selectedData"===f?g(c):e.K1F.getValueOnPath(g(c),f.split(".").slice(1).join("."));if("select"===c.tagName.toLowerCase()&&"value"===f)return 0<=c.selectedIndex?c.options[c.selectedIndex].value:void 0;if("class"===f)return c.className;if("select"===c.tagName.toLowerCase()&&e.K1F.K1G(f,"options"))return c.options;if(d[f]){var a;
a=c;var b=f,j=h(a);a=d[b][j]?a[d[b][j]]:a[d[b]["*"]];return a}},setValue:function(c,f,a,b){"#"===f[0]&&(c=e.KX.Kd(e.KX.getSelectorFromAPDescription(f)),f=e.KX.getPropertyNameFromAPDescription(f));if("class"===f){if(a){for(var b=[],f=c.className.split(" "),a=a.split(" "),i=0;i<a.length;i++){var k=a[i];"-"===k[0]?(k=k.substr(1).trim(),0<=f.indexOf(k)&&f.splice(f.indexOf(k),1)):"+"===k[0]?(k=k.substr(1).trim(),0>f.indexOf(k)&&f.push(k)):b.push(k)}c.className=0<
b.length?b.join(" "):f.join(" ")}}else if("select"===c.tagName.toLowerCase()&&"value"===f){for(b=0;b<c.options.length;b++)if(c.options[b].value===a){c.selectedIndex=b;return}c.selectedIndex=-1}else if("select"===c.tagName.toLowerCase()&&("selectedData"===f||e.K1F.K1G(f,"selectedData.")))if("selectedData"===f)a:{for(b=0;b<c.options.length;b++)if(c.options[b].__knot&&c.options[b].__knot.dataContext===a){c.selectedIndex=b;break a}c.selectedIndex=-1}else e.K1F.setValueOnPath(g(c),f.split(".").slice(1).join("."));
else if("select"===c.tagName.toLowerCase()&&e.K1F.K1G(f,"options")){(f=b)||(f={});a||(a=[]);for(b=0;b<a.length;b++){a:{for(var i=c.options,k=a[b],m=b;m<i.length;m++)if(e.Kh.K1L(i[m])===k){i=i[m];break a}i=null}i?c.options[b].indexOf(i)!==b&&(c.options.remove(c.options[b].indexOf(i)),c.options.add(i,b)):(i=document.createElement("option"),e.Kh.K16(i,a[b]),a[b]&&(f.displayMember?j(i,"text",a[b],f.displayMember):i.text=a[b],f.valueMember?
j(i,"value",a[b],f.valueMember):i.value=a[b]),c.options.add(i,b))}for(b=c.options.length-1;b>=a.length;b--){f=c.options[b];if(f.__knot&&f.__knot.options){for(i=0;i<f.__knot.options.length;i++)e.K3.KG(f,f.__knot.dataContext,f.__knot.options[i]);delete f.__knot.dataContext}c.options.remove(b)}}else d[f]&&(b=f,"undefined"===typeof a&&(a=""),f=h(c),d[b][f]?c[d[b][f]]=a:c[d[b]["*"]]=a)},doesSupportMonitoring:function(c,d){"#"===d[0]&&(c=e.KX.Kd(e.KX.getSelectorFromAPDescription(d)),
d=e.KX.getPropertyNameFromAPDescription(d));return c&&"select"===c.tagName.toLowerCase()&&("selectedData"===d||e.K1F.K1G(d,"selectedData.")||"value"===d)},monitor:function(c,d,a){"#"===d[0]&&(c=e.KX.Kd(e.KX.getSelectorFromAPDescription(d)),d=e.KX.getPropertyNameFromAPDescription(d));"select"===c.tagName.toLowerCase()&&("selectedData"===d||e.K1F.K1G(d,"selectedData.")||"value"===d)&&c.addEventListener("change",a)},stopMonitoring:function(c,
d,a){"#"===d[0]&&(c=e.KX.Kd(e.KX.getSelectorFromAPDescription(d)),d=e.KX.getPropertyNameFromAPDescription(d));"select"===c.tagName.toLowerCase()&&("selectedData"===d||e.K1F.K1G(d,"selectedData.")||"value"===d)&&c.removeEventListener("change",a)}})})(window);(function(i){i.Knot.K1M().K3.registerAPProvider({doesSupport:function(i){return i&&i.__knot_component},getValue:function(i,h,g){return i.__knot_component.getValue(h,g)},setValue:function(i,h,g,e){i.__knot_component.setValue(h,g,e)},doesSupportMonitoring:function(i,h){return i.__knot_component.doesSupportMonitoring(h)},monitor:function(i,h,g,e){i.__knot_component.monitor(h,g,e)},stopMonitoring:function(i,h,g,e){i.__knot_component.stopMonitoring(h,g,e)}},!1,!0)})(window);(function(i){function j(){if(!c){c=!0;try{if(e){for(var a=e.map(function(a){return g.K1F.getValueOnPath(null,"$hash."+a)}),b=a.length-1;0<=b&&!a[b];b--)a.length=b;b="";0<a.length&&(b=a.join(d));i.location.hash="#"+b;g.K1F.setValueOnPath(null,"$hash.originalHash",b)}}finally{c=!1}}}function h(){if(!c){c=!0;try{var a;a=i.location.hash?i.location.hash.substr(1):"";if(e)for(var b=g.K1F.K1K(a,d),f=0;f<e.length;f++)g.K1F.setValueOnPath(null,"$hash."+e[f],b[f]);g.K1F.setValueOnPath(null,
"$hash.originalHash",a)}finally{c=!1}}}var g=i.Knot.K1M(),e,d,c=!1;g.K1F.setValueOnPath(null,"$hash",{});var f=g.K1F.getValueOnPath(null,"$hash");h();g.K1P={setHashFormat:function(a,b){if(!(a instanceof Array))throw Error("Hash fields must be an array.");if(0<=a.indexOf("hash"))throw Error("Hash field can't be 'hash'.");if(!b)throw Error("Please specify the splitter.");var c;if(e)for(c=0;c<e.length;c++)g.KM.stopMonitoring(f,e[c],j);e=a;d=b;if(e)for(c=0;c<
e.length;c++)g.KM.monitor(f,e[c],j);h()}};g.KM.monitor(f,"originalHash",function(){j();h()});i.addEventListener("hashchange",function(){h()})})(window);(function(i){function j(){var d;for(d=0;d<g.length;d++)try{if(e)g[d](!1,e);else g[d](!0)}catch(c){h.Log.warning("Execute on ready callback failed.",c)}g.length=0}var h=i.Knot.K1M();delete i.Knot.K1M;i.Knot.Advanced={registerAPProvider:function(d){return h.K3.registerAPProvider(d)},registerLogger:function(d){h.Log.log=d},registerDebugger:function(d){h.Debugger=d},synchronizeItems:function(d,c,e,a,b){h.Kf.syncItems(d,c,e,a,b)},createFromTemplate:function(d,
c,e){return h.Kh.createFromTemplate(d,c,e)},setDataContext:function(d,c){h.Kh.setDataContext(d,c)},getValueOnPath:function(d,c){return h.K1F.getValueOnPath(d,c)},registerNamedGlobalSymbol:function(d,c){return h.KS.KT(d,c)},registerComponent:function(d,c){return h.Kh.registerComponent(d,c)},getComponentObject:function(d){return h.Kh.getComponentObject(d)}};i.Knot.getErrorStatusInformation=function(d){d||(d=document.body);
h.Kh.K17(d);var c=[];h.Kg.getErrorStatusInformation(d,c);return c};i.Knot.notifyObjectChanged=function(d,c,e,a){h.KM.notifyDataChanged(d,c,e,a)};i.Knot.monitorObject=function(d,c,e){h.KM.monitorObject(d,c,e)};i.Knot.stopMonitoringObject=function(d,c,e){h.KM.stopMonitoring(d,c,e)};i.Knot.getPropertiesChangeRecords=function(d){return h.KM.getPropertiesChangeRecords(d)};i.Knot.clearPropertiesChangeRecords=function(d){return h.KM.clearPropertiesChangeRecords(d)};
i.Knot.clear=function(d){h.Kh.clear(d)};i.Knot.getDataContext=function(d){return h.Kh.K14(d)};i.Knot.findElementBindToData=function(d,c){for(var e=0;e<d.length;e++)if(i.Knot.getDataContext(d[e])===c)return d};i.Knot.setHashFormat=function(d,c){h.K1P.setHashFormat(d,c)};i.Knot.getKnotVariant=function(d){return h.K1F.getValueOnPath(null,d)};i.Knot.setKnotVariant=function(d,c){return h.K1F.setValueOnPath(null,d,c)};var g=[],e;i.Knot.ready=
function(d){g.push(d);(i.Knot.isReady||e)&&j()};i.Knot.isReady=!1;i.addEventListener("load",function(){h.K1Q.loadGlobalScope().done(function(){h.Kh.bind();i.Knot.isReady=!0;e=null;j()},function(d){i.Knot.isReady=!1;e=d;j()})})})(window);
