(function(j){var k={KnotVariants:{},Setting:{enablePropertyHook:!0},Log:{Level:{Info:"Info",Warning:"Warning",Error:"Error"},log:function(g,h,f){j.console&&(j.console.log("["+g+"]"+h),f&&j.console.log(f))},info:function(g,h){this.log(this.Level.Info,g,h)},warning:function(g,h){this.log(this.Level.Warning,g,h)},error:function(g,h){this.log(this.Level.Error,g,h)}},Debugger:{knotChanged:function(){},knotTied:function(){},knotUntied:function(){},nodeAdded:function(){},nodeRemoved:function(){},errorStatusChanged:function(){}}};
j.Knot={K1M:function(){return k}}})(window);(function(j){var k=j.Knot.K1M(),g={"(":!0,"{":!0,"[":!0},h={")":!0,"}":!0,"]":!0},f={"(":")","{":"}","[":"]"};k.K1F={K1H:function(e){for(var c in e)return!1;return!0},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},K1G:function(e,c){return!e?!1:e.substr(0,c.length)===c},getValueOnPath:function(e,c){if(!c&&""!==c||"*NULL"===c)return null;if("*"===c||""===c)return e;if("'"===c[0]&&"'"===c[c.length-1])return c.substr(1,c.length-2);var d=!1;"@"===c[0]&&
(d=!0,c=c.substr(1));var a;if(this.K1G(c,"__knot_global"))a=k.KS.KV(c);else{var b=e;"/"===c[0]?(b=j,c=c.substr(1)):"$"===c[0]&&(b=k.KnotVariants,c=c.substr(1));for(;0<=c.indexOf(".")&&b;)var i=k.K1F.trim(c.substr(0,c.indexOf("."))),b="*"!==i?b[i]:void 0,c=k.K1F.trim(c.substr(c.indexOf(".")+1));"*"===c?a=b:b&&(a=b[c])}if(d&&a&&"function"!==typeof a)k.Log.error("'"+c+"' is expected as a function, but it isn't.");else return a},setValueOnPath:function(e,c,d){if("*"!==
c[c.length-1]){if(this.K1G(c,"__knot_global"))throw Error("Can't set global symbol!");c&&"/"===c[0]?(e=j,c=c.substr(1)):"$"===c[0]&&(e=k.KnotVariants,c=c.substr(1));var a=c,b=c.lastIndexOf(".");0<b&&(a=c.substr(b+1),e=this.getValueOnPath(e,c.substr(0,b)));e&&(e[a]=d)}},K1I:function(){return j.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},K1J:function(e,c,d,a){var b={start:-1,end:-1};b.start=e.indexOf(d,c);if(0>b.start)return null;for(var c=0,i=b.start+
1;;){var f=e.indexOf(d,i),i=e.indexOf(a,i);if(0>i)break;if(0>f||i<f){if(0===c){b.end=i;break}else c--;i+=1}else c++,i=f+1}return 0<=b.start&&0<=b.end?b:null},K1K:function(e,c){for(var d=0,a=0,b=[],i=[],l=c.length;d<e.length;){if(g[e[d]])i.push(e[d]);else if(h[e[d]]){var m=i.pop();f[m]!==e[d]&&(k.Log.warning("Unclosed block is detected.\r"+e),i.push(m))}else 0===i.length&&(e[d]===c[0]&&e.substr(d,l)===c)&&(b.push(e.substr(a,d-a)),a=d+l);d++}0<i.length&&k.Log.warning("Unclosed block is detected.\r"+
e);d>=a&&b.push(e.substr(a,d-a));return b}}})(window);(function(j){j=j.Knot.K1M();j.Deferred=function(){this._succCallbacks=[];this._errCallbacks=[];this.isRejected=this.isFinished=!1;this.result=null};j.Deferred.prototype.resolve=function(k){this.result=k;this.isFinished=!0;this.isRejected=!1;for(var g=0;g<this._succCallbacks.length;g++)this._succCallbacks[g](k)};j.Deferred.prototype.reject=function(k){this.result=k;this.isRejected=this.isFinished=!0;for(var g=0;g<this._errCallbacks.length;g++)this._errCallbacks[g](k)};j.Deferred.prototype.done=
function(k,g){this.isFinished?this.isRejected?g(this.result):k(this.result):(this._succCallbacks.push(k),this._errCallbacks.push(g));return this}})(window);(function(j){var k=j.Knot.K1M();k.KJ={_dataInMonitoring:[],_attachedInfoOfData:[],KK:function(g){if(k.Setting.enablePropertyHook){if(!g.__knot_attachedData){if("object"!==typeof g)throw Error("Can only monitor object or array!");Object.defineProperty(g,"__knot_attachedData",{value:{},configurable:!0,writable:!1,enumerable:!1})}return g.__knot_attachedData}0>this._dataInMonitoring.indexOf(g)&&(this._dataInMonitoring.push(g),this._attachedInfoOfData[this._dataInMonitoring.indexOf(g)]=
{});return this._attachedInfoOfData[this._dataInMonitoring.indexOf(g)]},KL:function(g){k.Setting.enablePropertyHook?delete g.__knot_attachedData:(g=this._dataInMonitoring.indexOf(g),0<=g&&(delete this._dataInMonitoring[g],delete this._attachedInfoOfData[g]))}}})(window);(function(j){var k=j.Knot.K1M();k.KM={on:function(g,h,f,e){g=k.KJ.KK(g);g.K1O||(g.K1O={});h||(h="*");g.K1O[h]||(g.K1O[h]=[]);g.K1O[h].push({callback:f,attachedData:e})},off:function(g,h,f){h||(h="*");var e=k.KJ.KK(g);if(e.K1O&&e.K1O[h]){for(var c=0;c<e.K1O[h].length;c++)if(e.K1O[h][c].callback===f){e.K1O[h].splice(c,
1);break}0===e.K1O[h].length&&(delete e.K1O[h],k.K1F.K1H(e)&&k.KJ.KL(g))}},KN:function(g,h,f){g=k.KJ.KK(g);if(g.K1O&&g.K1O[h])for(var e=0;e<g.K1O[h].length;e++)if(g.K1O[h][e].callback===f)return!0;return!1},KO:function(g,h,f){g=k.KJ.KK(g);if(g.K1O&&g.K1O[h])for(var e=0;e<g.K1O[h].length;e++)if(g.K1O[h][e].callback===
f)return g.K1O[h][e].attachedData;return null},notifyDataChanged:function(g,h,f,e,c){var d=k.KJ.KK(g);d.changedProperties||(d.changedProperties=[]);0>d.changedProperties.indexOf(h)&&d.changedProperties.push(h);var a,b;if(d.K1O&&d.K1O[h]){a=d.K1O[h].slice(0);for(b=0;b<a.length;b++)try{a[b].callback.apply(g,[h,f,e,c])}catch(i){k.Log.warning("Call changed callback failed.",i)}}if(d.K1O&&d.K1O["*"]&&"*"!==
h){a=d.K1O["*"].slice(0);for(b=0;b<a.length;b++)try{a[b].callback.apply(g,[h,f,e,c])}catch(l){k.Log.warning("Call changed callback failed.",l)}}},getPropertiesChangeRecords:function(g){g=k.KJ.KK(g);return!g?null:g.changedProperties?g.changedProperties:[]},clearPropertiesChangeRecords:function(g){g=k.KJ.KK(g);if(!g)return null;g.changedProperties=null},KP:function(g,h){if("*"!==h){var f=k.KJ.KK(g);f.dataHookInfo||
(f.dataHookInfo={hookedProperties:[],data:{},hookRefCount:{}});if(0<=f.dataHookInfo.hookedProperties.indexOf(h))f.dataHookInfo.hookRefCount[h]++;else if(f.dataHookInfo.hookedProperties.push(h),f.dataHookInfo.data[h]=g[h],f.dataHookInfo.hookRefCount[h]=1,!(g instanceof Array&&"length"===h))try{Object.defineProperty(g,h,{set:function(c){var d=f.dataHookInfo.data[h];if(d!==c){f.dataHookInfo.data[h]=c;k.KM.notifyDataChanged(this,h,d,c)}},get:function(){return f.dataHookInfo.data[h]},configurable:!0,
enumerable:!0})}catch(e){f.dataHookInfo.hookFailed=!0,k.Log.warning("Hook property failed. property:"+h,e)}}},KQ:function(g,h){if("*"!==h){var f=k.KJ.KK(g);f.dataHookInfo&&(!(0>f.dataHookInfo.hookedProperties.indexOf(h))&&!(0<--f.dataHookInfo.hookRefCount[h]))&&(f.dataHookInfo.hookFailed||(delete g[h],g[h]=f.dataHookInfo.data[h]),f.dataHookInfo.hookedProperties.splice(f.dataHookInfo.hookedProperties.indexOf(h),1),delete f.dataHookInfo.data[h],delete f.dataHookInfo.hookRefCount[h])}},
KR:function(g,h){var f=k.KJ.KK(g);return!f.dataHookInfo?!1:0<=f.dataHookInfo.hookedProperties.indexOf(h)},monitorObject:function(g,h,f,e){var c,d=h.substr(0,h.indexOf("."));d?c=h.substr(h.indexOf(".")+1):(d=h,c=null);var a={};k.KM.on(g,h,f,a);c&&(a.childChangedCallback=function(b,a,e){k.KM.notifyDataChanged(g,d+"."+c,a,e)},a.monitorChildChangedCallback=function(b,i,e){i&&k.KM.stopMonitoring(i,c,a.childChangedCallback);e&&k.KM.monitorObject(e,
c,a.childChangedCallback,true);b=d+"."+c;e=k.K1F.getValueOnPath(e,c);i=k.K1F.getValueOnPath(i,c);k.KM.notifyDataChanged(g,b,i,e)},k.KM.on(g,d,a.monitorChildChangedCallback),g[d]&&k.KM.monitorObject(g[d],c,a.childChangedCallback,!0));e||(a.changedCallback=function(b,i,d){if(i instanceof Array){k.KM.off(i,"*",a.arrayChangedCallback);delete a.arrayChangedCallback}if(d instanceof Array){a.arrayChangedCallback=function(){k.KM.notifyDataChanged(g,
h,d,d)};k.KM.on(d,"*",a.arrayChangedCallback)}},k.KM.on(g,h,a.changedCallback,a),f=k.K1F.getValueOnPath(g,h),f instanceof Array&&a.changedCallback("*",null,f));k.KM.KP(g,d)},monitor:function(g,h,f){if(h)"/"===h[0]&&(h=h.substr(1),g=j),this.monitorObject(g,h,f);else k.KM.on(g,null,f)},stopMonitoring:function(g,h,f){if(h){"/"===h[0]&&(h=h.substr(1),g=j);var e,c=h.substr(0,h.indexOf("."));c?e=h.substr(h.indexOf(".")+1):(c=h,e=null);var d=k.KM.KO(g,
h,f);d&&(d.monitorChildChangedCallback&&k.KM.off(g,c,d.monitorChildChangedCallback),d.childChangedCallback&&g[c]&&k.KM.stopMonitoring(g[c],e,d.childChangedCallback),d.changedCallback&&k.KM.off(g,h,d.changedCallback),d.arrayChangedCallback&&k.KM.off(k.K1F.getValueOnPath(g,h),"*",d.arrayChangedCallback));k.KM.off(g,h,f);k.KM.KQ(g,c)}else k.KM.off(g,h,f)}}})(window);(function(j){function k(f){h[f]=Array.prototype[f];Array.prototype[f]=function(){var e=this.length,c=h[f].apply(this,arguments);this.__knot_attachedData&&(g.KM.notifyDataChanged(this,"*"),e!==this.length&&g.KM.notifyDataChanged(this,"length",e,this.length));return c}}var g=j.Knot.K1M(),h={};k("sort");k("reverse");Array.prototype.notifyChanged=function(f,e){if(this.__knot_attachedData){var c=null;f&&e&&(c={removed:f,added:e});g.KM.notifyDataChanged(this,"*",
c);g.KM.notifyDataChanged(this,"length",null,this.length)}};h.push=Array.prototype.push;Array.prototype.push=function(){var f=this.length,e=h.push.apply(this,arguments);if(this.__knot_attachedData){for(var c=[],d=0;d<arguments.length;d++)c.push(f+d);g.KM.notifyDataChanged(this,"*",null,null,{removed:[],added:c});g.KM.notifyDataChanged(this,"length",f,this.length)}return e};h.unshift=Array.prototype.unshift;Array.prototype.unshift=function(){var f=this.length,e=h.unshift.apply(this,
arguments);if(this.__knot_attachedData){for(var c=[],d=0;d<arguments.length;d++)c.push(d);g.KM.notifyDataChanged(this,"*",null,null,{removed:[],added:c});g.KM.notifyDataChanged(this,"length",f,this.length)}return e};h.pop=Array.prototype.pop;Array.prototype.pop=function(){var f=this.length,e=h.pop.apply(this,arguments);this.__knot_attachedData&&(g.KM.notifyDataChanged(this,"*",null,null,{removed:[f-1],added:[]}),g.KM.notifyDataChanged(this,"length",f,this.length));
return e};h.shift=Array.prototype.shift;Array.prototype.shift=function(){var f=this.length,e=h.shift.apply(this,arguments);this.__knot_attachedData&&(g.KM.notifyDataChanged(this,"*",null,null,{removed:[0],added:[]}),g.KM.notifyDataChanged(this,"length",f,this.length));return e};h.splice=Array.prototype.splice;Array.prototype.splice=function(f,e){var c=this.length,d=h.splice.apply(this,arguments);if(this.__knot_attachedData){for(var a=[],b=[],i=f;i<f+e;i++)b.push(i);for(i=f;i<f+
arguments.length-2;i++)a.push(i);g.KM.notifyDataChanged(this,"*",null,null,{removed:b,added:a});g.KM.notifyDataChanged(this,"length",c,this.length)}return d}})(window);(function(j){var k=j.Knot.K1M(),g=0,h={};k.KS={KT:function(f,e){h[f]?k.Log.error("The global symbol'"+f+"' has been registered."):h[f]=e},KU:function(f){var e="s"+g++;h[e]=f;return"__knot_global."+e},KV:function(f){var f=f.split("."),e=j;"__knot_global"===f[0]&&(e=h,f.splice(0,1));for(var c=0;c<f.length;c++){if(null===e||"undefined"===typeof e)return;e=e[f[c]]}return e},KW:function(f){return k.K1F.K1G(f,"__knot_global.")}}})(window);(function(j){function k(f){f="(function (value) {"+f+"})";try{return h.KS.KU(eval(f))}catch(e){h.Log.error("Invalid pipe function: \r\n"+f,e)}}var g=[{splitter:":",left:!1,right:!1},{splitter:"=>",left:!0,right:!1},{splitter:"<=",left:!1,right:!0},{splitter:"=",left:!0,right:!0}],h=j.Knot.K1M();h.K18={parse:function(f){for(var e=[],f=this.K1E(f),f=h.K1F.K1K(f,";"),c=0;c<f.length;c++){var d=this.K1C(f[c]);
d&&e.push(d)}return e},K1E:function(f){for(var e=h.K1F.K1J(f,0,"{","}");e;)var c=f.substr(e.start+1,e.end-e.start-1),c=k(c),f=f.substr(0,e.start)+c+f.substr(e.end+1),e=h.K1F.K1J(f,0,"{","}");return f},K1C:function(f){f=h.K1F.trim(f);if(!f)return null;for(var e,c,d=0;d<g.length;d++)if(e=h.K1F.K1K(f,g[d].splitter),2===e.length){c=g[d];break}if(!c)return h.Log.error("Invalid option:"+f),null;d=this.K1B(e[0]);e=
this.K1B(e[1]);if(null===d||null===e||d.isComposite&&e.isComposite)return h.Log.error("Invalid option:"+f),null;c.left&&(d.options||(d.options={}),d.options.readonly="1");c.right&&(e.options||(e.options={}),e.options.readonly="1");return{leftAP:d,rightAP:e}},K1B:function(f){f=h.K1F.trim(f);if("("===f[0])return this.K19(f);var e=h.K1F.K1K(f,">"),f=h.K1F.trim(e[0]);e.splice(0,1);var e=e.map(function(a){return h.K1F.trim(a)}),c=null;
if("]"===f[f.length-1]){var d=h.K1F.K1J(f,0,"[","]");d&&(c=this.K1A(f.substr(d.start+1,d.end-d.start-1)),f=f.substr(0,d.start))}return{description:f,pipes:e,options:c}},K1A:function(f){for(var e={},f=h.K1F.K1K(f,";"),c=0;c<f.length;c++){var d=f[c].split(":");2!==d.length||!d[0]||!d[1]?h.Log.error("Invalid AP option:"+f[c]):e[h.K1F.trim(d[0])]=h.K1F.trim(d[1])}return e},K19:function(f){var e=h.K1F.K1J(f,0,"(",")");
if(!e)return h.Log.error("Invalid composite option:"+f),null;for(var c=h.K1F.K1K(f.substr(e.start+1,e.end-e.start-1),"&"),d=[],a=0;a<c.length;a++){var b=this.K1B(c[a]);if(!b)return null;d.push(b)}for(e=e.end+1;">"!==f[e];){if(" "!==f[e]&&"\t"!==f[e]&&"\n"!==f[e])return h.Log.error("Invalid composite option:"+f),null;e++}e++;e=h.K1F.trim(f.substr(e));return!e?(h.Log.error("Invalid composite option:"+f),null):{isComposite:!0,childrenAPs:d,nToOnePipe:e}}}})(window);(function(j){function k(a,b,i,d){if(b&&b[i]){var e=f.K1F.getValueOnPath(null,b[i]);if(!e||"function"!==typeof e)f.Log.error("'"+b[i]+"' must be a function.");else try{e.apply(a,d)}catch(c){f.Log.error("Call AP event handler '"+b[i]+"' failed.",c)}}}function g(a,b,i,d){if(i.description&&("*"===i.description[0]||"!"===i.description[0])){var e=i.description,c=!1;if("!"===e[0]&&(e=f.K1F.trim(e.substr(1)),c=!0,"*"!==e[0]))return{target:d?a:b,ap:i};var g;f.K1F.K1G(e,"*LEFT")&&(g=e.substr(5),
d=!0);f.K1F.K1G(e,"*RIGHT")&&(g=e.substr(6),d=!1);""===g&&(g="*");g&&"."===g[0]&&(g=g.substr(1));if(g){c&&(g="!"+g);var e={},h;for(h in i)i.hasOwnProperty(h)&&(e[h]=i[h]);e.description=g;i=e}}return{target:d?a:b,ap:i}}function h(a){return a.options&&a.options.readonly?(a=a.options.readonly.toLowerCase(),"1"===a||"true"===a):!1}var f=j.Knot.K1M(),e=[],c=[],d=[];f.K3={K4:function(a,b){if(b&&"!"===b[0])return this.K5(a,b)||f.K2;for(var i=
e.length-1;0<=i;i--)if(e[i].doesSupport(a,b))return e[i];return f.K2},K5:function(a,b){for(var i=c.length-1;0<=i;i--)if(c[i].doesSupport(a,b))return c[i];return null},registerAPProvider:function(a,b,i){if(b)0>c.indexOf(a)&&c.push(a);else{0>e.indexOf(a)&&e.push(a);i&&d.push(a);for(a=0;a<d.length;a++)e.splice(e.indexOf(d[a]),1),e.push(d[a])}},unregisterAPProvider:function(a,b){b?0<=c.indexOf(a)&&c.splice(e.indexOf(a),1):(0<=e.indexOf(a)&&e.splice(e.indexOf(a),1),d.indexOf(a)&&
d.splice(d.indexOf(a),1))},K8:{},K9:function(a,b){this.KD(a,b);var i=b.provider.getValue(a,b.description,b.options);try{if(b.pipes){for(var d=0;d<b.pipes.length;d++){var e=f.K1F.getValueOnPath(a,b.pipes[d]);"function"!==typeof e&&f.Log.error("Pipe must be a function. pipe name:"+b.pipes[d]);i=e.apply(a,[i])}b.errorAPProvider&&b.errorAPProvider.setValue(a,"!"+b.description,void 0,b.options);f.Debugger.errorStatusChanged(a,b,void 0)}}catch(c){return b.errorAPProvider&&
(b.errorAPProvider.setValue(a,"!"+b.description,c,b.options),f.Debugger.errorStatusChanged(a,b,c)),this.K8}return i},KA:function(a,b,i,d){if(!b.KB){b.KB=!0;try{this.KD(a,b),b.provider.setValue(a,b.description,i,b.options,d),k(a,b.options,"@set",[b.description,i])}finally{delete b.KB}}},KC:function(a,b,i,d,e){f.Debugger.knotChanged(a,b,i,d,e)},KD:function(a,b){b.provider||(b.provider=this.K4(a,
b.description),b.errorAPProvider=this.K5(a,b.description))},monitor:function(a,b,i,d,e){this.KD(a,b);this.KD(i,d);b.provider.doesSupportMonitoring(a,b.description)&&(b.changedCallback=function(c,g,h,o){if(!d.KB){var p=f.K3.K9(a,b);if(p!==f.K3.K8){e.leftAP===b?f.K3.KC(a,i,e,p,!0):f.K3.KC(i,a,e,p,!1);b.KB=!0;try{f.K3.KA(i,
d,p,o)}finally{delete b.KB}k(a,b.options,"@change",arguments)}}},b.provider.monitor(a,b.description,b.changedCallback,b.options))},stopMonitoring:function(a,b){this.KD(a,b);b.changedCallback&&b.provider.doesSupportMonitoring(a,b.description)&&(b.provider.stopMonitoring(a,b.description,b.changedCallback,b.options),delete b.changedCallback)},KE:function(a,b,i,d,e){var c,g,h,o;a.isComposite?(c=a,g=b,h=i,o=d):(c=i,g=d,h=a,o=b);for(a=0;a<c.childrenAPs.length;a++)c.childrenAPs[a].provider=
f.K3.K4(g,c.childrenAPs[a].description);o.provider=f.K3.K4(o,h.description);c.changedCallback=function(a,i,j,s){i=[];for(a=0;a<c.childrenAPs.length;a++){j=f.K3.K9(g,c.childrenAPs[a]);if(j===f.K3.K8)return;i.push(j)}a=f.K1F.getValueOnPath(g,c.nToOnePipe);typeof a!=="function"&&f.Log.error("Pipe must be a function. pipe name:"+c.nToOnePipe);a=a.apply(g,[i]);f.K3.KC(b,d,e,a,o===d);f.K3.KA(o,
h,a,s);k(o,h,"@change",[b,d,e])};for(a=0;a<c.childrenAPs.length;a++)c.childrenAPs[a].provider.doesSupportMonitoring(g,c.childrenAPs[a].description)&&c.childrenAPs[a].provider.monitor(g,c.childrenAPs[a].description,c.changedCallback,c.childrenAPs[a].options);c.changedCallback()},KF:function(a,b,i){var d=g(a,b,i.leftAP,!0),e=g(a,b,i.rightAP,!1),a=d.target,b=e.target,d=d.ap,e=e.ap;if(d.isComposite||e.isComposite)this.KE(d,a,e,b,i);else{this.KD(a,d);this.KD(b,e);
var c;!h(d)||h(d)&&h(e)?(c=this.K9(b,e),c!==this.K8&&(this.KC(a,b,i,c,!1),this.KA(a,d,c))):(c=this.K9(a,d),c!==this.K8&&(this.KC(b,a,i,c,!1),this.KA(b,e,c)));h(e)||this.monitor(a,d,b,e,i);h(d)||this.monitor(b,e,a,d,i)}f.Debugger.knotTied(a,b,i)},KG:function(a,b,d){var e=g(a,b,d.leftAP,!0),c=g(a,b,d.rightAP,!1),a=e.target,b=c.target,e=e.ap,c=c.ap;if(e.isComposite||c.isComposite){if(e.isComposite?
(c=e,e=a):e=b,c.changedCallback)for(var h=0;h<c.childrenAPs.length;h++)c.childrenAPs[h].provider.doesSupportMonitoring(e,c.childrenAPs[h].description)&&c.childrenAPs[h].provider.stopMonitoring(e,c.childrenAPs[h].description,c.changedCallback,c.childrenAPs[h].options)}else this.stopMonitoring(a,e),delete e.changedCallback,this.stopMonitoring(b,c);delete c.changedCallback;f.Debugger.knotUntied(a,b,d)},KH:function(a){a.changedCallback&&a.changedCallback()}};f.K2={doesSupport:function(){return!0},
getValue:function(a,b){"@"===b[0]&&(b=b.substr(1));return f.K1F.getValueOnPath(a,b)},setValue:function(a,b,d){f.K1F.setValueOnPath(a,b,d)},doesSupportMonitoring:function(a){return"object"!==typeof a?!1:!0},monitor:function(a,b,d){b&&"/"===b[0]&&(a=j,b=b.substr(1));b&&"$"===b[0]&&(a=f.KnotVariants,b=b.substr(1));a&&f.KM.monitor(a,b,d)},stopMonitoring:function(a,b,d){b&&"/"===b[0]&&(a=j,b=b.substr(1));b&&"$"===b[0]&&(a=f.KnotVariants,b=b.substr(1));a&&f.KM.stopMonitoring(a,
b,d)}}})(window);(function(j){function k(b,a,d){for(var i=0,e=l.K1F.K1J(a,i,"{","}");null!==e;){i=a.substr(i,e.start-i);i=l.K1F.trim(i);d&&(i=i.split(",").filter(function(b){return b}).map(function(b){b=l.K1F.trim(b);return d.split(",").filter(function(b){return b}).map(function(a){return l.K1F.trim(a)+" "+b}).join(",")}).join(","));b[i]||(b[i]=[]);for(var c=a.substr(e.start+1,e.end-e.start-1),c=l.K1F.K1K(c,";"),f=0;f<c.length;f++){var g=l.K1F.trim(c[f]);g&&(0===g.indexOf("->")?
k(b,g.substr(2),i):(g=l.K18.K1E(g),0>b[i].indexOf(g)&&b[i].push(g)))}0===b[i].length&&delete b[i];i=e.end+1;e=l.K1F.K1J(a,i,"{","}")}}function g(b){var a=null;b.__knot&&b.__knot.cbsOptions&&(a=b.__knot.cbsOptions,delete b.__knot.cbsOptions);if(b.attributes.binding&&b.attributes.binding.value){a||(a=[]);var d=b.attributes.binding.value,d=l.K18.K1E(d),d=d.split(";").map(function(b){return l.K1F.trim(b)}),a=a.concat(d)}if(a)for(d=
0;d<a.length;d++){b.__knot||(b.__knot={options:[]});var i=l.K18.parse(a[d]);0!==i.length&&(b.__knot.options.push(i[0]),e(i[0].leftAP)&&0>m.indexOf(b)&&m.push(b))}if(b.children)for(a=0;a<b.children.length;a++)g(b.children[a])}function h(b){for(var a=0;a<b.length;a++){var d=b[a].scope,i=b[a].CBS,e=void 0,c=void 0;for(c in i)if(l.K1F.K1G(c,"/")){for(var e=c,f=i,h=[],k=0;k<f[e].length;k++)h=h.concat(l.K18.parse(f[e][k]));l.Kh.addGlobalObjectOption(e,h)}else{var j;
try{j=d.querySelectorAll(c)}catch(m){l.Log.warning("Invalid selector:"+c,m);continue}0===j.length&&l.Log.warning("There is no element selected with selector:"+c);for(e=0;e<j.length;e++)f=i[c].slice(0),j[e].__knot||(j[e].__knot={options:[]}),j[e].__knot.cbsOptions&&(f=j[e].__knot.cbsOptions.concat(f)),j[e].__knot.cbsOptions=f}b[a].scope===document?g(document.body):g(b[a].scope)}}function f(b,a){var d=[],i;a||(i={scope:document,CBS:{},isGlobalScope:!0},d.push(i));for(var e=0;e<b.length;e++){var c;var f=
b[e];if(!f||""===f)c=null;else{for(var g=void 0;0<=(g=f.indexOf("/*"));){c=f.indexOf("*/",g);if(0>c)throw Error("Can't find close mark for comment.");f=f.substr(0,g)+f.substr(c+2)}f=f.split("\n");g="";for(c=0;c<f.length;c++)for(var h=f[c].split("\r"),j=0;j<h.length;j++)"//"!==l.K1F.trim(h[j]).substr(0,2)&&(g+=h[j]);c=g}c=l.K1F.trim(c);if(l.K1F.K1G(c,"$private")){f={CBS:{}};c=c.substr(8);g=f;g.HTML||(g.HTML="");for(var h=0,j="",m=l.K1F.K1J(c,h,"<<{{","}}>>");null!==
m;)j+=c.substr(h,m.start-h),g.HTML+=c.substr(m.start+4,m.end-m.start-4),h=m.end+4,m=l.K1F.K1J(c,h,"<<{{","}}>>");h<c.length&&(j+=c.substr(h));c=j;try{f.scope=document.createElement("DIV"),f.scope.innerHTML=f.HTML,delete f.HTML}catch(q){l.Log.error("Load private scope HTML error.",q);continue}k(f.CBS,c);d.push(f)}else a?l.Log.error("Can't load CBS. It must be a private CBS!"):k(i.CBS,c)}return d}function e(b){return"foreach"===b.description||"content"===b.description}function c(b){for(var b=
b.querySelectorAll("*[knot-template], *[knot-template-id]"),a=0;a<b.length;a++){var d;d=b[a].getAttribute("knot-template-id")?b[a].getAttribute("knot-template-id"):"__knot_template_"+q++;l.Kh.Kk[d]=b[a];b[a].__knot_template_id=d}return Array.prototype.slice.apply(b,[0])}function d(b,a){var d;if(!a.options||!a.options.template&&!a.options.templateSelector){if(d=b.children[0],1<b.children.length&&l.Log.warning("More than one child is found within '"+l.KX.KY(b)+
'", only the first will be taken as template and the reset will be removed.'),!d){l.Log.error("Can't find template within '"+l.KX.KY(b)+"'");return}}else{if(a.options.templateSelector)return;var i=a.options.template;if("@"===i[0])return;d=l.Kh.Kk[i];if(!d){l.Log.error("Can't find template with selector'"+i+"'");return}}d.__knot_template_id||l.Log.error("The template node must be marked with 'knot-template'. Current node:'"+l.KX.KY(b)+
"'");a.options||(a.options={});a.options.template=d.__knot_template_id}function a(b){var a=[],i;for(i=0;i<b.length;i++)a=a.concat(c(b[i].scope));for(i=0;i<m.length;i++)for(var f=0;f<m[i].__knot.options.length;f++)e(m[i].__knot.options[f].leftAP)&&d(m[i],m[i].__knot.options[f].leftAP),e(m[i].__knot.options[f].rightAP)&&d(m[i],m[i].__knot.options[f].rightAP);for(i=m.length=0;i<a.length;i++)delete a[i].__knot_template_id,a[i].removeAttribute("knot-template"),a[i].removeAttribute("knot-template-id"),
a[i].parentNode.removeChild(a[i]);for(i=0;i<b.length;i++)b[i].isGlobalScope||0<b[i].scope.children.length&&l.Log.warning("Useless HTML is detected in private scope.")}function b(b){r.push(b);var a=new l.Deferred,i=l.K1F.K1I();i.onreadystatechange=function(){4===i.readyState&&(200===i.status?a.resolve(i.responseText):a.reject(Error("Load CBS script error. url:"+b+" message:"+i.statusText)))};i.open("GET",b,!0);i.send();return a}function i(){for(var a=new l.Deferred,i=j.document.querySelectorAll('script[type="text/cbs"]'),
d=[],c=0,e=function(){if(0===c)try{a.resolve(d)}catch(b){l.Log.error("Initialize failed.  message:"+b.message,b)}},f=0;f<i.length;f++)i[f].src?0<=r.indexOf(i[f].src)||(c++,function(){var a=i[f].src;b(a).done(function(b){d.push(b);c--;e()},function(b){c--;l.Log.error("Load CBS script error. url:"+a,b);e(b)})}()):d.push(i[f].textContent);0===c&&a.resolve(d);return a}var l=j.Knot.K1M(),m=[],q=0,r=[];l.K1Q={loadGlobalScope:function(){var b=new l.Deferred;i().done(function(i){try{var d=
f(i,!1);h(d);a(d);b.resolve()}catch(c){l.Log.error("Initialize failed.  message:"+c.message,c),b.reject(c)}},function(a){b.reject(a)});return b},loadCBSPackage:function(i){var d=new l.Deferred;0<=r.indexOf(i)?d.resolve():b(i).done(function(b){try{var c=f([b],!0);h(c);a(c)}catch(e){l.Log.error("Parse CBS package failed. package file:"+i,e),d.reject(e)}d.resolve()},function(b){d.reject(b)});return d},test:{parseCBSInDocument:i,getScopes:f,Ks:h,Kv:a}}})(window);(function(j){function k(b){d.Kh.K15(b);b.parentNode.removeChild(b);d.Debugger.nodeRemoved(b)}function g(b,a,d){b.children.length===d?b.appendChild(a):b.insertBefore(a,b.children[d])}function h(b,a,c,e){try{var f=d.K1F.getValueOnPath(c,b);if(!f)return d.Log.error("Can't find template selector:"+b),null;var g=f.apply(a,[c,a]);!g&&!e&&d.Log.error("The template selector returns NULL. template selector:"+b);return g}catch(h){return d.Log.error("Call template selector failed. template selector:"+
b,h),null}}function f(b,a,c){if(!c||!c.template&&!c.templateSelector)d.Log.error("No valid template is specified for 'content' access point. current node:"+d.KX.KY(b));else{var e=function(e,f){if(c&&c[f]){var g=d.K1F.getValueOnPath(a,c[f]);try{g.apply(b,[e,a])}catch(h){d.Log.warning("Raise "+f+" event failed.",h)}}},f=c.template,g=!1;c.templateSelector&&(null===a||"undefined"===typeof a||(f=h(c.templateSelector,b,a,!0)),g=!0);var j=b.childNodes[0];if(j){if(!(j.__knot&&
j.__knot.dataContext===a))if(null===a||"undefined"===typeof a||null===f||"undefined"===typeof f)k(j),e(j,"@removed");else if(g||d.Kh.K10(f)?(k(j),j=null,f&&(j=d.Kh.createFromTemplate(f,a,b)),j&&(b.appendChild(j),d.Kh.hasDataContext(j)||d.Kh.setDataContext(j,a),d.Debugger.nodeAdded(j),e(j,"@added"))):d.Kh.setDataContext(j,a),j)j.__knot||(j.__knot={}),j.__knot.dataContext=a}else if(!(null===a||"undefined"===typeof a||null===
f||"undefined"===typeof f))if(f=d.Kh.createFromTemplate(f,a,b))b.appendChild(f),d.Kh.hasDataContext(f)||d.Kh.setDataContext(f,a),e(f,"@added"),d.Debugger.nodeAdded(f)}}function e(b,a,c,e,f,j,n){a||(a=[]);if(n){c=n.removed||[];e=n.added||[];for(n=c.length-1;0<=n;n--)b.removeChild(b.children[c[n]]);for(n=0;n<e.length;n++)g(b,a[e[n]],e[n])}else{for(n=0;n<a.length;n++){var o;a:{for(o=n;o<b.children.length;o++)if(b.children[o].__knot&&b.children[o].__knot.dataContext===
a[n]){o=b.children[o];break a}o=null}if(o)Array.prototype.indexOf.call(b.children,o)!==n&&(b.removeChild(o),g(b,o,n));else{if(e&&(c=h(e,b,a[n]),!c))continue;if(o=d.Kh.createFromTemplate(c,a[n],b))g(b,o,n),d.Kh.hasDataContext(o)||d.Kh.setDataContext(o,a[n]),d.Debugger.nodeAdded(o),f&&f.apply(b,[o,a[n]])}}for(n=b.children.length-1;n>=a.length;n--)k(b.children[n]),j&&j.apply(b,[b.children[n]])}}function c(b,a,c,f){!c||!c.template&&!c.templateSelector?d.Log.error("No valid template is specified for 'foreach' access point. current node:"+
d.KX.KY(b)):e(b,a,c.template,c.templateSelector,d.K1F.getValueOnPath(b,c["@added"]),d.K1F.getValueOnPath(b,c["@removed"]),f)}var d=j.Knot.K1M(),a=[];a["input.value"]="change";a["textarea.value"]="change";a["input.checked"]="change";a["select.selectedIndex"]="change";a["select.value"]="change";a["*.clientWith"]="resize";a["*.clientHeight"]="resize";a["*.scrollTop"]="scroll";a["*.scrollLeft"]="scroll";d.KX={KY:function(b){var a=
b.tagName;b.id?a+="[#"+b.id+"]":b.className&&(a+="["+b.className.split(" ").filter(function(b){return b.trim()!==""}).map(function(b){return"."+b}).join(" ")+"]");return a},getSelectorFromAPDescription:function(b){b=d.K1F.K1K(b,".");return d.K1F.trim(b[0])},getPropertyNameFromAPDescription:function(b){b=d.K1F.K1K(b,".");if(1<b.length)return b.slice(1).join(".")},getPropertyFromElement:function(b,a){return!b?void 0:d.K1F.getValueOnPath(b,a)},Kd:function(b){if(0<
b.indexOf("(")){var a=d.K1F.K1J(b,0,"(",")");if(a)try{var c=b.substr(a.start+1,a.end-a.start-1);return document.querySelector(c)}catch(e){d.Log.error("Query selector failed.",e)}else d.Log.error("Unknown selector:"+b)}else return document.querySelector(b)}};d.Kf={doesSupport:function(b,a){return"#"===a[0]?!0:"!"===a[0]?!1:b instanceof HTMLElement},getValue:function(b,a){if("@"!==a[0]&&("#"===a[0]&&(b=d.KX.Kd(d.KX.getSelectorFromAPDescription(a)),
a=d.KX.getPropertyNameFromAPDescription(a)),!d.K1F.K1G(a,"content")&&!d.K1F.K1G(a,"foreach")))return d.KX.getPropertyFromElement(b,a)},setValue:function(b,a,e,g,h){"@"===a[0]?"function"!==typeof e?d.Log.error("Event listener must be a function!"):b&&b.addEventListener(a.substr(1),function(a){e.apply(b.__knot.dataContext,[a,b])}):("#"===a[0]&&(b=d.KX.Kd(d.KX.getSelectorFromAPDescription(a)),a=d.KX.getPropertyNameFromAPDescription(a)),
d.K1F.K1G(a,"content"))?f(b,e,g):d.K1F.K1G(a,"foreach")?c(b,e,g,h):("undefined"===typeof e&&(e=""),d.K1F.setValueOnPath(b,a,e))},doesSupportMonitoring:function(b,c){"#"===c[0]&&(b=d.KX.Kd(d.KX.getSelectorFromAPDescription(c)),c=d.KX.getPropertyNameFromAPDescription(c));if(!b)return!1;var e=b.tagName.toLowerCase()+"."+c;return a[e]||a["*."+c]},monitor:function(b,c,e,f){"#"===c[0]&&(b=d.KX.Kd(d.KX.getSelectorFromAPDescription(c)),
c=d.KX.getPropertyNameFromAPDescription(c));for(var c=b.tagName.toLowerCase()+"."+c,c=a[c].split(","),g=0;g<c.length;g++)b.addEventListener(c[g],e);("input"===b.tagName.toLowerCase()||"textarea"===b.tagName.toLowerCase())&&(f&&f.immediately&&("1"===f.immediately||"true"===f.immediately.toLowerCase()))&&b.addEventListener("keyup",e)},stopMonitoring:function(b,c,e,f){"#"===c[0]&&(b=d.KX.Kd(d.KX.getSelectorFromAPDescription(c)),c=d.KX.getPropertyNameFromAPDescription(c));
for(var c=b.tagName.toLowerCase()+"."+c,c=a[c].split(","),g=0;g<c.length;g++)b.removeEventListener(c[g],e);("input"===b.tagName.toLowerCase()||"textarea"===b.tagName.toLowerCase())&&(f&&f.immediately&&("1"===f.immediately||"true"===f.immediately.toLowerCase()))&&b.removeEventListener("keyup",e)},syncItems:e};d.K3.registerAPProvider(d.Kf);d.Kg={doesSupport:function(b,a){return a&&("!"===a[0]&&(a=a.substr(1)),"#"===a[0])?!0:b instanceof HTMLElement},getValue:function(b,
a){if("!"===a[0]&&(a=a.substr(1),"#"===a[0]&&(b=d.KX.Kd(d.KX.getSelectorFromAPDescription(a)),a=d.KX.getPropertyNameFromAPDescription(a)),b))return!b.__knot_errorStatusInfo||!b.__knot_errorStatusInfo[a]?null:b.__knot_errorStatusInfo[a].currentStatus},setValue:function(b,a,c,e){if("!"===a[0]&&(a=a.substr(1),"#"===a[0]&&(b=d.KX.Kd(d.KX.getSelectorFromAPDescription(a)),a=d.KX.getPropertyNameFromAPDescription(a)),b&&(c||b.__knot_errorStatusInfo&&
b.__knot_errorStatusInfo[a]&&b.__knot_errorStatusInfo[a].K1O)))if(b.__knot_errorStatusInfo||(b.__knot_errorStatusInfo={}),b.__knot_errorStatusInfo[a]||(b.__knot_errorStatusInfo[a]={}),b.__knot_errorStatusInfo[a].currentStatus!==c){b.__knot_errorStatusInfo[a].currentStatus=c;if(b.__knot_errorStatusInfo[a].K1O)for(var f=b.__knot_errorStatusInfo[a].K1O,g=0;g<f.length;g++)try{f[g].apply(b,[a,c])}catch(h){d.Log.warning("Call error status changed callback failed.",
h)}if(e&&e["@error"])if(f=d.K1F.getValueOnPath(null,e["@error"]),!f||"function"!==typeof f)d.Log.error("'"+e["@error"]+"' must be a function.");else try{f.apply(b,[a,c])}catch(j){d.Log.error("Call AP error event handler '"+e["@error"]+"' failed.",j)}}},doesSupportMonitoring:function(b,a){return"!"===a[0]},monitor:function(b,a,c){if("!"===a[0]){a=a.substr(1);if("#"===a[0]){var e=d.KX.getSelectorFromAPDescription(a),b=d.KX.Kd(e);if(!b){d.Log.warning("Failed to bind to error status, target is not found.  target selector:"+
e);return}a=d.KX.getPropertyNameFromAPDescription(a)}b.__knot_errorStatusInfo||(b.__knot_errorStatusInfo={});b.__knot_errorStatusInfo[a]||(b.__knot_errorStatusInfo[a]={});b.__knot_errorStatusInfo[a].K1O||(b.__knot_errorStatusInfo[a].K1O=[]);b.__knot_errorStatusInfo[a].K1O.push(c)}},stopMonitoring:function(a,c,e){"#"===c[1]&&(a=d.KX.Kd(d.KX.getSelectorFromAPDescription(c.substr(1))),c=d.KX.getPropertyNameFromAPDescription(c.substr(1)));
a.__knot_errorStatusInfo&&(a.__knot_errorStatusInfo[c]&&a.__knot_errorStatusInfo[c].K1O)&&(e=a.__knot_errorStatusInfo[c].K1O.indexOf(e),0<=e&&a.__knot_errorStatusInfo[c].K1O.splice(e,1))},getErrorStatusInformation:function(a,c){if(a.__knot_errorStatusInfo)for(var d in a.__knot_errorStatusInfo)a.__knot_errorStatusInfo[d]&&a.__knot_errorStatusInfo[d].currentStatus&&c.push({node:a,accessPointName:d,error:a.__knot_errorStatusInfo[d].currentStatus});for(d=0;d<a.children.length;d++)this.getErrorStatusInformation(a.children[d],
c)}};d.K3.registerAPProvider(d.Kg,!0)})(window);(function(j){function k(a){if(!a)return null;for(var b=0;b<a.length;b++)if("dataContext"===a[b].leftAP.description)return a[b];return null}function g(a,b){a.__knot?b.__knot=JSON.parse(JSON.stringify(a.__knot)):delete b.__knot;for(var c=0;c<a.children.length;c++)g(a.children[c],b.children[c])}function h(){var a,b;for(b in c){(function(){var d=b;c[d].objectObserveCallback=function(b,f,g){b=c[d].options;if(f)for(a=0;a<b.length;a++)e.K3.KG(f,null,b[a]);for(a=0;a<b.length;a++)e.K3.KF(g,
null,b[a])};e.KM.monitor(j,b.substr(1),c[d].objectObserveCallback)})();var d=e.K1F.getValueOnPath(null,b);if(d){var f=c[b].options;for(a=0;a<f.length;a++)e.K3.KF(d,null,f[a])}}}function f(a,b){a.__knot_component||(d[b]?a.__knot_component=d[b](a,b):e.Log.error("Component '"+b+"' is not registered."))}var e=j.Knot.K1M(),c={},d={};e.Kh={Kk:{},addGlobalObjectOption:function(a,b){c[a]||(c[a]={options:[]});c[a].options=c[a].options.concat(b)},
K10:function(a){return"function"===typeof a||!this.Kk[a]},createFromTemplate:function(a,b,c){if(this.K10(a)){var d,f;f="function"===typeof a?a:e.K1F.getValueOnPath(b,a);"function"===typeof f?d=f.apply(c,[b]):e.Log.error("Unknown template:"+a);return d}e.Kh.Kk[a]?(a=e.Kh.Kk[a],b=a.cloneNode(!0),g(a,b),a=b):(e.Log.error("Failed find template. id:"+a),a=void 0);return a},hasDataContext:function(a){return a.__knot&&"dataContext"in
a.__knot},setDataContext:function(a,b){this.K13(a,b,!0);a.__knot?a.__knot.dataContext=b:a.__knot={dataContext:b};a.__knot.isFixedDataContext=!0},K11:function(a){if(a.__knot&&a.__knot.options)for(var b=0;b<a.__knot.options.length;b++)"dataContext"!==a.__knot.options[b].leftAP.description&&e.K3.KG(a,a.__knot.dataContext,a.__knot.options[b])},K12:function(a){if(a.__knot&&a.__knot.options)for(var b=0;b<a.__knot.options.length;b++)"dataContext"!==a.__knot.options[b].leftAP.description&&
e.K3.KF(a,a.__knot.dataContext,a.__knot.options[b])},K13:function(a,b,c){if(a instanceof HTMLElement||a instanceof HTMLBodyElement){var d;a.getAttribute("knot-component")&&f(a,a.getAttribute("knot-component"));if(a.__knot){if(c||!a.__knot.isFixedDataContext){d=k(a.__knot.options);c=b;if(d){c=e.K3.K9(b,d.rightAP);if(c===e.K3.K8){e.Log.error("Get context data failed. node:"+e.KX.KY(a));return}if(d.hasTiedUpKnot&&
c===a.__knot.dataContext)return;(d.data||"/"===d.rightAP.description[0])&&d.changedCallback&&d.rightAP.provider.stopMonitoring(d.data,d.rightAP.description,d.changedCallback,d.rightAP.options);d.data=b;d.data||"/"===d.rightAP.description[0]?(d.changedCallback=function(){e.Kh.K13(a,b)},d.rightAP.provider.monitor(d.data,d.rightAP.description,d.changedCallback,d.rightAP.options)):d.changedCallback=null;d.hasTiedUpKnot=!0}this.K11(a);e.K3.KC(a,
b,d,c,!1);for(d=0;d<a.childNodes.length;d++)this.K13(a.childNodes[d],c);a.__knot.dataContext=c;this.K12(a)}}else for(d=0;d<a.childNodes.length;d++)this.K13(a.childNodes[d],b)}},K14:function(a){for(;a;){if(a.__knot)return a.__knot.dataContext;a=a.parentNode}},K15:function(a){if(a.__knot){var b=k(a.__knot.options);b&&((b.data||"/"===b.rightAP.description[0])&&b.changedCallback&&b.rightAP.provider.stopMonitoring(b.data,b.rightAP.description,
b.changedCallback,b.rightAP.options),b.data=null,b.changedCallback=null,b.hasTiedUpKnot=!1);this.K11(a);delete a.__knot.dataContext}a.__knot_component&&(a.__knot_component.dispose&&a.__knot_component.dispose(),delete a.__knot_component);for(b=0;b<a.childNodes.length;b++)this.K15(a.childNodes[b])},bind:function(){h();this.K13(document.body,null)},clear:function(a){if(!a){var b,d;for(d in c){c[d].objectObserveCallback&&e.KM.stopMonitoring(j,d.substr(1),c[d].objectObserveCallback);
var f=e.K1F.getValueOnPath(null,d);if(f){var g=c[d].options;for(b=0;b<g.length;b++)e.K3.KG(f,null,g[b])}}}this.K15(a||document.body)},K16:function(a,b){a.__knot||(a.__knot={});a.__knot.dataContext=b},K1L:function(a){if(a.__knot)return a.__knot.dataContext},K17:function(a){var b;if(a.__knot&&a.__knot.options)for(b=0;b<a.__knot.options.length;b++)"dataContext"!==a.__knot.options[b].leftAP.description&&!(a.__knot.options[b].leftAP.description&&
"!"===a.__knot.options[b].leftAP.description[0])&&e.K3.KH(a.__knot.options[b].leftAP);for(b=0;b<a.children.length;b++)this.K17(a.children[b])},registerComponent:function(a,b){if(d[a])throw Error("Component '"+a+"' has been registered!");d[a]=b},getComponentObject:function(a){return a.__knot_component}}})(window);(function(j){function k(c,d,a,b){b=f.K18.parse(d+":"+b);0<b.length?(f.K3.KF(c,a,b[0]),c.__knot.options||(c.__knot.options=[]),c.__knot.options.push(b[0])):c[d]=a;return b}function g(c){var d=c.tagName.toLowerCase();"input"===d&&(d+=c.type.toLocaleLowerCase());return d}function h(c){if(c=c.options[c.selectedIndex])return c.__knot?c.__knot.dataContext:void 0}var f=j.Knot.K1M(),e={text:{"input.text":"value",textarea:"value",option:"text",span:"innerText","*":"textContent"}};
f.K3.registerAPProvider({doesSupport:function(c,d){"#"===d[0]&&(c=f.KX.Kd(f.KX.getSelectorFromAPDescription(d)),d=f.KX.getPropertyNameFromAPDescription(d));return c instanceof HTMLElement&&("select"===c.tagName.toLowerCase()&&(f.K1F.K1G(d,"options")||"selectedData"===d||f.K1F.K1G(d,"selectedData.")||"value"===d)||"class"===d||e[d])?!0:!1},getValue:function(c,d){"#"===d[0]&&(c=f.KX.Kd(f.KX.getSelectorFromAPDescription(d)),
d=f.KX.getPropertyNameFromAPDescription(d));if("select"===c.tagName.toLowerCase()&&("selectedData"===d||f.K1F.K1G(d,"selectedData.")))return"selectedData"===d?h(c):f.K1F.getValueOnPath(h(c),d.split(".").slice(1).join("."));if("select"===c.tagName.toLowerCase()&&"value"===d)return 0<=c.selectedIndex?c.options[c.selectedIndex].value:void 0;if("class"===d)return c.className;if("select"===c.tagName.toLowerCase()&&f.K1F.K1G(d,"options"))return c.options;if(e[d]){var a;
a=c;var b=d,i=g(a);a=e[b][i]?a[e[b][i]]:a[e[b]["*"]];return a}},setValue:function(c,d,a,b){"#"===d[0]&&(c=f.KX.Kd(f.KX.getSelectorFromAPDescription(d)),d=f.KX.getPropertyNameFromAPDescription(d));if("class"===d){if(a){for(var b=[],d=c.className.split(" "),a=a.split(" "),i=0;i<a.length;i++){var j=a[i];"-"===j[0]?(j=j.substr(1).trim(),0<=d.indexOf(j)&&d.splice(d.indexOf(j),1)):"+"===j[0]?(j=j.substr(1).trim(),0>d.indexOf(j)&&d.push(j)):b.push(j)}c.className=0<
b.length?b.join(" "):d.join(" ")}}else if("select"===c.tagName.toLowerCase()&&"value"===d){for(b=0;b<c.options.length;b++)if(c.options[b].value===a){c.selectedIndex=b;return}c.selectedIndex=-1}else if("select"===c.tagName.toLowerCase()&&("selectedData"===d||f.K1F.K1G(d,"selectedData.")))if("selectedData"===d)a:{for(b=0;b<c.options.length;b++)if(c.options[b].__knot&&c.options[b].__knot.dataContext===a){c.selectedIndex=b;break a}c.selectedIndex=-1}else f.K1F.setValueOnPath(h(c),d.split(".").slice(1).join("."));
else if("select"===c.tagName.toLowerCase()&&f.K1F.K1G(d,"options")){(d=b)||(d={});a||(a=[]);for(b=0;b<a.length;b++){a:{for(var i=c.options,j=a[b],m=b;m<i.length;m++)if(f.Kh.K1L(i[m])===j){i=i[m];break a}i=null}i?c.options[b].indexOf(i)!==b&&(c.options.remove(c.options[b].indexOf(i)),c.options.add(i,b)):(i=document.createElement("option"),f.Kh.K16(i,a[b]),a[b]&&(d.displayMember?k(i,"text",a[b],d.displayMember):i.text=a[b],d.valueMember?
k(i,"value",a[b],d.valueMember):i.value=a[b]),c.options.add(i,b))}for(b=c.options.length-1;b>=a.length;b--){d=c.options[b];if(d.__knot&&d.__knot.options){for(i=0;i<d.__knot.options.length;i++)f.K3.KG(d,d.__knot.dataContext,d.__knot.options[i]);delete d.__knot.dataContext}c.options.remove(b)}}else e[d]&&(b=d,"undefined"===typeof a&&(a=""),d=g(c),e[b][d]?c[e[b][d]]=a:c[e[b]["*"]]=a)},doesSupportMonitoring:function(c,d){"#"===d[0]&&(c=f.KX.Kd(f.KX.getSelectorFromAPDescription(d)),
d=f.KX.getPropertyNameFromAPDescription(d));return c&&"select"===c.tagName.toLowerCase()&&("selectedData"===d||f.K1F.K1G(d,"selectedData.")||"value"===d)},monitor:function(c,d,a){"#"===d[0]&&(c=f.KX.Kd(f.KX.getSelectorFromAPDescription(d)),d=f.KX.getPropertyNameFromAPDescription(d));"select"===c.tagName.toLowerCase()&&("selectedData"===d||f.K1F.K1G(d,"selectedData.")||"value"===d)&&c.addEventListener("change",a)},stopMonitoring:function(c,
d,a){"#"===d[0]&&(c=f.KX.Kd(f.KX.getSelectorFromAPDescription(d)),d=f.KX.getPropertyNameFromAPDescription(d));"select"===c.tagName.toLowerCase()&&("selectedData"===d||f.K1F.K1G(d,"selectedData.")||"value"===d)&&c.removeEventListener("change",a)}})})(window);(function(j){j.Knot.K1M().K3.registerAPProvider({doesSupport:function(j){return j&&j.__knot_component},getValue:function(j,g,h){return j.__knot_component.getValue(g,h)},setValue:function(j,g,h,f){j.__knot_component.setValue(g,h,f)},doesSupportMonitoring:function(j,g){return j.__knot_component.doesSupportMonitoring(g)},monitor:function(j,g,h,f){j.__knot_component.monitor(g,h,f)},stopMonitoring:function(j,g,h,f){j.__knot_component.stopMonitoring(g,h,f)}},!1,!0)})(window);(function(j){function k(){if(!c){c=!0;try{if(f){for(var a=f.map(function(a){return h.K1F.getValueOnPath(null,"$hash."+a)}),b=a.length-1;0<=b&&!a[b];b--)a.length=b;b="";0<a.length&&(b=a.join(e));j.location.hash="#"+b;h.K1F.setValueOnPath(null,"$hash.originalHash",b)}}finally{c=!1}}}function g(){if(!c){c=!0;try{var a;a=j.location.hash?j.location.hash.substr(1):"";if(f)for(var b=h.K1F.K1K(a,e),d=0;d<f.length;d++)h.K1F.setValueOnPath(null,"$hash."+f[d],b[d]);h.K1F.setValueOnPath(null,
"$hash.originalHash",a)}finally{c=!1}}}var h=j.Knot.K1M(),f,e,c=!1;h.K1F.setValueOnPath(null,"$hash",{});var d=h.K1F.getValueOnPath(null,"$hash");g();h.K1P={setHashFormat:function(a,b){if(!(a instanceof Array))throw Error("Hash fields must be an array.");if(0<=a.indexOf("hash"))throw Error("Hash field can't be 'hash'.");if(!b)throw Error("Please specify the splitter.");var c;if(f)for(c=0;c<f.length;c++)h.KM.stopMonitoring(d,f[c],k);f=a;e=b;if(f)for(c=0;c<
f.length;c++)h.KM.monitor(d,f[c],k);g()}};h.KM.monitor(d,"originalHash",function(){k();g()});j.addEventListener("hashchange",function(){g()})})(window);(function(j){function k(){var e;for(e=0;e<h.length;e++)try{if(f)h[e](!1,f);else h[e](!0)}catch(c){g.Log.warning("Execute on ready callback failed.",c)}h.length=0}var g=j.Knot.K1M();delete j.Knot.K1M;j.Knot.Advanced={registerAPProvider:function(e){return g.K3.registerAPProvider(e)},registerLogger:function(e){g.Log.log=e},registerDebugger:function(e){g.Debugger=e},synchronizeItems:function(e,c,d,a,b){g.Kf.syncItems(e,c,d,a,b)},createFromTemplate:function(e,
c,d){return g.Kh.createFromTemplate(e,c,d)},setDataContext:function(e,c){g.Kh.setDataContext(e,c)},getValueOnPath:function(e,c){return g.K1F.getValueOnPath(e,c)},registerNamedGlobalSymbol:function(e,c){return g.KS.KT(e,c)},registerComponent:function(e,c){return g.Kh.registerComponent(e,c)},getComponentObject:function(e){return g.Kh.getComponentObject(e)}};j.Knot.getErrorStatusInformation=function(e){e||(e=document.body);
g.Kh.K17(e);var c=[];g.Kg.getErrorStatusInformation(e,c);return c};j.Knot.notifyObjectChanged=function(e,c,d,a){g.KM.notifyDataChanged(e,c,d,a)};j.Knot.monitorObject=function(e,c,d){g.KM.monitorObject(e,c,d)};j.Knot.stopMonitoringObject=function(e,c,d){g.KM.stopMonitoring(e,c,d)};j.Knot.getPropertiesChangeRecords=function(e){return g.KM.getPropertiesChangeRecords(e)};j.Knot.clearPropertiesChangeRecords=function(e){return g.KM.clearPropertiesChangeRecords(e)};
j.Knot.clear=function(e){g.Kh.clear(e)};j.Knot.getDataContext=function(e){return g.Kh.K14(e)};j.Knot.findElementBindToData=function(e,c){for(var d=0;d<e.length;d++)if(j.Knot.getDataContext(e[d])===c)return e};j.Knot.setHashFormat=function(e,c){g.K1P.setHashFormat(e,c)};j.Knot.getKnotVariant=function(e){return g.K1F.getValueOnPath(null,e)};j.Knot.setKnotVariant=function(e,c){return g.K1F.setValueOnPath(null,e,c)};var h=[],f;j.Knot.ready=
function(e){h.push(e);(j.Knot.isReady||f)&&k()};j.Knot.isReady=!1;j.addEventListener("load",function(){g.K1Q.loadGlobalScope().done(function(){g.Kh.bind();j.Knot.isReady=!0;f=null;k()},function(e){j.Knot.isReady=!1;f=e;k()})})})(window);
