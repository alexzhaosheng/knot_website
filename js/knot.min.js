(function(i){var h={KnotVariants:{},Setting:{enablePropertyHook:!0},Log:{Level:{Info:"Info",Warning:"Warning",Error:"Error"},log:function(g,e,f){i.console&&(i.console.log("["+g+"]"+e),f&&i.console.log(f))},info:function(g,e){this.log(this.Level.Info,g,e)},warning:function(g,e){this.log(this.Level.Warning,g,e)},error:function(g,e){this.log(this.Level.Error,g,e)}},Debugger:{knotChanged:function(){},knotTied:function(){},knotUntied:function(){},nodeAdded:function(){},nodeRemoved:function(){},errorStatusChanged:function(){}}};
i.Knot={K1M:function(){return h}}})(window);(function(i){var h=i.Knot.K1M(),g={"(":!0,"{":!0,"[":!0},e={")":!0,"}":!0,"]":!0},f={"(":")","{":"}","[":"]"};h.K1F={K1H:function(b){for(var c in b)return!1;return!0},trim:function(b){return b.trim?b.trim():b.replace(/^\s+|\s+$/g,"")},K1G:function(b,c){return!b?!1:b.substr(0,c.length)===c},getValueOnPath:function(b,c){if(!c&&""!==c||"*NULL"===c)return null;if("*"===c||""===c)return b;if("'"===c[0]&&"'"===c[c.length-1])return c.substr(1,c.length-2);var d=!1;"@"===c[0]&&
(d=!0,c=c.substr(1));var a;if(this.K1G(c,"__knot_global"))a=h.KS.KV(c);else{var j=b;"/"===c[0]?(j=i,c=c.substr(1)):"$"===c[0]&&(j=h.KnotVariants,c=c.substr(1));for(;0<=c.indexOf(".")&&j;)var f=h.K1F.trim(c.substr(0,c.indexOf("."))),j="*"!==f?j[f]:void 0,c=h.K1F.trim(c.substr(c.indexOf(".")+1));"*"===c?a=j:j&&(a=j[c])}if(d&&a&&"function"!==typeof a)h.Log.error("'"+c+"' is expected as a function, but it isn't.");else return a},setValueOnPath:function(b,c,d){if("*"!==
c[c.length-1]){if(this.K1G(c,"__knot_global"))throw Error("Can't set global symbol!");c&&"/"===c[0]?(b=i,c=c.substr(1)):"$"===c[0]&&(b=h.KnotVariants,c=c.substr(1));var a=c,j=c.lastIndexOf(".");0<j&&(a=c.substr(j+1),b=this.getValueOnPath(b,c.substr(0,j)));b&&(b[a]=d)}},K1I:function(){return i.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},K1J:function(b,c,d,a){var j={start:-1,end:-1};j.start=b.indexOf(d,c);if(0>j.start)return null;for(var c=0,f=j.start+
1;;){var k=b.indexOf(d,f),f=b.indexOf(a,f);if(0>f)break;if(0>k||f<k){if(0===c){j.end=f;break}else c--;f+=1}else c++,f=k+1}return 0<=j.start&&0<=j.end?j:null},K1K:function(b,c){for(var d=0,a=0,j=[],m=[],k=c.length;d<b.length;){if(g[b[d]])m.push(b[d]);else if(e[b[d]]){var n=m.pop();f[n]!==b[d]&&(h.Log.warning("Unclosed block is detected.\r"+b),m.push(n))}else 0===m.length&&(b[d]===c[0]&&b.substr(d,k)===c)&&(j.push(b.substr(a,d-a)),a=d+k);d++}0<m.length&&h.Log.warning("Unclosed block is detected.\r"+
b);d>=a&&j.push(b.substr(a,d-a));return j}}})(window);(function(i){i=i.Knot.K1M();i.Deferred=function(){this._succCallbacks=[];this._errCallbacks=[];this.isRejected=this.isFinished=!1;this.result=null};i.Deferred.prototype.resolve=function(h){this.result=h;this.isFinished=!0;this.isRejected=!1;for(var g=0;g<this._succCallbacks.length;g++)this._succCallbacks[g](h)};i.Deferred.prototype.reject=function(h){this.result=h;this.isRejected=this.isFinished=!0;for(var g=0;g<this._errCallbacks.length;g++)this._errCallbacks[g](h)};i.Deferred.prototype.done=
function(h,g){this.isFinished?this.isRejected?g(this.result):h(this.result):(this._succCallbacks.push(h),this._errCallbacks.push(g));return this}})(window);(function(i){var h=i.Knot.K1M();h.KJ={_dataInMonitoring:[],_attachedInfoOfData:[],KK:function(g){if(h.Setting.enablePropertyHook){if(!g.__knot_attachedData){if("object"!==typeof g)throw Error("Can only monitor object or array!");Object.defineProperty(g,"__knot_attachedData",{value:{},configurable:!0,writable:!1,enumerable:!1})}return g.__knot_attachedData}0>this._dataInMonitoring.indexOf(g)&&(this._dataInMonitoring.push(g),this._attachedInfoOfData[this._dataInMonitoring.indexOf(g)]=
{});return this._attachedInfoOfData[this._dataInMonitoring.indexOf(g)]},KL:function(g){h.Setting.enablePropertyHook?delete g.__knot_attachedData:(g=this._dataInMonitoring.indexOf(g),0<=g&&(delete this._dataInMonitoring[g],delete this._attachedInfoOfData[g]))}}})(window);(function(i){var h=i.Knot.K1M();h.KM={on:function(g,e,f,b){g=h.KJ.KK(g);g.K1O||(g.K1O={});e||(e="*");g.K1O[e]||(g.K1O[e]=[]);g.K1O[e].push({callback:f,attachedData:b})},off:function(g,e,f){e||(e="*");var b=h.KJ.KK(g);if(b.K1O&&b.K1O[e]){for(var c=0;c<b.K1O[e].length;c++)if(b.K1O[e][c].callback===f){b.K1O[e].splice(c,
1);break}0===b.K1O[e].length&&(delete b.K1O[e],h.K1F.K1H(b)&&h.KJ.KL(g))}},KN:function(g,e,f){g=h.KJ.KK(g);if(g.K1O&&g.K1O[e])for(var b=0;b<g.K1O[e].length;b++)if(g.K1O[e][b].callback===f)return!0;return!1},KO:function(g,e,f){g=h.KJ.KK(g);if(g.K1O&&g.K1O[e])for(var b=0;b<g.K1O[e].length;b++)if(g.K1O[e][b].callback===
f)return g.K1O[e][b].attachedData;return null},notifyDataChanged:function(g,e,f,b){var c=h.KJ.KK(g);c.changedProperties||(c.changedProperties=[]);0>c.changedProperties.indexOf(e)&&c.changedProperties.push(e);var d,a;if(c.K1O&&c.K1O[e]){d=c.K1O[e].slice(0);for(a=0;a<d.length;a++)try{d[a].callback.apply(g,[e,f,b])}catch(j){h.Log.warning("Call changed callback failed.",j)}}if(c.K1O&&c.K1O["*"]){d=c.K1O["*"].slice(0);
for(a=0;a<d.length;a++)try{d[a].callback.apply(g,[e,f,b])}catch(m){h.Log.warning("Call changed callback failed.",m)}}},getPropertiesChangeRecords:function(g){g=h.KJ.KK(g);return!g?null:g.changedProperties?g.changedProperties:[]},clearPropertiesChangeRecords:function(g){g=h.KJ.KK(g);if(!g)return null;g.changedProperties=null},KP:function(g,e){if("*"!==e){var f=h.KJ.KK(g);f.dataHookInfo||(f.dataHookInfo={hookedProperties:[],
data:{},hookRefCount:{}});if(0<=f.dataHookInfo.hookedProperties.indexOf(e))f.dataHookInfo.hookRefCount[e]++;else if(f.dataHookInfo.hookedProperties.push(e),f.dataHookInfo.data[e]=g[e],f.dataHookInfo.hookRefCount[e]=1,!(g instanceof Array&&"length"===e))try{Object.defineProperty(g,e,{set:function(b){var d=f.dataHookInfo.data[e];if(d!==b){f.dataHookInfo.data[e]=b;h.KM.notifyDataChanged(this,e,d,b)}},get:function(){return f.dataHookInfo.data[e]},configurable:!0,enumerable:!0})}catch(b){f.dataHookInfo.hookFailed=
!0,h.Log.warning("Hook property failed. property:"+e,b)}}},KQ:function(g,e){if("*"!==e){var f=h.KJ.KK(g);f.dataHookInfo&&(!(0>f.dataHookInfo.hookedProperties.indexOf(e))&&!(0<--f.dataHookInfo.hookRefCount[e]))&&(f.dataHookInfo.hookFailed||(delete g[e],g[e]=f.dataHookInfo.data[e]),f.dataHookInfo.hookedProperties.splice(f.dataHookInfo.hookedProperties.indexOf(e),1),delete f.dataHookInfo.data[e],delete f.dataHookInfo.hookRefCount[e])}},KR:function(g,
e){var f=h.KJ.KK(g);return!f.dataHookInfo?!1:0<=f.dataHookInfo.hookedProperties.indexOf(e)},monitorObject:function(g,e,f,b){var c,d=e.substr(0,e.indexOf("."));d?c=e.substr(e.indexOf(".")+1):(d=e,c=null);var a={};h.KM.on(g,e,f,a);c&&(a.childChangedCallback=function(a,b,f){h.KM.notifyDataChanged(g,d+"."+c,b,f)},a.monitorChildChangedCallback=function(b,f,k){f&&h.KM.stopMonitoring(f,c,a.childChangedCallback);k&&h.KM.monitorObject(k,c,a.childChangedCallback,
true);b=d+"."+c;k=h.K1F.getValueOnPath(k,c);f=h.K1F.getValueOnPath(f,c);h.KM.notifyDataChanged(g,b,f,k)},h.KM.on(g,d,a.monitorChildChangedCallback),g[d]&&h.KM.monitorObject(g[d],c,a.childChangedCallback,!0));b||(a.changedCallback=function(b,d,c){if(d instanceof Array){h.KM.off(d,"*",a.arrayChangedCallback);delete a.arrayChangedCallback}if(c instanceof Array){a.arrayChangedCallback=function(){h.KM.notifyDataChanged(g,e,c,c)};h.KM.on(c,
"*",a.arrayChangedCallback)}},h.KM.on(g,e,a.changedCallback,a),f=h.K1F.getValueOnPath(g,e),f instanceof Array&&a.changedCallback("*",null,f));h.KM.KP(g,d)},monitor:function(g,e,f){if(e)"/"===e[0]&&(e=e.substr(1),g=i),this.monitorObject(g,e,f);else h.KM.on(g,null,f)},stopMonitoring:function(g,e,f){if(e){"/"===e[0]&&(e=e.substr(1),g=i);var b,c=e.substr(0,e.indexOf("."));c?b=e.substr(e.indexOf(".")+1):(c=e,b=null);var d=h.KM.KO(g,e,f);
d&&(d.monitorChildChangedCallback&&h.KM.off(g,c,d.monitorChildChangedCallback),d.childChangedCallback&&g[c]&&h.KM.stopMonitoring(g[c],b,d.childChangedCallback),d.changedCallback&&h.KM.off(g,e,d.changedCallback),d.arrayChangedCallback&&h.KM.off(h.K1F.getValueOnPath(g,e),"*",d.arrayChangedCallback));h.KM.off(g,e,f);h.KM.KQ(g,c)}else h.KM.off(g,e,f)}}})(window);(function(i){function h(f){e[f]=Array.prototype[f];Array.prototype[f]=function(){var b=this.length,c=e[f].apply(this,arguments);this.__knot_attachedData&&(g.KM.notifyDataChanged(this,"*"),b!==this.length&&g.KM.notifyDataChanged(this,"length",b,this.length));return c}}var g=i.Knot.K1M(),e={};h("push");h("pop");h("unshift");h("shift");h("splice");h("sort");h("reverse");Array.prototype.notifyChanged=function(){this.__knot_attachedData&&(g.KM.notifyDataChanged(this,
"*"),g.KM.notifyDataChanged(this,"length",null,this.length))}})(window);(function(i){var h=i.Knot.K1M(),g=0,e={};h.KS={KT:function(f,b){e[f]?h.Log.error("The global symbol'"+f+"' has been registered."):e[f]=b},KU:function(f){var b="s"+g++;e[b]=f;return"__knot_global."+b},KV:function(f){var f=f.split("."),b=i;"__knot_global"===f[0]&&(b=e,f.splice(0,1));for(var c=0;c<f.length;c++){if(null===b||"undefined"===typeof b)return;b=b[f[c]]}return b},KW:function(f){return h.K1F.K1G(f,"__knot_global.")}}})(window);(function(i){function h(f){f="(function (value) {"+f+"})";try{return e.KS.KU(eval(f))}catch(b){e.Log.error("Invalid pipe function: \r\n"+f,b)}}var g=[{splitter:":",left:!1,right:!1},{splitter:"=>",left:!0,right:!1},{splitter:"<=",left:!1,right:!0},{splitter:"=",left:!0,right:!0}],e=i.Knot.K1M();e.K18={parse:function(f){for(var b=[],f=this.K1E(f),f=e.K1F.K1K(f,";"),c=0;c<f.length;c++){var d=this.K1C(f[c]);
d&&b.push(d)}return b},K1E:function(f){for(var b=e.K1F.K1J(f,0,"{","}");b;)var c=f.substr(b.start+1,b.end-b.start-1),c=h(c),f=f.substr(0,b.start)+c+f.substr(b.end+1),b=e.K1F.K1J(f,0,"{","}");return f},K1C:function(f){f=e.K1F.trim(f);if(!f)return null;for(var b,c,d=0;d<g.length;d++)if(b=e.K1F.K1K(f,g[d].splitter),2===b.length){c=g[d];break}if(!c)return e.Log.error("Invalid option:"+f),null;d=this.K1B(b[0]);b=
this.K1B(b[1]);if(null===d||null===b||d.isComposite&&b.isComposite)return e.Log.error("Invalid option:"+f),null;c.left&&(d.options||(d.options={}),d.options.readonly="1");c.right&&(b.options||(b.options={}),b.options.readonly="1");return{leftAP:d,rightAP:b}},K1B:function(f){f=e.K1F.trim(f);if("("===f[0])return this.K19(f);var b=e.K1F.K1K(f,">"),f=e.K1F.trim(b[0]);b.splice(0,1);var b=b.map(function(a){return e.K1F.trim(a)}),c=null;
if("]"===f[f.length-1]){var d=e.K1F.K1J(f,0,"[","]");d&&(c=this.K1A(f.substr(d.start+1,d.end-d.start-1)),f=f.substr(0,d.start))}return{description:f,pipes:b,options:c}},K1A:function(f){for(var b={},f=e.K1F.K1K(f,";"),c=0;c<f.length;c++){var d=f[c].split(":");2!==d.length||!d[0]||!d[1]?e.Log.error("Invalid AP option:"+f[c]):b[e.K1F.trim(d[0])]=e.K1F.trim(d[1])}return b},K19:function(f){var b=e.K1F.K1J(f,0,"(",")");
if(!b)return e.Log.error("Invalid composite option:"+f),null;for(var c=e.K1F.K1K(f.substr(b.start+1,b.end-b.start-1),"&"),d=[],a=0;a<c.length;a++){var j=this.K1B(c[a]);if(!j)return null;d.push(j)}for(b=b.end+1;">"!==f[b];){if(" "!==f[b]&&"\t"!==f[b]&&"\n"!==f[b])return e.Log.error("Invalid composite option:"+f),null;b++}b++;b=e.K1F.trim(f.substr(b));return!b?(e.Log.error("Invalid composite option:"+f),null):{isComposite:!0,childrenAPs:d,nToOnePipe:b}}}})(window);(function(i){function h(a,b,d,c){if(b&&b[d]){var e=f.K1F.getValueOnPath(null,b[d]);if(!e||"function"!==typeof e)f.Log.error("'"+b[d]+"' must be a function.");else try{e.apply(a,c)}catch(g){f.Log.error("Call AP event handler '"+b[d]+"' failed.",g)}}}function g(a,b,d,c){if(d.description&&("*"===d.description[0]||"!"===d.description[0])){var e=d.description,g=!1;if("!"===e[0]&&(e=f.K1F.trim(e.substr(1)),g=!0,"*"!==e[0]))return{target:c?a:b,ap:d};var h;f.K1F.K1G(e,"*LEFT")&&(h=e.substr(5),
c=!0);f.K1F.K1G(e,"*RIGHT")&&(h=e.substr(6),c=!1);""===h&&(h="*");h&&"."===h[0]&&(h=h.substr(1));if(h){g&&(h="!"+h);var e={},o;for(o in d)d.hasOwnProperty(o)&&(e[o]=d[o]);e.description=h;d=e}}return{target:c?a:b,ap:d}}function e(a){return a.options&&a.options.readonly?(a=a.options.readonly.toLowerCase(),"1"===a||"true"===a):!1}var f=i.Knot.K1M(),b=[],c=[],d=[];f.K3={K4:function(a,j){if(j&&"!"===j[0])return this.K5(a,j)||f.K2;for(var d=
b.length-1;0<=d;d--)if(b[d].doesSupport(a,j))return b[d];return f.K2},K5:function(a,b){for(var d=c.length-1;0<=d;d--)if(c[d].doesSupport(a,b))return c[d];return null},registerAPProvider:function(a,j,f){if(j)0>c.indexOf(a)&&c.push(a);else{0>b.indexOf(a)&&b.push(a);f&&d.push(a);for(a=0;a<d.length;a++)b.splice(b.indexOf(d[a]),1),b.push(d[a])}},unregisterAPProvider:function(a,j){j?0<=c.indexOf(a)&&c.splice(b.indexOf(a),1):(0<=b.indexOf(a)&&b.splice(b.indexOf(a),1),d.indexOf(a)&&
d.splice(d.indexOf(a),1))},K8:{},K9:function(a,b){this.KD(a,b);var d=b.provider.getValue(a,b.description,b.options);try{if(b.pipes){for(var c=0;c<b.pipes.length;c++){var e=f.K1F.getValueOnPath(i,b.pipes[c]);"function"!==typeof e&&f.Log.error("Pipe must be a function. pipe name:"+b.pipes[c]);d=e.apply(a,[d])}b.errorAPProvider&&b.errorAPProvider.setValue(a,"!"+b.description,void 0,b.options);f.Debugger.errorStatusChanged(a,b,void 0)}}catch(g){return b.errorAPProvider&&
(b.errorAPProvider.setValue(a,"!"+b.description,g,b.options),f.Debugger.errorStatusChanged(a,b,g)),this.K8}return d},KA:function(a,b,d){if(!b.KB){b.KB=!0;try{this.KD(a,b),b.provider.setValue(a,b.description,d,b.options),h(a,b.options,"@set",[b.description,d])}finally{delete b.KB}}},KC:function(a,b,d,c,e){f.Debugger.knotChanged(a,b,d,c,e)},KD:function(a,b){b.provider||(b.provider=this.K4(a,
b.description),b.errorAPProvider=this.K5(a,b.description))},monitor:function(a,b,d,c,e){this.KD(a,b);this.KD(d,c);b.provider.doesSupportMonitoring(a,b.description)&&(b.changedCallback=function(){if(!c.KB){var g=f.K3.K9(a,b);if(g!==f.K3.K8){e.leftAP===b?f.K3.KC(a,d,e,g,!0):f.K3.KC(d,a,e,g,!1);b.KB=!0;try{f.K3.KA(d,
c,g)}finally{delete b.KB}h(a,b.options,"@change",arguments)}}},b.provider.monitor(a,b.description,b.changedCallback,b.options))},stopMonitoring:function(a,b){this.KD(a,b);b.changedCallback&&b.provider.doesSupportMonitoring(a,b.description)&&(b.provider.stopMonitoring(a,b.description,b.changedCallback,b.options),delete b.changedCallback)},KE:function(a,b,d,c,e){var g,l,o,p;a.isComposite?(g=a,l=b,o=d,p=c):(g=d,l=c,o=a,p=b);for(a=0;a<g.childrenAPs.length;a++)g.childrenAPs[a].provider=
f.K3.K4(l,g.childrenAPs[a].description);p.provider=f.K3.K4(p,o.description);g.changedCallback=function(){for(var a=[],d=0;d<g.childrenAPs.length;d++){var m=f.K3.K9(l,g.childrenAPs[d]);if(m===f.K3.K8)return;a.push(m)}d=f.K1F.getValueOnPath(i,g.nToOnePipe);typeof d!=="function"&&f.Log.error("Pipe must be a function. pipe name:"+g.nToOnePipe);a=d.apply(l,[a]);f.K3.KC(b,c,e,a,p===c);f.K3.KA(p,
o,a);h(p,o,"@change",[b,c,e])};for(a=0;a<g.childrenAPs.length;a++)g.childrenAPs[a].provider.doesSupportMonitoring(l,g.childrenAPs[a].description)&&g.childrenAPs[a].provider.monitor(l,g.childrenAPs[a].description,g.changedCallback,g.childrenAPs[a].options);g.changedCallback()},KF:function(a,b,d){var c=g(a,b,d.leftAP,!0),h=g(a,b,d.rightAP,!1),a=c.target,b=h.target,c=c.ap,h=h.ap;if(c.isComposite||h.isComposite)this.KE(c,a,h,b,d);else{this.KD(a,c);this.KD(b,h);var i;
!e(c)||e(c)&&e(h)?(i=this.K9(b,h),i!==this.K8&&(this.KC(a,b,d,i,!1),this.KA(a,c,i))):(i=this.K9(a,c),i!==this.K8&&(this.KC(b,a,d,i,!1),this.KA(b,h,i)));e(h)||this.monitor(a,c,b,h,d);e(c)||this.monitor(b,h,a,c,d)}f.Debugger.knotTied(a,b,d)},KG:function(a,b,d){var c=g(a,b,d.leftAP,!0),e=g(a,b,d.rightAP,!1),a=c.target,b=e.target,c=c.ap,e=e.ap;if(c.isComposite||e.isComposite){if(c.isComposite?
(e=c,c=a):c=b,e.changedCallback)for(var h=0;h<e.childrenAPs.length;h++)e.childrenAPs[h].provider.doesSupportMonitoring(c,e.childrenAPs[h].description)&&e.childrenAPs[h].provider.stopMonitoring(c,e.childrenAPs[h].description,e.changedCallback,e.childrenAPs[h].options)}else this.stopMonitoring(a,c),delete c.changedCallback,this.stopMonitoring(b,e);delete e.changedCallback;f.Debugger.knotUntied(a,b,d)},KH:function(a){a.changedCallback&&a.changedCallback()}};f.K2={doesSupport:function(){return!0},
getValue:function(a,b){"@"===b[0]&&(b=b.substr(1));return f.K1F.getValueOnPath(a,b)},setValue:function(a,b,d){f.K1F.setValueOnPath(a,b,d)},doesSupportMonitoring:function(a){return"object"!==typeof a?!1:!0},monitor:function(a,b,d){b&&"/"===b[0]&&(a=i,b=b.substr(1));b&&"$"===b[0]&&(a=f.KnotVariants,b=b.substr(1));a&&f.KM.monitor(a,b,d)},stopMonitoring:function(a,b,d){b&&"/"===b[0]&&(a=i,b=b.substr(1));b&&"$"===b[0]&&(a=f.KnotVariants,b=b.substr(1));a&&f.KM.stopMonitoring(a,
b,d)}}})(window);(function(i){function h(a,b,d){for(var c=0,e=k.K1F.K1J(b,c,"{","}");null!==e;){c=b.substr(c,e.start-c);c=k.K1F.trim(c);d&&(c=c.split(",").filter(function(a){return a}).map(function(a){a=k.K1F.trim(a);return d.split(",").filter(function(a){return a}).map(function(b){return k.K1F.trim(b)+" "+a}).join(",")}).join(","));a[c]||(a[c]=[]);for(var f=b.substr(e.start+1,e.end-e.start-1),f=k.K1F.K1K(f,";"),j=0;j<f.length;j++){var g=k.K1F.trim(f[j]);g&&(0===g.indexOf("=>")?
h(a,g.substr(2),c):(g=k.K18.K1E(g),0>a[c].indexOf(g)&&a[c].push(g)))}0===a[c].length&&delete a[c];c=e.end+1;e=k.K1F.K1J(b,c,"{","}")}}function g(a){var d=null;a.__knot&&a.__knot.cbsOptions&&(d=a.__knot.cbsOptions,delete a.__knot.cbsOptions);if(a.attributes.binding&&a.attributes.binding.value){d||(d=[]);var c=a.attributes.binding.value,c=k.K18.K1E(c),c=c.split(";").map(function(a){return k.K1F.trim(a)}),d=d.concat(c)}if(d)for(c=
0;c<d.length;c++){a.__knot||(a.__knot={options:[]});var e=k.K18.parse(d[c]);0!==e.length&&(a.__knot.options.push(e[0]),b(e[0].leftAP)&&0>n.indexOf(a)&&n.push(a))}if(a.children)for(d=0;d<a.children.length;d++)g(a.children[d])}function e(a){for(var b=0;b<a.length;b++){var d=a[b].scope,c=a[b].CBS,e=void 0,f=void 0;for(f in c)if(k.K1F.K1G(f,"/")){for(var e=f,j=c,h=[],m=0;m<j[e].length;m++)h=h.concat(k.K18.parse(j[e][m]));k.Kh.addGlobalObjectOption(e,h)}else{var i;
try{i=d.querySelectorAll(f)}catch(n){k.Log.warning("Invalid selector:"+f,n);continue}0===i.length&&k.Log.warning("There is no element selected with selector:"+f);for(e=0;e<i.length;e++)j=c[f].slice(0),i[e].__knot||(i[e].__knot={options:[]}),i[e].__knot.cbsOptions&&(j=i[e].__knot.cbsOptions.concat(j)),i[e].__knot.cbsOptions=j}a[b].scope===document?g(document.body):g(a[b].scope)}}function f(a,b){var d=[],c;b||(c={scope:document,CBS:{},isGlobalScope:!0},d.push(c));for(var e=0;e<a.length;e++){var f;var j=
a[e];if(!j||""===j)f=null;else{for(var g=void 0;0<=(g=j.indexOf("/*"));){f=j.indexOf("*/",g);if(0>f)throw Error("Can't find close mark for comment.");j=j.substr(0,g)+j.substr(f+2)}j=j.split("\n");g="";for(f=0;f<j.length;f++)for(var m=j[f].split("\r"),i=0;i<m.length;i++)"//"!==k.K1F.trim(m[i]).substr(0,2)&&(g+=m[i]);f=g}f=k.K1F.trim(f);if(k.K1F.K1G(f,"$private")){j={CBS:{}};f=f.substr(8);g=j;g.HTML||(g.HTML="");for(var m=0,i="",n=k.K1F.K1J(f,m,"<<{{","}}>>");null!==
n;)i+=f.substr(m,n.start-m),g.HTML+=f.substr(n.start+4,n.end-n.start-4),m=n.end+4,n=k.K1F.K1J(f,m,"<<{{","}}>>");m<f.length&&(i+=f.substr(m));f=i;try{j.scope=document.createElement("DIV"),j.scope.innerHTML=j.HTML,delete j.HTML}catch(l){k.Log.error("Load private scope HTML error.",l);continue}h(j.CBS,f);d.push(j)}else b?k.Log.error("Can't load CBS. It must be a private CBS!"):h(c.CBS,f)}return d}function b(a){return"foreach"===a.description||"content"===a.description}function c(a){for(var a=
a.querySelectorAll("*[knot-template], *[knot-template-id]"),b=0;b<a.length;b++){var d;d=a[b].getAttribute("knot-template-id")?a[b].getAttribute("knot-template-id"):"__knot_template_"+q++;k.Kh.Kk[d]=a[b];a[b].__knot_template_id=d}return Array.prototype.slice.apply(a,[0])}function d(a,b){var d;if(!b.options||!b.options.template){if(d=a.children[0],1<a.children.length&&k.Log.warning("More than one child is found within '"+k.KX.KY(a)+'", only the first will be taken as template and the reset will be removed.'),
!d){k.Log.error("Can't find template within '"+k.KX.KY(a)+"'");return}}else{var c=b.options.template;if("@"===c[0])return;d=k.Kh.Kk[c];if(!d){k.Log.error("Can't find template with selector'"+c+"'");return}}d.__knot_template_id||k.Log.error("The template node must be marked with 'knot-template'. Current node:'"+k.KX.KY(a)+"'");b.options||(b.options={});b.options.template=d.__knot_template_id}function a(a){var f=[],e;for(e=0;e<
a.length;e++)f=f.concat(c(a[e].scope));for(e=0;e<n.length;e++)for(var j=0;j<n[e].__knot.options.length;j++)b(n[e].__knot.options[j].leftAP)&&d(n[e],n[e].__knot.options[j].leftAP),b(n[e].__knot.options[j].rightAP)&&d(n[e],n[e].__knot.options[j].rightAP);for(e=n.length=0;e<f.length;e++)delete f[e].__knot_template_id,f[e].removeAttribute("knot-template"),f[e].removeAttribute("knot-template-id"),f[e].parentNode.removeChild(f[e]);for(e=0;e<a.length;e++)a[e].isGlobalScope||0<a[e].scope.children.length&&
k.Log.warning("Useless HTML is detected in private scope.")}function j(a){l.push(a);var b=new k.Deferred,d=k.K1F.K1I();d.onreadystatechange=function(){4===d.readyState&&(200===d.status?b.resolve(d.responseText):b.reject(Error("Load CBS script error. url:"+a+" message:"+d.statusText)))};d.open("GET",a,!0);d.send();return b}function m(){for(var a=new k.Deferred,b=i.document.querySelectorAll('script[type="text/cbs"]'),d=[],c=0,e=function(){if(0===c)try{a.resolve(d)}catch(b){k.Log.error("Initialize failed.  message:"+
b.message,b)}},f=0;f<b.length;f++)b[f].src?0<=l.indexOf(b[f].src)||(c++,function(){var a=b[f].src;j(a).done(function(a){d.push(a);c--;e()},function(b){c--;k.Log.error("Load CBS script error. url:"+a,b);e(b)})}()):d.push(b[f].textContent);0===c&&a.resolve(d);return a}var k=i.Knot.K1M(),n=[],q=0,l=[];k.K1R={loadGlobalScope:function(){var b=new k.Deferred;m().done(function(d){try{var c=f(d,!1);e(c);a(c);b.resolve()}catch(j){k.Log.error("Initialize failed.  message:"+j.message,j),b.reject(j)}},
function(a){b.reject(a)});return b},loadCBSPackage:function(b){var d=new k.Deferred;0<=l.indexOf(b)?d.resolve():j(b).done(function(c){try{var j=f([c],!0);e(j);a(j)}catch(g){k.Log.error("Parse CBS package failed. package file:"+b,g),d.reject(g)}d.resolve()},function(a){d.reject(a)});return d},test:{parseCBSInDocument:m,getScopes:f,Ks:e,Kv:a}}})(window);(function(i){function h(d){b.Kh.K15(d);d.parentNode.removeChild(d);b.Debugger.nodeRemoved(d)}function g(d,a,c){if(!c||!c.template)b.Log.error("No valid template is specified for 'content' access point. current node:"+b.KX.KY(d));else{var e=function(f,e){if(c&&c[e]){var g=b.K1F.getValueOnPath(a,c[e]);try{g.apply(d,[f,a])}catch(h){b.Log.warning("Raise "+e+" event failed.",h)}}},f=d.childNodes[0];if(f){if(!(f.__knot&&f.__knot.dataContext===a))if(null===
a||"undefined"===typeof a)h(f),e(f,"@removed");else{if(b.Kh.K10(c.template)){if(h(f),f=b.Kh.createFromTemplate(c.template,a,d))d.appendChild(f),b.Kh.hasDataContext(f)||b.Kh.setDataContext(f,a),b.Debugger.nodeAdded(f),e(f,"@added")}else b.Kh.setDataContext(f,a);f&&(f.__knot||(f.__knot={}),f.__knot.dataContext=a)}}else if(!(null===a||"undefined"===typeof a))if(f=b.Kh.createFromTemplate(c.template,a,d))d.appendChild(f),
b.Kh.hasDataContext(f)||b.Kh.setDataContext(f,a),e(f,"@added"),b.Debugger.nodeAdded(f)}}function e(d,a,c,f,e){a||(a=[]);for(var g=0;g<a.length;g++){var i;a:{for(var l=g;l<d.children.length;l++)if(d.children[l].__knot&&d.children[l].__knot.dataContext===a[g]){i=d.children[l];break a}i=null}if(i){if(Array.prototype.indexOf.call(d.children,i)!==g){d.removeChild(i);var l=d,o=g;l.children.length===o?l.appendChild(i):l.insertBefore(i,l.children[o])}}else if(l=b.Kh.createFromTemplate(c,
a[g],d)){i=d;var o=l,p=g;i.children.length===p?i.appendChild(o):i.insertBefore(o,i.children[p]);b.Kh.hasDataContext(l)||b.Kh.setDataContext(l,a[g]);b.Debugger.nodeAdded(l);f&&f.apply(d,[l,a[g]])}}for(g=d.children.length-1;g>=a.length;g--)h(d.children[g]),e&&e.apply(d,[d.children[g]])}function f(d,a,c){!c||!c.template?b.Log.error("No valid template is specified for 'foreach' access point. current node:"+b.KX.KY(d)):e(d,a,c.template,b.K1F.getValueOnPath(d,
c["@added"]),b.K1F.getValueOnPath(d,c["@removed"]))}var b=i.Knot.K1M(),c=[];c["input.value"]="change";c["textarea.value"]="change";c["input.checked"]="change";c["select.selectedIndex"]="change";c["select.value"]="change";c["*.clientWith"]="resize";c["*.clientHeight"]="resize";c["*.scrollTop"]="scroll";c["*.scrollLeft"]="scroll";b.KX={KY:function(b){var a=b.tagName;b.id?a+="[#"+b.id+"]":b.className&&(a+="["+b.className.split(" ").filter(function(a){return a.trim()!==
""}).map(function(a){return"."+a}).join(" ")+"]");return a},getSelectorFromAPDescription:function(d){d=b.K1F.K1K(d,".");return b.K1F.trim(d[0])},getPropertyNameFromAPDescription:function(d){d=b.K1F.K1K(d,".");if(1<d.length)return d.slice(1).join(".")},getPropertyFromElement:function(d,a){return!d?void 0:b.K1F.getValueOnPath(d,a)},Kd:function(d){if(0<d.indexOf("(")){var a=b.K1F.K1J(d,0,"(",")");if(a)try{var c=d.substr(a.start+1,
a.end-a.start-1);return document.querySelector(c)}catch(f){b.Log.error("Query selector failed.",f)}else b.Log.error("Unknown selector:"+d)}else return document.querySelector(d)}};b.Kf={doesSupport:function(b,a){return"#"===a[0]?!0:"!"===a[0]?!1:b instanceof HTMLElement},getValue:function(d,a){if("@"!==a[0]&&("#"===a[0]&&(d=b.KX.Kd(b.KX.getSelectorFromAPDescription(a)),a=b.KX.getPropertyNameFromAPDescription(a)),!b.K1F.K1G(a,"content")&&
!b.K1F.K1G(a,"foreach")))return b.KX.getPropertyFromElement(d,a)},setValue:function(d,a,c,e){"@"===a[0]?"function"!==typeof c?b.Log.error("Event listener must be a function!"):d&&d.addEventListener(a.substr(1),function(a){c.apply(d.__knot.dataContext,[a,d])}):("#"===a[0]&&(d=b.KX.Kd(b.KX.getSelectorFromAPDescription(a)),a=b.KX.getPropertyNameFromAPDescription(a)),b.K1F.K1G(a,"content"))?g(d,c,e):b.K1F.K1G(a,"foreach")?
f(d,c,e):("undefined"===typeof c&&(c=""),b.K1F.setValueOnPath(d,a,c))},doesSupportMonitoring:function(d,a){"#"===a[0]&&(d=b.KX.Kd(b.KX.getSelectorFromAPDescription(a)),a=b.KX.getPropertyNameFromAPDescription(a));if(!d)return!1;var f=d.tagName.toLowerCase()+"."+a;return c[f]||c["*."+a]},monitor:function(d,a,f,e){"#"===a[0]&&(d=b.KX.Kd(b.KX.getSelectorFromAPDescription(a)),a=b.KX.getPropertyNameFromAPDescription(a));
for(var a=d.tagName.toLowerCase()+"."+a,a=c[a].split(","),g=0;g<a.length;g++)d.addEventListener(a[g],f);("input"===d.tagName.toLowerCase()||"textarea"===d.tagName.toLowerCase())&&(e&&e.immediately&&("1"===e.immediately||"true"===e.immediately.toLowerCase()))&&d.addEventListener("keyup",f)},stopMonitoring:function(d,a,f,e){"#"===a[0]&&(d=b.KX.Kd(b.KX.getSelectorFromAPDescription(a)),a=b.KX.getPropertyNameFromAPDescription(a));for(var a=d.tagName.toLowerCase()+
"."+a,a=c[a].split(","),g=0;g<a.length;g++)d.removeEventListener(a[g],f);("input"===d.tagName.toLowerCase()||"textarea"===d.tagName.toLowerCase())&&(e&&e.immediately&&("1"===e.immediately||"true"===e.immediately.toLowerCase()))&&d.removeEventListener("keyup",f)},syncItems:e};b.K3.registerAPProvider(b.Kf);b.Kg={doesSupport:function(b,a){return a&&("!"===a[0]&&(a=a.substr(1)),"#"===a[0])?!0:b instanceof HTMLElement},getValue:function(c,a){if("!"===a[0]&&(a=a.substr(1),
"#"===a[0]&&(c=b.KX.Kd(b.KX.getSelectorFromAPDescription(a)),a=b.KX.getPropertyNameFromAPDescription(a)),c))return!c.__knot_errorStatusInfo||!c.__knot_errorStatusInfo[a]?null:c.__knot_errorStatusInfo[a].currentStatus},setValue:function(c,a,f,e){if("!"===a[0]&&(a=a.substr(1),"#"===a[0]&&(c=b.KX.Kd(b.KX.getSelectorFromAPDescription(a)),a=b.KX.getPropertyNameFromAPDescription(a)),c&&(f||c.__knot_errorStatusInfo&&c.__knot_errorStatusInfo[a]&&
c.__knot_errorStatusInfo[a].K1O)))if(c.__knot_errorStatusInfo||(c.__knot_errorStatusInfo={}),c.__knot_errorStatusInfo[a]||(c.__knot_errorStatusInfo[a]={}),c.__knot_errorStatusInfo[a].currentStatus!==f){c.__knot_errorStatusInfo[a].currentStatus=f;if(c.__knot_errorStatusInfo[a].K1O)for(var g=c.__knot_errorStatusInfo[a].K1O,h=0;h<g.length;h++)try{g[h].apply(c,[a,f])}catch(i){b.Log.warning("Call error status changed callback failed.",i)}if(e&&e["@error"])if(g=b.K1F.getValueOnPath(null,
e["@error"]),!g||"function"!==typeof g)b.Log.error("'"+e["@error"]+"' must be a function.");else try{g.apply(c,[a,f])}catch(l){b.Log.error("Call AP error event handler '"+e["@error"]+"' failed.",l)}}},doesSupportMonitoring:function(b,a){return"!"===a[0]},monitor:function(c,a,f){if("!"===a[0]){a=a.substr(1);if("#"===a[0]){var e=b.KX.getSelectorFromAPDescription(a),c=b.KX.Kd(e);if(!c){b.Log.warning("Failed to bind to error status, target is not found.  target selector:"+
e);return}a=b.KX.getPropertyNameFromAPDescription(a)}c.__knot_errorStatusInfo||(c.__knot_errorStatusInfo={});c.__knot_errorStatusInfo[a]||(c.__knot_errorStatusInfo[a]={});c.__knot_errorStatusInfo[a].K1O||(c.__knot_errorStatusInfo[a].K1O=[]);c.__knot_errorStatusInfo[a].K1O.push(f)}},stopMonitoring:function(c,a,e){"#"===a[1]&&(c=b.KX.Kd(b.KX.getSelectorFromAPDescription(a.substr(1))),a=b.KX.getPropertyNameFromAPDescription(a.substr(1)));
c.__knot_errorStatusInfo&&(c.__knot_errorStatusInfo[a]&&c.__knot_errorStatusInfo[a].K1O)&&(e=c.__knot_errorStatusInfo[a].K1O.indexOf(e),0<=e&&c.__knot_errorStatusInfo[a].K1O.splice(e,1))},getErrorStatusInformation:function(b,a){if(b.__knot_errorStatusInfo)for(var c in b.__knot_errorStatusInfo)b.__knot_errorStatusInfo[c]&&b.__knot_errorStatusInfo[c].currentStatus&&a.push({node:b,K1P:c,error:b.__knot_errorStatusInfo[c].currentStatus});for(c=0;c<b.children.length;c++)this.getErrorStatusInformation(b.children[c],
a)}};b.K3.registerAPProvider(b.Kg,!0)})(window);(function(i){function h(a){if(!a)return null;for(var b=0;b<a.length;b++)if("dataContext"===a[b].leftAP.description)return a[b];return null}function g(a,b){a.__knot?b.__knot=JSON.parse(JSON.stringify(a.__knot)):delete b.__knot;for(var c=0;c<a.children.length;c++)g(a.children[c],b.children[c])}function e(){var a,d;for(d in c){(function(){var e=d;c[e].objectObserveCallback=function(d,f,g){d=c[e].options;if(f)for(a=0;a<d.length;a++)b.K3.KG(f,null,d[a]);for(a=0;a<d.length;a++)b.K3.KF(g,
null,d[a])};b.KM.monitor(i,d.substr(1),c[e].objectObserveCallback)})();var e=b.K1F.getValueOnPath(null,d);if(e){var f=c[d].options;for(a=0;a<f.length;a++)b.K3.KF(e,null,f[a])}}}function f(a,c){a.__knot_component||(d[c]?a.__knot_component=d[c](a,c):b.Log.error("Component '"+c+"' is not registered."))}var b=i.Knot.K1M(),c={},d={};b.Kh={Kk:{},addGlobalObjectOption:function(a,b){c[a]||(c[a]={options:[]});c[a].options=c[a].options.concat(b)},
K10:function(a){return"function"===typeof a||!this.Kk[a]},createFromTemplate:function(a,c,d){if(this.K10(a)){var e,f;f="function"===typeof a?a:b.K1F.getValueOnPath(c,a);"function"===typeof f?e=f.apply(d,[c]):b.Log.error("Unknown template:"+a);return e}b.Kh.Kk[a]?(a=b.Kh.Kk[a],c=a.cloneNode(!0),g(a,c),a=c):(b.Log.error("Failed find template. id:"+a),a=void 0);return a},hasDataContext:function(a){return a.__knot&&"dataContext"in
a.__knot},setDataContext:function(a,b){this.K13(a,b,!0);a.__knot?a.__knot.dataContext=b:a.__knot={dataContext:b};a.__knot.isFixedDataContext=!0},K11:function(a){if(a.__knot&&a.__knot.options)for(var c=0;c<a.__knot.options.length;c++)"dataContext"!==a.__knot.options[c].leftAP.description&&b.K3.KG(a,a.__knot.dataContext,a.__knot.options[c])},K12:function(a){if(a.__knot&&a.__knot.options)for(var c=0;c<a.__knot.options.length;c++)"dataContext"!==a.__knot.options[c].leftAP.description&&
b.K3.KF(a,a.__knot.dataContext,a.__knot.options[c])},K13:function(a,c,d){if(a instanceof HTMLElement||a instanceof HTMLBodyElement){var e;a.getAttribute("knot-component")&&f(a,a.getAttribute("knot-component"));if(a.__knot){if(d||!a.__knot.isFixedDataContext){e=h(a.__knot.options);d=c;if(e){d=b.K3.K9(c,e.rightAP);if(d===b.K3.K8){b.Log.error("Get context data failed. node:"+b.KX.KY(a));return}if(e.hasTiedUpKnot&&
d===a.__knot.dataContext)return;(e.data||"/"===e.rightAP.description[0])&&e.changedCallback&&e.rightAP.provider.stopMonitoring(e.data,e.rightAP.description,e.changedCallback,e.rightAP.options);e.data=c;e.data||"/"===e.rightAP.description[0]?(e.changedCallback=function(){b.Kh.K13(a,c)},e.rightAP.provider.monitor(e.data,e.rightAP.description,e.changedCallback,e.rightAP.options)):e.changedCallback=null;e.hasTiedUpKnot=!0}this.K11(a);b.K3.KC(a,
c,e,d,!1);for(e=0;e<a.childNodes.length;e++)this.K13(a.childNodes[e],d);a.__knot.dataContext=d;this.K12(a)}}else for(e=0;e<a.childNodes.length;e++)this.K13(a.childNodes[e],c)}},K14:function(a){for(;a;){if(a.__knot)return a.__knot.dataContext;a=a.parentNode}},K15:function(a){if(a.__knot){var b=h(a.__knot.options);b&&((b.data||"/"===b.rightAP.description[0])&&b.changedCallback&&b.rightAP.provider.stopMonitoring(b.data,b.rightAP.description,
b.changedCallback,b.rightAP.options),b.data=null,b.changedCallback=null,b.hasTiedUpKnot=!1);this.K11(a);delete a.__knot.dataContext}a.__knot_component&&(a.__knot_component.dispose&&a.__knot_component.dispose(),delete a.__knot_component);for(b=0;b<a.childNodes.length;b++)this.K15(a.childNodes[b])},bind:function(){e();this.K13(document.body,null)},clear:function(a){if(!a){var d,e;for(e in c){c[e].objectObserveCallback&&b.KM.stopMonitoring(i,e.substr(1),c[e].objectObserveCallback);
var f=b.K1F.getValueOnPath(null,e);if(f){var g=c[e].options;for(d=0;d<g.length;d++)b.K3.KG(f,null,g[d])}}}this.K15(a||document.body)},K16:function(a,b){a.__knot||(a.__knot={});a.__knot.dataContext=b},K1L:function(a){if(a.__knot)return a.__knot.dataContext},K17:function(a){var c;if(a.__knot&&a.__knot.options)for(c=0;c<a.__knot.options.length;c++)"dataContext"!==a.__knot.options[c].leftAP.description&&!(a.__knot.options[c].leftAP.description&&
"!"===a.__knot.options[c].leftAP.description[0])&&b.K3.KH(a.__knot.options[c].leftAP);for(c=0;c<a.children.length;c++)this.K17(a.children[c])},registerComponent:function(a,b){if(d[a])throw Error("Component '"+a+"' has been registered!");d[a]=b},getComponentObject:function(a){return a.__knot_component}}})(window);(function(i){function h(b,c,d,a){a=e.K18.parse(c+":"+a);0<a.length?(e.K3.KF(b,d,a[0]),b.__knot.options||(b.__knot.options=[]),b.__knot.options.push(a[0])):b[c]=d;return a}function g(b){var c=b.tagName.toLowerCase();"input"===c&&(c+=b.type.toLocaleLowerCase());return c}var e=i.Knot.K1M(),f={text:{"input.text":"value",textarea:"value",option:"text",span:"innerText","*":"textContent"}};e.K3.registerAPProvider({doesSupport:function(b,c){"#"===c[0]&&(b=document.querySelector(e.KX.getSelectorFromAPDescription(c)),
c=e.KX.getPropertyNameFromAPDescription(c));return b instanceof HTMLElement&&("select"===b.tagName.toLowerCase()&&(e.K1F.K1G(c,"options")||"selectedData"===c||"value"===c)||"class"===c||f[c])?!0:!1},getValue:function(b,c){"#"===c[0]&&(b=document.querySelector(e.KX.getSelectorFromAPDescription(c)),c=e.KX.getPropertyNameFromAPDescription(c));if("select"===b.tagName.toLowerCase()&&"selectedData"===c){var d=b.options[b.selectedIndex];if(d)return d.__knot?d.__knot.dataContext:
void 0}else{if("select"===b.tagName.toLowerCase()&&"value"===c)return 0<=b.selectedIndex?b.options[b.selectedIndex].value:void 0;if("class"===c)return b.className;if("select"===b.tagName.toLowerCase()&&e.K1F.K1G(c,"options"))return b.options;if(f[c]){var d=b,a=c,h=g(d),d=f[a][h]?d[f[a][h]]:d[f[a]["*"]];return d}}},setValue:function(b,c,d,a){"#"===c[0]&&(b=document.querySelector(e.KX.getSelectorFromAPDescription(c)),c=e.KX.getPropertyNameFromAPDescription(c));if("class"===
c){if(d){for(var a=[],c=b.className.split(" "),d=d.split(" "),j=0;j<d.length;j++){var i=d[j];"-"===i[0]?(i=i.substr(1).trim(),0<=c.indexOf(i)&&c.splice(c.indexOf(i),1)):"+"===i[0]?(i=i.substr(1).trim(),0>c.indexOf(i)&&c.push(i)):a.push(i)}b.className=0<a.length?a.join(" "):c.join(" ")}}else if("select"===b.tagName.toLowerCase()&&"value"===c){for(a=0;a<b.options.length;a++)if(b.options[a].value==d){b.selectedIndex=a;return}b.selectedIndex=-1}else if("select"===b.tagName.toLowerCase()&&"selectedData"===
c)a:{for(a=0;a<b.options.length;a++)if(b.options[a].__knot&&b.options[a].__knot.dataContext===d){b.selectedIndex=a;break a}b.selectedIndex=-1}else if("select"===b.tagName.toLowerCase()&&e.K1F.K1G(c,"options")){(c=a)||(c={});d||(d=[]);for(a=0;a<d.length;a++){a:{for(var j=b.options,i=d[a],k=a;k<j.length;k++)if(e.Kh.K1L(j[k])===i){j=j[k];break a}j=null}j?b.options[a].indexOf(j)!==a&&(b.options.remove(b.options[a].indexOf(j)),b.options.add(j,a)):(j=document.createElement("option"),
e.Kh.K16(j,d[a]),d[a]&&(c.displayMember?h(j,"text",d[a],c.displayMember):j.text=d[a],c.valueMember?h(j,"value",d[a],c.valueMember):j.value=d[a]),b.options.add(j,a))}for(a=b.options.length-1;a>=d.length;a--){c=b.options[a];if(c.__knot&&c.__knot.options){for(j=0;j<c.__knot.options.length;j++)e.K3.KG(c,c.__knot.dataContext,c.__knot.options[j]);delete c.__knot.dataContext}b.options.remove(a)}}else f[c]&&(a=c,"undefined"===typeof d&&(d=""),c=g(b),f[a][c]?b[f[a][c]]=
d:b[f[a]["*"]]=d)},doesSupportMonitoring:function(b,c){"#"===c[0]&&(b=document.querySelector(e.KX.getSelectorFromAPDescription(c)),c=e.KX.getPropertyNameFromAPDescription(c));return b&&"select"===b.tagName.toLowerCase()&&("selectedData"===c||"value"===c)},monitor:function(b,c,d){"#"===c[0]&&(b=document.querySelector(e.KX.getSelectorFromAPDescription(c)),c=e.KX.getPropertyNameFromAPDescription(c));"select"===b.tagName.toLowerCase()&&("selectedData"===c||"value"===
c)&&b.addEventListener("change",d)},stopMonitoring:function(b,c,d){"#"===c[0]&&(b=document.querySelector(e.KX.getSelectorFromAPDescription(c)),c=e.KX.getPropertyNameFromAPDescription(c));"select"===b.tagName.toLowerCase()&&("selectedData"===c||"value"===c)&&b.removeEventListener("change",d)}})})(window);(function(i){i.Knot.K1M().K3.registerAPProvider({doesSupport:function(h){return h&&h.__knot_component},getValue:function(h,g,e){return h.__knot_component.getValue(g,e)},setValue:function(h,g,e,f){h.__knot_component.setValue(g,e,f)},doesSupportMonitoring:function(h,g){return h.__knot_component.doesSupportMonitoring(g)},monitor:function(h,g,e,f){h.__knot_component.monitor(g,e,f)},stopMonitoring:function(h,g,e,f){h.__knot_component.stopMonitoring(g,e,f)}},!1,!0)})(window);(function(i){function h(){if(!c){c=!0;try{if(f){for(var a=f.map(function(a){return e.K1F.getValueOnPath(null,"$hash."+a)}),d=a.length-1;0<=d&&!a[d];d--)a.length=d;d="";0<a.length&&(d=a.join(b));i.location.hash="#"+d;e.K1F.setValueOnPath(null,"$hash.originalHash",d)}}finally{c=!1}}}function g(){if(!c){c=!0;try{var a;a=i.location.hash?i.location.hash.substr(1):"";if(f)for(var d=e.K1F.K1K(a,b),g=0;g<f.length;g++)e.K1F.setValueOnPath(null,"$hash."+f[g],d[g]);e.K1F.setValueOnPath(null,
"$hash.originalHash",a)}finally{c=!1}}}var e=i.Knot.K1M(),f,b,c=!1;e.K1F.setValueOnPath(null,"$hash",{});var d=e.K1F.getValueOnPath(null,"$hash");g();e.K1Q={setHashFormat:function(a,c){if(!(a instanceof Array))throw Error("Hash fields must be an array.");if(0<=a.indexOf("hash"))throw Error("Hash field can't be 'hash'.");if(!c)throw Error("Please specify the splitter.");var i;if(f)for(i=0;i<f.length;i++)e.KM.stopMonitoring(d,f[i],h);f=a;b=c;if(f)for(i=0;i<
f.length;i++)e.KM.monitor(d,f[i],h);g()}};e.KM.monitor(d,"originalHash",function(){h();g()});i.addEventListener("hashchange",function(){g()})})(window);(function(i){function h(){var b;for(b=0;b<e.length;b++)try{if(f)e[b](!1,f);else e[b](!0)}catch(c){g.Log.warning("Execute on ready callback failed.",c)}e.length=0}var g=i.Knot.K1M();delete i.Knot.K1M;i.Knot.Advanced={registerAPProvider:function(b){return g.K3.registerAPProvider(b)},registerLogger:function(b){g.Log.log=b},registerDebugger:function(b){g.Debugger=b},synchronizeItems:function(b,c,d,a,e){g.Kf.syncItems(b,c,d,a,e)},createFromTemplate:function(b,
c,d){return g.Kh.createFromTemplate(b,c,d)},setDataContext:function(b,c){g.Kh.setDataContext(b,c)},getValueOnPath:function(b,c){return g.K1F.getValueOnPath(b,c)},registerNamedGlobalSymbol:function(b,c){return g.KS.KT(b,c)},registerComponent:function(b,c){return g.Kh.registerComponent(b,c)},getComponentObject:function(b){return g.Kh.getComponentObject(b)}};i.Knot.getErrorStatusInformation=function(b){b||(b=document.body);
g.Kh.K17(b);var c=[];g.Kg.getErrorStatusInformation(b,c);return c};i.Knot.notifyObjectChanged=function(b,c,d,a){g.KM.notifyDataChanged(b,c,d,a)};i.Knot.monitorObject=function(b,c,d){g.KM.monitorObject(b,c,d)};i.Knot.stopMonitoringObject=function(b,c,d){g.KM.stopMonitoring(b,c,d)};i.Knot.getPropertiesChangeRecords=function(b){return g.KM.getPropertiesChangeRecords(b)};i.Knot.clearPropertiesChangeRecords=function(b){return g.KM.clearPropertiesChangeRecords(b)};
i.Knot.clear=function(b){g.Kh.clear(b)};i.Knot.getDataContext=function(b){return g.Kh.K14(b)};i.Knot.findElementBindToData=function(b,c){for(var d=0;d<b.length;d++)if(i.Knot.getDataContext(b[d])===c)return b};i.Knot.setHashFormat=function(b,c){g.K1Q.setHashFormat(b,c)};i.Knot.getKnotVariant=function(b){return g.K1F.getValueOnPath(null,b)};i.Knot.setKnotVariant=function(b,c){return g.K1F.setValueOnPath(null,b,c)};var e=[],f;i.Knot.ready=
function(b){e.push(b);(i.Knot.isReady||f)&&h()};i.Knot.isReady=!1;i.addEventListener("load",function(){g.K1R.loadGlobalScope().done(function(){g.Kh.bind();i.Knot.isReady=!0;f=null;h()},function(b){i.Knot.isReady=!1;f=b;h()})})})(window);
